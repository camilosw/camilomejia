/*! For license information please see index.73ea3373.js.LICENSE.txt */
(()=>{var t={228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}},858:t=>{t.exports=function(t){if(Array.isArray(t))return t}},575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}},884:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(o=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){i=!0,r=t}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},38:(t,e,n)=>{var o=n(858),i=n(884),r=n(379),s=n(521);t.exports=function(t,e){return o(t)||i(t,e)||r(t,e)||s()}},379:(t,e,n)=>{var o=n(228);t.exports=function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}},382:function(t,e,n){!function(t,e,n,o){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,o=o&&o.hasOwnProperty("default")?o.default:o;var i=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},r=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},s=function(t,e){return{startTime:e,type:"setValue",value:t}},a=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},c=function(t,e,n){var o=n.startTime,i=n.target,r=n.timeConstant;return i+(e-i)*Math.exp((o-t)/r)},u=function(t){return"exponentialRampToValue"===t.type},l=function(t){return"linearRampToValue"===t.type},p=function(t){return u(t)||l(t)},h=function(t){return"setValue"===t.type},f=function(t){return"setValueCurve"===t.type},d=function t(e,n,o,i){var r=e[n];return void 0===r?i:p(r)||h(r)?r.value:f(r)?r.values[r.values.length-1]:c(o,t(e,n-1,r.startTime,i),r)},m=function(t,e,n,o,i){return void 0===n?[o.insertTime,i]:p(n)?[n.endTime,n.value]:h(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,d(t,e-1,n.startTime,i)]},_=function(t){return"cancelAndHold"===t.type},y=function(t){return"cancelScheduledValues"===t.type},g=function(t){return _(t)||y(t)?t.cancelTime:u(t)||l(t)?t.endTime:t.startTime},v=function(t,e,n,o){var i=o.endTime,r=o.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(t-e)/(i-e)):0},b=function(t,e,n,o){return n+(t-e)/(o.endTime-e)*(o.value-n)},x=function(t,e){var n=e.duration,o=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),o=Math.ceil(e);return n===o?t[n]:(1-(e-n))*t[n]+(1-(o-e))*t[o]}(i,(t-o)/n*(i.length-1))},w=function(t){return"setTarget"===t.type},T=function(){function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return o(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=g(t);if(_(t)||y(t)){var n=this._automationEvents.findIndex((function(t){return g(t)>=e})),o=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),_(t)){var c=this._automationEvents[this._automationEvents.length-1];if(void 0!==o&&p(o)){if(w(c))throw new Error("The internal list is malformed.");var h=f(c)?c.startTime+c.duration:g(c),d=f(c)?c.values[c.values.length-1]:c.value,m=u(o)?v(e,h,d,o):b(e,h,d,o),x=u(o)?i(m,e,this._currenTime):r(m,e,this._currenTime);this._automationEvents.push(x)}void 0!==c&&w(c)&&this._automationEvents.push(s(this.getValue(e),e)),void 0!==c&&f(c)&&c.startTime+c.duration>e&&(this._automationEvents[this._automationEvents.length-1]=a(new Float32Array([6,7]),c.startTime,e-c.startTime))}}else{var T=this._automationEvents.findIndex((function(t){return g(t)>e})),O=-1===T?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[T-1];if(void 0!==O&&f(O)&&g(O)+O.duration>e)return!1;var S=u(t)?i(t.value,t.endTime,this._currenTime):l(t)?r(t.value,e,this._currenTime):t;if(-1===T)this._automationEvents.push(S);else{if(f(t)&&e+t.duration>g(this._automationEvents[T]))return!1;this._automationEvents.splice(T,0,S)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return g(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),o=n[0];w(o)&&n.unshift(s(d(this._automationEvents,e-2,o.startTime,this._defaultValue),o.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents[this._automationEvents.length-1],o=this._automationEvents.findIndex((function(e){return g(e)>t})),i=this._automationEvents[o],r=g(n)<=t?n:this._automationEvents[o-1];if(void 0!==r&&w(r)&&(void 0===i||!p(i)||i.insertTime>t))return c(t,d(this._automationEvents,o-2,r.startTime,this._defaultValue),r);if(void 0!==r&&h(r)&&(void 0===i||!p(i)))return r.value;if(void 0!==r&&f(r)&&(void 0===i||!p(i)||r.startTime+r.duration>t))return t<r.startTime+r.duration?x(t,r):r.values[r.values.length-1];if(void 0!==r&&p(r)&&(void 0===i||!p(i)))return r.value;if(void 0!==i&&u(i)){var s=m(this._automationEvents,o-1,r,i,this._defaultValue),a=e(s,2),_=a[0],y=a[1];return v(t,_,y,i)}if(void 0!==i&&l(i)){var T=m(this._automationEvents,o-1,r,i,this._defaultValue),O=e(T,2),S=O[0],k=O[1];return b(t,S,k,i)}return this._defaultValue}}]),t}();t.AutomationEventList=T,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=s,t.createSetValueCurveAutomationEvent=a,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(38),n(575),n(913))},21:(t,e,n)=>{var o;!function(){"use strict";var i=.5*(Math.sqrt(3)-1),r=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,c=(5-Math.sqrt(5))/20;function u(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,o=1,i=p();t=i(" "),e=i(" "),n=i(" ");for(var r=0;r<arguments.length;r++)(t-=i(arguments[r]))<0&&(t+=1),(e-=i(arguments[r]))<0&&(e+=1),(n-=i(arguments[r]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*o;return t=e,e=n,n=i-(o=0|i)}}(t):Math.random,this.p=l(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function l(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var o=e+~~(t()*(256-e)),i=n[e];n[e]=n[o],n[o]=i}return n}function p(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var o=.02519603282416938*(t+=e.charCodeAt(n));o-=t=o>>>0,t=(o*=t)>>>0,t+=4294967296*(o-=t)}return 2.3283064365386963e-10*(t>>>0)}}u.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,o,s=this.permMod12,a=this.perm,c=this.grad3,u=0,l=0,p=0,h=(t+e)*i,f=Math.floor(t+h),d=Math.floor(e+h),m=(f+d)*r,_=t-(f-m),y=e-(d-m);_>y?(n=1,o=0):(n=0,o=1);var g=_-n+r,v=y-o+r,b=_-1+2*r,x=y-1+2*r,w=255&f,T=255&d,O=.5-_*_-y*y;if(O>=0){var S=3*s[w+a[T]];u=(O*=O)*O*(c[S]*_+c[S+1]*y)}var k=.5-g*g-v*v;if(k>=0){var C=3*s[w+n+a[T+o]];l=(k*=k)*k*(c[C]*g+c[C+1]*v)}var A=.5-b*b-x*x;if(A>=0){var D=3*s[w+1+a[T+1]];p=(A*=A)*A*(c[D]*b+c[D+1]*x)}return 70*(u+l+p)},noise3D:function(t,e,n){var o,i,r,a,c,u,l,p,h,f,d=this.permMod12,m=this.perm,_=this.grad3,y=.3333333333333333*(t+e+n),g=Math.floor(t+y),v=Math.floor(e+y),b=Math.floor(n+y),x=(g+v+b)*s,w=t-(g-x),T=e-(v-x),O=n-(b-x);w>=T?T>=O?(c=1,u=0,l=0,p=1,h=1,f=0):w>=O?(c=1,u=0,l=0,p=1,h=0,f=1):(c=0,u=0,l=1,p=1,h=0,f=1):T<O?(c=0,u=0,l=1,p=0,h=1,f=1):w<O?(c=0,u=1,l=0,p=0,h=1,f=1):(c=0,u=1,l=0,p=1,h=1,f=0);var S=w-c+s,k=T-u+s,C=O-l+s,A=w-p+2*s,D=T-h+2*s,M=O-f+2*s,E=w-1+.5,P=T-1+.5,R=O-1+.5,j=255&g,q=255&v,I=255&b,V=.6-w*w-T*T-O*O;if(V<0)o=0;else{var F=3*d[j+m[q+m[I]]];o=(V*=V)*V*(_[F]*w+_[F+1]*T+_[F+2]*O)}var N=.6-S*S-k*k-C*C;if(N<0)i=0;else{var L=3*d[j+c+m[q+u+m[I+l]]];i=(N*=N)*N*(_[L]*S+_[L+1]*k+_[L+2]*C)}var z=.6-A*A-D*D-M*M;if(z<0)r=0;else{var B=3*d[j+p+m[q+h+m[I+f]]];r=(z*=z)*z*(_[B]*A+_[B+1]*D+_[B+2]*M)}var W=.6-E*E-P*P-R*R;if(W<0)a=0;else{var U=3*d[j+1+m[q+1+m[I+1]]];a=(W*=W)*W*(_[U]*E+_[U+1]*P+_[U+2]*R)}return 32*(o+i+r+a)},noise4D:function(t,e,n,o){var i,r,s,u,l,p,h,f,d,m,_,y,g,v,b,x,w,T=this.perm,O=this.grad4,S=(t+e+n+o)*a,k=Math.floor(t+S),C=Math.floor(e+S),A=Math.floor(n+S),D=Math.floor(o+S),M=(k+C+A+D)*c,E=t-(k-M),P=e-(C-M),R=n-(A-M),j=o-(D-M),q=0,I=0,V=0,F=0;E>P?q++:I++,E>R?q++:V++,E>j?q++:F++,P>R?I++:V++,P>j?I++:F++,R>j?V++:F++;var N=E-(p=q>=3?1:0)+c,L=P-(h=I>=3?1:0)+c,z=R-(f=V>=3?1:0)+c,B=j-(d=F>=3?1:0)+c,W=E-(m=q>=2?1:0)+2*c,U=P-(_=I>=2?1:0)+2*c,G=R-(y=V>=2?1:0)+2*c,Q=j-(g=F>=2?1:0)+2*c,Y=E-(v=q>=1?1:0)+3*c,X=P-(b=I>=1?1:0)+3*c,Z=R-(x=V>=1?1:0)+3*c,H=j-(w=F>=1?1:0)+3*c,$=E-1+4*c,J=P-1+4*c,K=R-1+4*c,tt=j-1+4*c,et=255&k,nt=255&C,ot=255&A,it=255&D,rt=.6-E*E-P*P-R*R-j*j;if(rt<0)i=0;else{var st=T[et+T[nt+T[ot+T[it]]]]%32*4;i=(rt*=rt)*rt*(O[st]*E+O[st+1]*P+O[st+2]*R+O[st+3]*j)}var at=.6-N*N-L*L-z*z-B*B;if(at<0)r=0;else{var ct=T[et+p+T[nt+h+T[ot+f+T[it+d]]]]%32*4;r=(at*=at)*at*(O[ct]*N+O[ct+1]*L+O[ct+2]*z+O[ct+3]*B)}var ut=.6-W*W-U*U-G*G-Q*Q;if(ut<0)s=0;else{var lt=T[et+m+T[nt+_+T[ot+y+T[it+g]]]]%32*4;s=(ut*=ut)*ut*(O[lt]*W+O[lt+1]*U+O[lt+2]*G+O[lt+3]*Q)}var pt=.6-Y*Y-X*X-Z*Z-H*H;if(pt<0)u=0;else{var ht=T[et+v+T[nt+b+T[ot+x+T[it+w]]]]%32*4;u=(pt*=pt)*pt*(O[ht]*Y+O[ht+1]*X+O[ht+2]*Z+O[ht+3]*H)}var ft=.6-$*$-J*J-K*K-tt*tt;if(ft<0)l=0;else{var dt=T[et+1+T[nt+1+T[ot+1+T[it+1]]]]%32*4;l=(ft*=ft)*ft*(O[dt]*$+O[dt+1]*J+O[dt+2]*K+O[dt+3]*tt)}return 27*(i+r+s+u+l)}},u._buildPermutationTable=l,void 0===(o=function(){return u}.call(e,n,e,t))||(t.exports=o),e.SimplexNoise=u,t.exports=u}()}},e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(21),e=n.n(t),o=Array.from(document.getElementsByClassName("cell")),i=n(382);const r=()=>{try{return new DOMException("","AbortError")}catch(t){return t.code=20,t.name="AbortError",t}},s=new WeakSet,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,m=new WeakMap,_=new WeakMap,y={construct:()=>y},g=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,v=(t,e)=>{const n=[];let o=t.replace(/^[\s]+/,""),i=o.match(g);for(;null!==i;){const t=i[1].slice(1,-1),r=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(r),o=o.slice(i[0].length).replace(/^[\s]+/,""),i=o.match(g)}return[n.join(";"),o]},b=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},x=t=>{if(!(t=>{try{new new Proxy(t,y)}catch(t){return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},w={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},T=(t,e)=>t.context===e,O=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},S=()=>{try{return new DOMException("","IndexSizeError")}catch(t){return t.code=1,t.name="IndexSizeError",t}},k=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw S();throw t}})},C={numberOfChannels:1},A=-34028234663852886e22,D=-A,M=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},E=t=>M(f,t),P=t=>{if(s.has(t))throw new Error("The AudioNode is already stored.");s.add(t),E(t).forEach((t=>t(!0)))},R=t=>{if(!s.has(t))throw new Error("The AudioNode is not stored.");s.delete(t),E(t).forEach((t=>t(!1)))},j={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},q=t=>"context"in t,I=t=>q(t[0]),V=t=>"port"in t,F=t=>"inputs"in t,N=(t,e,n,o)=>{if(F(e)){const i=e.inputs[o];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,o),[e,n,o]},L=(t,e)=>{if(!E(t).delete(e))throw new Error("Missing the expected event listener.")},z=(t,e,n,o)=>{F(e)?t.disconnect(e.inputs[o],n,0):t.disconnect(e,n,o)},B=t=>M(a,t),W=t=>M(u,t),U=t=>M(c,t),G=t=>M(l,t),Q=(t,e,n,o)=>{for(const e of t)if(n(e)){if(o)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Y=t=>s.has(t),X=t=>d.has(t),Z=t=>!s.has(t),H=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[o]=n;return t.delete(o),o},$=(t,e)=>{!V(t)&&e.every((t=>0===t.size))&&R(t)},J=t=>new Promise((e=>{const n=t.createScriptProcessor(256,1,1),o=t.createGain(),i=t.createBuffer(1,2,44100),r=i.getChannelData(0);r[0]=1,r[1]=1;const s=t.createBufferSource();s.buffer=i,s.loop=!0,s.connect(n).connect(t.destination),s.connect(o),s.disconnect(o),n.onaudioprocess=o=>{const i=o.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?e(!0):e(!1),s.stop(),n.onaudioprocess=null,s.disconnect(n),n.disconnect(t.destination)},s.start()})),K=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},tt=t=>"context"in t,et=t=>{const e=new Map;t.connect=(t=>(n,o=0,i=0)=>{const r=tt(n)?t(n,o,i):t(n,o),s=e.get(n);return void 0===s?e.set(n,[{input:i,output:o}]):s.every((t=>t.input!==i||t.output!==o))&&s.push({input:i,output:o}),r})(t.connect.bind(t)),t.disconnect=(n=>(o,i,r)=>{if(n.apply(t),void 0===o)e.clear();else if("number"==typeof o)for(const[t,n]of e){const i=n.filter((t=>t.output!==o));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(o))if(void 0===i)e.delete(o);else{const t=e.get(o);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==r||void 0===r)));0===n.length?e.delete(o):e.set(o,n)}}for(const[n,o]of e)o.forEach((e=>{tt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)},nt=(t,e,[n,o,i],r)=>{Q(t[o],[e,n,i],(t=>t[0]===e&&t[1]===n),r)},ot=(t,e,[n,o],i)=>{Q(t,[e,n,o],(t=>t[0]===e&&t[1]===n),i)},it=(t,e,[n,o,i],r)=>{const s=t.get(n);void 0===s?t.set(n,new Set([[o,e,i]])):Q(s,[o,e,i],(t=>t[0]===o&&t[1]===e),r)},rt=(t,[e,n,o],i)=>{const r=t.get(e);void 0===r?t.set(e,new Set([[n,o]])):Q(r,[n,o],(t=>t[0]===n),i)},st=(t,e,n,o)=>{const i=M(t,e),r=H(i,(t=>t[0]===n&&t[1]===o));return 0===i.size&&t.delete(e),r},at=(t,e,n)=>{const o=M(t,e),i=H(o,(t=>t[0]===n));return 0===o.size&&t.delete(e),i},ct=(t,e,n)=>{for(const o of t)if(o[0]===e&&o[1]===n)return t.delete(o),o;return null},ut=(t,e,n,o)=>{const[i,r]=((t,e,n,o)=>{const{activeInputs:i,passiveInputs:r}=B(e),s=ct(i[o],t,n);return null===s?[st(r,t,n,o)[2],!1]:[s[2],!0]})(t,e,n,o);if(null!==i&&(L(t,i),r&&!X(t)&&z(U(t),U(e),n,o)),Y(e)){const{activeInputs:t}=B(e);$(e,t)}},lt=(t,e,n)=>{const[o,i]=((t,e,n)=>{const{activeInputs:o,passiveInputs:i}=W(e),r=ct(o,t,n);return null===r?[at(i,t,n)[1],!1]:[r[2],!0]})(t,e,n);null!==o&&(L(t,o),i&&!X(t)&&U(t).disconnect(G(e),n))};class pt{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,o)=>t.call(e,n,o,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const ht={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},ft=t=>{const e=[];for(let n=0;n<t;n+=1)e.push(1);return e};function dt(t,e,n,o,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],o,i);else{const r=t.getChannelData(o);if(0===e[n].byteLength)e[n]=r.slice(i,i+128);else{const t=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const mt=(t,e,n,o,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],o,i):0!==e[n].byteLength&&t.getChannelData(o).set(e[n],i)},_t=(t,e)=>{const n=[];for(let o=0;o<t;o+=1){const t=[],i="number"==typeof e?e:e[o];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},yt=async(t,e,n,o,i,r)=>{const s=null===e?128*Math.ceil(t.context.length/128):e.length,a=o.channelCount*o.numberOfInputs,c=o.outputChannelCount.reduce(((t,e)=>t+e),0),u=0===c?null:n.createBuffer(c,s,n.sampleRate);if(void 0===i)throw new Error("Missing the processor constructor.");const l=B(t),p=await((t,e)=>{const n=M(_,t),o=U(e);return M(n,o)})(n,t),h=_t(o.numberOfInputs,o.channelCount),f=_t(o.numberOfOutputs,o.outputChannelCount),d=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let c=0;c<s;c+=128){if(o.numberOfInputs>0&&null!==e)for(let t=0;t<o.numberOfInputs;t+=1)for(let n=0;n<o.channelCount;n+=1)dt(e,h[t],n,n,c);void 0!==i.parameterDescriptors&&null!==e&&i.parameterDescriptors.forEach((({name:t},n)=>{dt(e,d,t,a+n,c)}));for(let t=0;t<o.numberOfInputs;t+=1)for(let e=0;e<o.outputChannelCount[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=h.map(((t,e)=>0===l.activeInputs[e].size?[new Float32Array(0)]:t)),e=r(c/n.sampleRate,n.sampleRate,(()=>p.process(t,f,d)));if(null!==u)for(let t=0,e=0;t<o.numberOfOutputs;t+=1){for(let n=0;n<o.outputChannelCount[t];n+=1)mt(u,f[t],n,e+n,c);e+=o.outputChannelCount[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{error:e}));break}}return u},gt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},vt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},bt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},xt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},wt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Tt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Ot=(t,e,n)=>{const o=e[n];if(void 0===o)throw t();return o},St={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},kt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ct=()=>{try{return new DOMException("","InvalidStateError")}catch(t){return t.code=11,t.name="InvalidStateError",t}},At=()=>{try{return new DOMException("","InvalidAccessError")}catch(t){return t.code=15,t.name="InvalidAccessError",t}},Dt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Mt=(t,e,n,o,i,r,s,a,c,u,l)=>{const p=u.length;let h=a;for(let a=0;a<p;a+=1){let p=n[0]*u[a];for(let e=1;e<i;e+=1){const o=h-e&c-1;p+=n[e]*r[o],p-=t[e]*s[o]}for(let t=i;t<o;t+=1)p+=n[t]*r[h-t&c-1];for(let n=i;n<e;n+=1)p-=t[n]*s[h-n&c-1];r[h]=u[a],s[h]=p,h=h+1&c-1,l[a]=p}return h},Et=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch(t){}return!1},Pt=(t,e,n)=>{const o=e[n];void 0!==o&&o!==t[n]&&(t[n]=o)},Rt=(t,e)=>{Pt(t,e,"channelCount"),Pt(t,e,"channelCountMode"),Pt(t,e,"channelInterpretation")},jt=t=>"function"==typeof t.getFloatTimeDomainData,qt=(t,e,n)=>{const o=e[n];void 0!==o&&o!==t[n].value&&(t[n].value=o)},It=t=>{var e;t.start=(e=t.start,(n=0,o=0,i)=>{if("number"==typeof i&&i<0||o<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,o,i)})},Vt=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},Ft=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Nt=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t);function Lt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function zt(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)i=e,n=[(o=n)[0]*i[0]-o[1]*i[1],o[0]*i[1]+o[1]*i[0]],n[0]+=t[r];var o,i;return n}const Bt=()=>{try{return new DOMException("","NotSupportedError")}catch(t){return t.code=9,t.name="NotSupportedError",t}},Wt={numberOfChannels:1},Ut={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},Gt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Qt={disableNormalization:!1},Yt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Xt=()=>{try{return new DOMException("","UnknownError")}catch(t){return t.name="UnknownError",t}},Zt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ht=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},$t=(t,e,n,o)=>{let i=Object.getPrototypeOf(t);for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:o(s)})},Jt=(t,e)=>n=>{const o={value:t};return Object.defineProperties(n,{currentTarget:o,target:o}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},Kt=(te=new Map,ee=new WeakMap,(t,e)=>{const n=ee.get(t);if(void 0!==n)return n;const o=te.get(t);if(void 0!==o)return o;try{const n=e();return n instanceof Promise?(te.set(t,n),n.catch((()=>!1)).then((e=>(te.delete(t),ee.set(t,e),e)))):(ee.set(t,n),n)}catch(e){return ee.set(t,!1),!1}});var te,ee;const ne="undefined"==typeof window?null:window,oe=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(ne),ie=(t=>e=>null!==t&&e instanceof t)(oe),re=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(ne),se=((t,e,n)=>o=>{if("closed"===o.state&&null!==e&&"webkitAudioContext"!==e.name){if(!t(o)){const t=p.get(o);if(void 0!==t)return t;const n=new e;return p.set(o,n),n}{const t=p.get(o);if(void 0!==t)return t;if(null!==n){const t=new n(1,1,44100);return p.set(o,t),t}}}return null})(ie,re,oe),ae=(t=>(e,n)=>{const o=t(e);return n(null!==o?o:e)})(se),ce=((t,e,n)=>(o,i)=>{const r=n(o,(t=>t.createAnalyser()));if(Rt(r,i),!(i.maxDecibels>i.minDecibels))throw e();return Pt(r,i,"fftSize"),Pt(r,i,"maxDecibels"),Pt(r,i,"minDecibels"),Pt(r,i,"smoothingTimeConstant"),t(jt,(()=>jt(r)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const o=Math.max(n.length,t.fftSize);for(let t=0;t<o;t+=1)e[t]=.0078125*(n[t]-128);return e}})(r),r})(Kt,S,ae),ue=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(B),le=((t,e,n)=>async(o,i,r,s)=>{const a=t(o),c=[...s,o];await Promise.all(a.activeInputs.map(((t,s)=>Array.from(t).filter((([t])=>!c.includes(t))).map((async([t,a])=>{const u=e(t),l=await u.render(t,i,c);n(t)||o===o.context.destination&&n(o)||l.connect(r,a,s)})))).reduce(((t,e)=>[...t,...e]),[]))})(B,ue,X),pe=((t,e,n)=>()=>{const o=new WeakMap;return{render(i,r,s){const a=o.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,s)=>{let a=e(i);if(!T(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(r,e)}return o.set(r,a),await n(i,r,a,s),a})(i,r,s)}}})(ce,U,le),he=new WeakMap,fe=(de=h,t=>{const e=de.get(t);if(void 0===e)throw Ct();return e});var de;const me=new WeakMap,_e=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,o){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const o=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===o?null:o,n)}})(Jt),ye=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(ne),ge=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(ne),ve=((t,e,n,o,i,r,s,a,u,l,p,h,d,m)=>class extends l{constructor(e,o,i,r){super(i),this._context=e,this._nativeAudioNode=i;const s=p(e);m(s)||!0===n(J,(()=>J(s)))||et(i),c.set(this,i),f.set(this,new Set),o&&P(this),t(this,r,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,i=0){const a=p(this._context),c=m(a);if(h(t)||d(t))throw r();if(q(t)){const s=U(t);try{const o=N(this._nativeAudioNode,s,n,i);if(c||Z(this)?this._nativeAudioNode.disconnect(...o):Z(t)&&P(t),V(t)){const t=e.get(s);if(void 0===t){const t=a.createGain();t.connect(o[0],0,o[2]),e.set(s,new Map([[i,t]]))}else if(void 0===t.get(i)){const e=a.createGain();e.connect(o[0],0,o[2]),t.set(i,e)}}}catch(t){if(12===t.code)throw r();throw t}if(c?((t,e,n,o)=>{const{outputs:i}=B(t);if(Q(i,[e,n,o],(t=>t[0]===e&&t[1]===n&&t[2]===o),!0)){const{activeInputs:i}=B(e);return nt(i,t,[n,o,null],!0),!0}return!1})(this,t,n,i):((t,e,n,o)=>{const{activeInputs:i,passiveInputs:r}=B(e),{outputs:s}=B(t),a=E(t),c=s=>{const a=U(e),c=U(t);if(s){const s=st(r,t,n,o);nt(i,t,s,!1),X(t)||N(c,a,n,o),Z(e)&&P(e)}else{const s=((t,e,n,o)=>H(t[o],(t=>t[0]===e&&t[1]===n)))(i,t,n,o);it(r,o,s,!1),X(t)||z(c,a,n,o),Y(e)&&$(e,i)}};return!!Q(s,[e,n,o],(t=>t[0]===e&&t[1]===n&&t[2]===o),!0)&&(a.add(c),Y(t)?nt(i,t,[n,o,c],!0):it(r,o,[t,n,c],!0),!0)})(this,t,n,i)){const e=u([this],t);K(e,o(c))}return t}const l=G(t);if("playbackRate"===l.name)throw s();try{this._nativeAudioNode.connect(l,n),(c||Z(this))&&this._nativeAudioNode.disconnect(l,n)}catch(t){if(12===t.code)throw r();throw t}if(c?((t,e,n)=>{const{outputs:o}=B(t);if(Q(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)){const{activeInputs:o}=W(e);return ot(o,t,[n,null],!0),!0}return!1})(this,t,n):((t,e,n)=>{const{activeInputs:o,passiveInputs:i}=W(e),{outputs:r}=B(t),s=E(t),a=r=>{const s=U(t),a=G(e);if(r){const e=at(i,t,n);ot(o,t,e,!1),X(t)||s.connect(a,n)}else{const e=((t,e,n)=>H(t,(t=>t[0]===e&&t[1]===n)))(o,t,n);rt(i,e,!1),X(t)||s.disconnect(a,n)}};return!!Q(r,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(s.add(a),Y(t)?ot(o,t,[n,a],!0):rt(i,[t,n,a],!0),!0)})(this,t,n)){const e=u([this],t);K(e,o(c))}}disconnect(t,e,n){let o;if(void 0===t)o=(t=>{const e=B(t),n=[];for(const o of e.outputs)I(o)?ut(t,...o):lt(t,...o),n.push(o[0]);return e.outputs.clear(),n})(this);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();o=((t,e)=>{const n=B(t),o=[];for(const i of n.outputs)i[1]===e&&(I(i)?ut(t,...i):lt(t,...i),o.push(i[0]),n.outputs.delete(i));return o})(this,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(q(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(o=((t,e,n,o)=>{const i=B(t);return Array.from(i.outputs).filter((t=>!(t[0]!==e||void 0!==n&&t[1]!==n||void 0!==o&&t[2]!==o))).map((e=>(I(e)?ut(t,...e):lt(t,...e),i.outputs.delete(e),e[0])))})(this,t,e,n),0===o.length)throw r()}for(const t of o){const e=u([this],t);K(e,a)}}})((be=a,(t,e,n)=>{const o=[];for(let t=0;t<n.numberOfInputs;t+=1)o.push(new Set);be.set(t,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),he,Kt,((t,e,n,o,i,r)=>s=>(a,c)=>{const u=t.get(a);if(void 0===u){if(!s&&r(a)){const t=o(a),{outputs:r}=n(a);for(const n of r)if(I(n)){const i=o(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(a,c)}else t.set(a,u+c)})(d,z,B,U,G,Y),S,At,Bt,((t,e,n,o,i,r,s,a)=>(c,u)=>{const l=e.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");const p=r(c.context),h=a(p);if(l===u){if(e.delete(c),!h&&s(c)){const e=o(c),{outputs:r}=n(c);for(const n of r)if(I(n)){const i=o(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(c,l-u)})(N,d,B,U,G,fe,Y,ie),((t,e,n)=>function o(i,r){const s=q(r)?r:n(t,r);if((t=>"delayTime"in t)(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map((t=>o([...i,s],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(me,B,M),_e,fe,ye,ge,ie);var be;const xe=((t,e,n,o,i,r)=>class extends t{constructor(t,n=w){const s=i(t),a={...w,...n},c=o(s,a);super(t,!1,c,r(s)?e():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(ve,pe,S,ce,fe,ie),we=new WeakSet,Te=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(ne),Oe=(Se=new Uint32Array(1),t=>(Se[0]=t,Se[0]));var Se;const ke=((t,e)=>n=>{n.copyFromChannel=(o,i,r=0)=>{const s=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,u=n.getChannelData(a),l=o.length;for(let t=s<0?-s:0;t+s<c&&t<l;t+=1)o[t]=u[t+s]},n.copyToChannel=(o,i,r=0)=>{const s=t(r),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,u=n.getChannelData(a),l=o.length;for(let t=s<0?-s:0;t+s<c&&t<l;t+=1)u[t+s]=o[t]}})(Oe,S),Ce=(t=>e=>{e.copyFromChannel=(n=>(o,i,r=0)=>{const s=t(r),a=t(i);if(s<e.length)return n.call(e,o,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(o,i,r=0)=>{const s=t(r),a=t(i);if(s<e.length)return n.call(e,o,a,s)})(e.copyToChannel)})(Oe),Ae=((t,e,n,o,i,r,s,a)=>{let c=null;return class u{constructor(u){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:p,sampleRate:h}={...C,...u};null===c&&(c=new i(1,1,44100));const f=null!==o&&e(r,r)?new o({length:l,numberOfChannels:p,sampleRate:h}):c.createBuffer(p,l,h);if(0===f.numberOfChannels)throw n();return"function"!=typeof f.copyFromChannel?(s(f),k(f)):e(O,(()=>O(f)))||a(f),t.add(f),f}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===u.prototype||t.has(e)}}})(we,Kt,Bt,Te,oe,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch(t){return!1}return!0})(Te),ke,Ce),De=(t=>e=>{const n=t(e,(t=>t.createOscillator()));try{n.start(-1)}catch(t){return t instanceof RangeError}return!1})(ae),Me=(t=>e=>{const n=e.createBuffer(1,1,44100),o=t(e,(t=>t.createBufferSource()));o.buffer=n,o.start(),o.stop();try{return o.stop(),!0}catch(t){return!1}})(ae),Ee=(t=>e=>{const n=t(e,(t=>t.createOscillator()));try{n.stop(-1)}catch(t){return t instanceof RangeError}return!1})(ae),Pe=(t=>(e,n)=>{const o=t(n,(t=>t.createGain()));e.connect(o);const i=(t=>()=>{t.call(e,o),e.removeEventListener("ended",i)})(e.disconnect);e.addEventListener("ended",i),Nt(e,o),e.stop=(t=>{let n=!1;return(i=0)=>{if(n)try{t.call(e,i)}catch(t){o.gain.setValueAtTime(0,i)}else t.call(e,i),n=!0}})(e.stop)})(ae),Re=((t,e,n)=>async(o,i,r,s)=>{const a=e(o);await Promise.all(Array.from(a.activeInputs).map((async([e,o])=>{const a=t(e),c=await a.render(e,i,s);n(e)||c.connect(r,o)})))})(ue,W,X),je=(t=>(e,n,o,i)=>t(n,e,o,i))(Re),qe=((t,e,n,o,i,r,s,a,c,u,l,p)=>(u,h={})=>{const f=e(u,(t=>t.createBufferSource()));return Rt(f,h),qt(f,h,"playbackRate"),Pt(f,h,"buffer"),Pt(f,h,"loop"),Pt(f,h,"loopEnd"),Pt(f,h,"loopStart"),t(n,(()=>n(u)))||(t=>{t.start=(e=>{let n=!1;return(o=0,i=0,r)=>{if(n)throw Ct();e.call(t,o,i,r),n=!0}})(t.start)})(f),t(o,o)||((t,e)=>{let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;var i;t.start=((i,r)=>(s=0,a=0,c=Number.POSITIVE_INFINITY)=>{if(i.call(t,s,a),c>=0&&c<Number.POSITIVE_INFINITY){const i=Math.max(s,e.currentTime),a=c/t.playbackRate.value;n=i+a,r.call(t,Math.min(n,o))}})(t.start,t.stop),t.stop=(i=t.stop,(r=0)=>{o=Math.max(r,e.currentTime),i.call(t,Math.min(n,o))})})(f,u),t(i,(()=>i(u)))||(t=>{t.start=(e=t.start,(n=0,o=0,i)=>{const r=t.buffer,s=null===r?o:Math.min(r.duration,o);null!==r&&s>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)});var e})(f),t(r,(()=>r(u)))||l(f,u),t(s,(()=>s(u)))||It(f),t(a,(()=>a(u)))||p(f,u),t(c,(()=>c(u)))||Vt(f),f})(Kt,ae,(t=>e=>{const n=t(e,(t=>t.createBufferSource()));n.start();try{n.start()}catch(t){return!0}return!1})(ae),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100),n=e.createBuffer(1,1,e.sampleRate),o=e.createBufferSource();return n.getChannelData(0)[0]=1,o.buffer=n,o.start(0,0,0),o.connect(e.destination),new Promise((t=>{e.oncomplete=({renderedBuffer:e})=>{t(0===e.getChannelData(0)[0])},e.startRendering()}))})(oe),(t=>e=>{const n=t(e,(t=>t.createBufferSource())),o=e.createBuffer(1,1,44100);n.buffer=o;try{n.start(0,1)}catch(t){return!1}return!0})(ae),(t=>e=>{const n=t(e,(t=>t.createBufferSource()));n.start();try{n.stop()}catch(t){return!1}return!0})(ae),De,Me,Ee,0,(t=>(e,n)=>{const o=n.createBuffer(1,1,n.sampleRate);null===e.buffer&&(e.buffer=o),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===o?null:n}),(t=>n=>t.call(e,null===n?o:n)))})($t),Pe),Ie=((t,e)=>(n,o,i,r)=>(t(o).replay(i),e(o,n,i,r)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(W),Re),Ve=((t,e,n,o,i)=>()=>{const r=new WeakMap;let s=null,a=null;return{set start(t){s=t},set stop(t){a=t},render(c,u,l){const p=r.get(u);return void 0!==p?Promise.resolve(p):(async(c,u,l)=>{let p=n(c);const h=T(p,u);if(!h){const t={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value};p=e(u,t),null!==s&&p.start(...s),null!==a&&p.stop(a)}return r.set(u,p),h?await t(u,c.playbackRate,p.playbackRate,l):await o(u,c.playbackRate,p.playbackRate,l),await i(c,u,p,l),p})(c,u,l)}}})(je,qe,U,Ie,le),Fe=((t,e,n,o,r,s,a,c,u,l,p,h)=>(o,f,d,m=null,_=null)=>{const y=new i.AutomationEventList(d.defaultValue),g=f?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:o}=n;e.exponentialRampToValueAtTime(o,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:o}=n;e.linearRampToValueAtTime(o,t)}else if("setTarget"===n.type){const{startTime:t,target:o,timeConstant:i}=n;e.setTargetAtTime(o,t,i)}else if("setValue"===n.type){const{startTime:t,value:o}=n;e.setValueAtTime(o,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:o,values:i}=n;e.setValueCurveAtTime(i,o,t)}}}}))(y):null,v={get defaultValue(){return d.defaultValue},get maxValue(){return null===m?d.maxValue:m},get minValue(){return null===_?d.minValue:_},get value(){return d.value},set value(t){d.value=t,v.setValueAtTime(t,o.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof d.cancelAndHoldAtTime)null===g&&y.flush(o.context.currentTime),y.add(r(t)),d.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===g&&y.flush(o.context.currentTime),y.add(r(t));const n=Array.from(y).pop();d.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?d.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?d.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?d.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&d.setValueCurveAtTime(n.values,n.startTime,n.duration))}return v},cancelScheduledValues:t=>(null===g&&y.flush(o.context.currentTime),y.add(s(t)),d.cancelScheduledValues(t),v),exponentialRampToValueAtTime:(t,e)=>(null===g&&y.flush(o.context.currentTime),y.add(a(t,e)),d.exponentialRampToValueAtTime(t,e),v),linearRampToValueAtTime:(t,e)=>(null===g&&y.flush(o.context.currentTime),y.add(c(t,e)),d.linearRampToValueAtTime(t,e),v),setTargetAtTime:(t,e,n)=>(null===g&&y.flush(o.context.currentTime),y.add(u(t,e,n)),d.setTargetAtTime(t,e,n),v),setValueAtTime:(t,e)=>(null===g&&y.flush(o.context.currentTime),y.add(l(t,e)),d.setValueAtTime(t,e),v),setValueCurveAtTime(t,e,n){if(null!==h&&"webkitAudioContext"===h.name){const i=e+n,r=o.context.sampleRate,s=Math.ceil(e*r),a=Math.floor(i*r),c=a-s,u=new Float32Array(c);for(let o=0;o<c;o+=1){const i=(t.length-1)/n*((s+o)/r-e),a=Math.floor(i),c=Math.ceil(i);u[o]=a===c?t[a]:(1-(i-a))*t[a]+(1-(c-i))*t[c]}null===g&&y.flush(o.context.currentTime),y.add(p(u,e,n)),d.setValueCurveAtTime(u,e,n);const l=a/r;l<i&&v.setValueAtTime(u[u.length-1],l),v.setValueAtTime(t[t.length-1],i)}else null===g&&y.flush(o.context.currentTime),y.add(p(t,e,n)),d.setValueCurveAtTime(t,e,n);return v}};return n.set(v,d),e.set(v,o),t(v,g),v})((Ne=u,(t,e)=>{Ne.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),me,l,0,i.createCancelAndHoldAutomationEvent,i.createCancelScheduledValuesAutomationEvent,i.createExponentialRampToValueAutomationEvent,i.createLinearRampToValueAutomationEvent,i.createSetTargetAutomationEvent,i.createSetValueAutomationEvent,i.createSetValueCurveAutomationEvent,re);var Ne;const Le=((t,e,n,o,i,r,s,a)=>class extends t{constructor(t,o=j){const a=r(t),c={...j,...o},u=i(a,c),l=s(a),p=l?e():null;super(t,!1,u,p),this._audioBufferSourceNodeRenderer=p,this._isBufferNullified=!1,this._isBufferSet=null!==o.buffer&&void 0!==o.buffer,this._nativeAudioBufferSourceNode=u,this._onended=null,this._playbackRate=n(this,l,u.playbackRate,D,A)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){try{this._nativeAudioBufferSourceNode.buffer=t}catch(e){if(null!==t||17!==e.code)throw e;if(null!==this._nativeAudioBufferSourceNode.buffer){const t=this._nativeAudioBufferSourceNode.buffer,e=t.numberOfChannels;for(let n=0;n<e;n+=1)t.getChannelData(n).fill(0);this._isBufferNullified=!0}}if(null!==t){if(this._isBufferSet)throw o();this._isBufferSet=!0}}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n];else{P(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),setTimeout((()=>R(this)),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(ve,Ve,Fe,Ct,qe,fe,ie,Jt),ze=(t=>(e,n)=>{const o=t(e,(t=>t.createGain()));return Rt(o,n),qt(o,n,"gain"),o})(ae),Be=((t,e,n,o,i,r,s,a)=>class extends t{constructor(t,e){const n=r(t),o=s(n),c=i(n,e,o);super(t,!1,c,o?(t=>{let e=null;return{render:(n,o,i)=>(null===e&&(e=(async(e,n,o)=>{const i=n.destination;return await t(e,n,i,o),i})(n,o,i)),e)}})(a):null),this._isNodeOfNativeOfflineAudioContext=o,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(ve,0,S,Ct,((t,e)=>(n,o,i)=>{const r=n.destination;if(r.channelCount!==o)try{r.channelCount=o}catch(t){}i&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:o});const s=t(n,{channelCount:o,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(s,"channelCount",(t=>()=>t.call(s)),(t=>e=>{t.call(s,e);try{r.channelCount=e}catch(t){if(e>r.maxChannelCount)throw t}})),e(s,"channelCountMode",(t=>()=>t.call(s)),(t=>e=>{t.call(s,e),r.channelCountMode=e})),e(s,"channelInterpretation",(t=>()=>t.call(s)),(t=>e=>{t.call(s,e),r.channelInterpretation=e})),Object.defineProperty(s,"maxChannelCount",{get:()=>r.maxChannelCount}),s.connect(r),s})(ze,$t),fe,ie,le),We=(t=>(e,n)=>{const o=t(e,(t=>t.createBiquadFilter()));return Rt(o,n),qt(o,n,"Q"),qt(o,n,"detune"),qt(o,n,"frequency"),qt(o,n,"gain"),Pt(o,n,"type"),o})(ae),Ue=((t,e,n,o,i,r,s)=>class extends t{constructor(t,o=gt){const a=r(t),c={...gt,...o},u=i(a,c),l=s(a);super(t,!1,u,l?n():null),this._Q=e(this,l,u.Q,D,A),this._detune=e(this,l,u.detune,1200*Math.log2(D),-1200*Math.log2(D)),this._frequency=e(this,l,u.frequency,t.sampleRate/2,0),this._gain=e(this,l,u.gain,40*Math.log10(D),-40*Math.log10(D)),this._nativeBiquadFilterNode=u}get Q(){return this._Q}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){if(this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n),t.length!==e.length||e.length!==n.length)throw o()}})(ve,Fe,((t,e,n,o,i)=>()=>{const r=new WeakMap;return{render(s,a,c){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(s,a,c)=>{let u=n(s);const l=T(u,a);if(!l){const t={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(a,t)}return r.set(a,u),l?(await t(a,s.Q,u.Q,c),await t(a,s.detune,u.detune,c),await t(a,s.frequency,u.frequency,c),await t(a,s.gain,u.gain,c)):(await o(a,s.Q,u.Q,c),await o(a,s.detune,u.detune,c),await o(a,s.frequency,u.frequency,c),await o(a,s.gain,u.gain,c)),await i(s,a,u,c),u})(s,a,c)}}})(je,We,U,Ie,le),At,We,fe,ie),Ge=((t,e)=>(n,o,i)=>{const r=new Set;return n.connect=(i=>(s,a=0,c=0)=>{const u=0===r.size;if(e(s))return i.call(n,s,a,c),t(r,[s,a,c],(t=>t[0]===s&&t[1]===a&&t[2]===c),!0),u&&o(),s;i.call(n,s,a),t(r,[s,a],(t=>t[0]===s&&t[1]===a),!0),u&&o()})(n.connect),n.disconnect=(t=>(o,s,a)=>{const c=r.size>0;if(void 0===o)t.apply(n),r.clear();else if("number"==typeof o){t.call(n,o);for(const t of r)t[1]===o&&r.delete(t)}else{e(o)?t.call(n,o,s,a):t.call(n,o,s);for(const t of r)t[0]!==o||void 0!==s&&t[1]!==s||void 0!==a&&t[2]!==a||r.delete(t)}const u=0===r.size;c&&u&&i()})(n.disconnect),n})(Q,ye),Qe=((t,e,n)=>(o,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=e(o,(t=>t.createBufferSource()));n(i,(()=>{const t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)}),(()=>r.disconnect(i)))})(Ct,ae,Ge),Ye=((t,e)=>(n,o)=>{const i=t(n,(t=>t.createChannelMerger(o.numberOfInputs)));Rt(i,o),1!==i.channelCount&&"explicit"!==i.channelCountMode&&e(n,i);try{i.channelCount=void 0===o.numberOfInputs?6:o.numberOfInputs,e(n,i)}catch(t){}return i})(ae,Qe),Xe=((t,e,n,o,i)=>class extends t{constructor(t,r=vt){const s=o(t),a={...vt,...r};super(t,!1,n(s,a),i(s)?e():null)}})(ve,((t,e,n)=>()=>{const o=new WeakMap;return{render(i,r,s){const a=o.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,s)=>{let a=e(i);if(!T(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(r,e)}return o.set(r,a),await n(i,r,a,s),a})(i,r,s)}}})(Ye,U,le),Ye,fe,ie),Ze=(t=>(e,n)=>{const o=t(e,(t=>t.createChannelSplitter(n.numberOfOutputs)));return Rt(o,n),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ct()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Ct()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Ct()}})})(o),o})(ae),He=((t,e,n,o,i)=>class extends t{constructor(t,r=bt){const s=o(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({...bt,...r});super(t,!1,n(s,a),i(s)?e():null)}})(ve,((t,e,n)=>()=>{const o=new WeakMap;return{render(i,r,s){const a=o.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,s)=>{let a=e(i);if(!T(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(r,e)}return o.set(r,a),await n(i,r,a,s),a})(i,r,s)}}})(Ze,U,le),Ze,fe,ie),$e=((t,e,n,o,i)=>(r,s)=>{if(void 0===r.createConstantSource)return n(r,s);const a=e(r,(t=>t.createConstantSource()));return Rt(a,s),qt(a,s,"offset"),t(o,(()=>o(r)))||It(a),t(i,(()=>i(r)))||Vt(a),a})(Kt,ae,((t,e,n)=>(o,{offset:i,...r})=>{const s=o.createBuffer(1,2,o.sampleRate),a=t(o),c=e(o,{...r,gain:i}),u=s.getChannelData(0);return u[0]=1,u[1]=1,a.buffer=s,a.loop=!0,n(Nt({get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return a.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return a.onended},set onended(t){a.onended=t},addEventListener:(...t)=>a.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>a.dispatchEvent(t[0]),removeEventListener:(...t)=>a.removeEventListener(t[0],t[1],t[2]),start(t=0){a.start.call(a,t)},stop(t=0){a.stop.call(a,t)}},c),(()=>a.connect(c)),(()=>a.disconnect(c)))})(qe,ze,Ge),De,Ee),Je=((t,e,n,o,i,r,s)=>class extends t{constructor(t,s=xt){const a=i(t),c={...xt,...s},u=o(a,c),l=r(a),p=l?n():null;super(t,!1,u,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=u,this._offset=e(this,l,u.offset,D,A),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?s(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=t;else{P(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),setTimeout((()=>R(this)),1e3)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(ve,Fe,((t,e,n,o,i)=>()=>{const r=new WeakMap;let s=null,a=null;return{set start(t){s=t},set stop(t){a=t},render(c,u,l){const p=r.get(u);return void 0!==p?Promise.resolve(p):(async(c,u,l)=>{let p=n(c);const h=T(p,u);if(!h){const t={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value};p=e(u,t),null!==s&&p.start(s),null!==a&&p.stop(a)}return r.set(u,p),h?await t(u,c.offset,p.offset,l):await o(u,c.offset,p.offset,l),await i(c,u,p,l),p})(c,u,l)}}})(je,$e,U,Ie,le),$e,fe,ie,Jt),Ke=((t,e,n)=>(o,{buffer:i,channelCount:r,channelCountMode:s,channelInterpretation:a,disableNormalization:c})=>{const u=t(o,(t=>t.createConvolver()));Rt(u,{channelCount:Math.max(r,2),channelCountMode:"max"===s?s:"clamped-max",channelInterpretation:a});const l=e(o,{channelCount:r,channelCountMode:s,channelInterpretation:a,gain:1}),p={get buffer(){return u.buffer},set buffer(t){u.buffer=t},get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){t>2&&(u.channelCount=t),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){"max"===t&&(u.channelCountMode=t),l.channelCountMode=t},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(t){u.channelInterpretation=t,l.channelInterpretation=t},get context(){return u.context},get inputs(){return[u]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get normalize(){return u.normalize},set normalize(t){u.normalize=t},addEventListener:(...t)=>u.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>u.dispatchEvent(t[0]),removeEventListener:(...t)=>u.removeEventListener(t[0],t[1],t[2])};return c===p.normalize&&(p.normalize=!c),i!==p.buffer&&(p.buffer=i),n(Nt(p,l),(()=>u.connect(l)),(()=>u.disconnect(l)))})(ae,ze,Ge),tn=((t,e,n,o)=>(i,r)=>{const s=t(i,(t=>t.createConvolver()));try{s.channelCount=1}catch(t){return e(i,r)}if(Rt(s,r),r.disableNormalization===s.normalize&&(s.normalize=!r.disableNormalization),Pt(s,r,"buffer"),r.channelCount>2)throw n();if(o(s,"channelCount",(t=>()=>t.call(s)),(t=>e=>{if(e>2)throw n();return t.call(s,e)})),"max"===r.channelCountMode)throw n();return o(s,"channelCountMode",(t=>()=>t.call(s)),(t=>e=>{if("max"===e)throw n();return t.call(s,e)})),s})(ae,Ke,Bt,$t),en=((t,e,n,o,i)=>class extends t{constructor(t,r=wt){const s=o(t),a={...wt,...r},c=n(s,a);super(t,!1,c,i(s)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=c}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,t.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(ve,((t,e,n)=>()=>{const o=new WeakMap;return{render(i,r,s){const a=o.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,s)=>{let a=e(i);if(!T(a,r)){const e={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(r,e)}return o.set(r,a),F(a)?await n(i,r,a.inputs[0],s):await n(i,r,a,s),a})(i,r,s)}}})(tn,U,le),tn,fe,ie),nn=(t=>(e,n)=>{const o=t(e,(t=>t.createDelay(n.maxDelayTime)));return Rt(o,n),qt(o,n,"delayTime"),o})(ae),on=((t,e,n,o,i,r)=>class extends t{constructor(t,s=Tt){const a=i(t),c={...Tt,...s},u=o(a,c),l=r(a);super(t,!1,u,l?n(c.maxDelayTime):null),this._delayTime=e(this,l,u.delayTime,c.maxDelayTime,0)}get delayTime(){return this._delayTime}})(ve,Fe,((t,e,n,o,i)=>r=>{const s=new WeakMap;return{render(a,c,u){const l=s.get(c);return void 0!==l?Promise.resolve(l):(async(a,c,u)=>{let l=n(a);const p=T(l,c);if(!p){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:r};l=e(c,t)}return s.set(c,l),p?await t(c,a.delayTime,l.delayTime,u):await o(c,a.delayTime,l.delayTime,u),await i(a,c,l,u),l})(a,c,u)}}})(je,nn,U,Ie,le),nn,fe,ie),rn=((t,e)=>(n,o)=>{const i=t(n,(t=>t.createDynamicsCompressor()));if(Rt(i,o),o.channelCount>2)throw e();if("max"===o.channelCountMode)throw e();return qt(i,o,"attack"),qt(i,o,"knee"),qt(i,o,"ratio"),qt(i,o,"release"),qt(i,o,"threshold"),i})(ae,Bt),sn=((t,e,n,o,i,r,s)=>class extends t{constructor(t,i=St){const a=r(t),c={...St,...i},u=o(a,c),l=s(a);super(t,!1,u,l?n():null),this._attack=e(this,l,u.attack,1,0),this._knee=e(this,l,u.knee,40,0),this._nativeDynamicsCompressorNode=u,this._ratio=e(this,l,u.ratio,20,1),this._release=e(this,l,u.release,1,0),this._threshold=e(this,l,u.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(ve,Fe,((t,e,n,o,i)=>()=>{const r=new WeakMap;return{render(s,a,c){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(s,a,c)=>{let u=n(s);const l=T(u,a);if(!l){const t={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(a,t)}return r.set(a,u),l?(await t(a,s.attack,u.attack,c),await t(a,s.knee,u.knee,c),await t(a,s.ratio,u.ratio,c),await t(a,s.release,u.release,c),await t(a,s.threshold,u.threshold,c)):(await o(a,s.attack,u.attack,c),await o(a,s.knee,u.knee,c),await o(a,s.ratio,u.ratio,c),await o(a,s.release,u.release,c),await o(a,s.threshold,u.threshold,c)),await i(s,a,u,c),u})(s,a,c)}}})(je,rn,U,Ie,le),rn,Bt,fe,ie),an=((t,e,n,o,i,r)=>class extends t{constructor(t,s=kt){const a=i(t),c={...kt,...s},u=o(a,c),l=r(a);super(t,!1,u,l?n():null),this._gain=e(this,l,u.gain,D,A)}get gain(){return this._gain}})(ve,Fe,((t,e,n,o,i)=>()=>{const r=new WeakMap;return{render(s,a,c){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(s,a,c)=>{let u=n(s);const l=T(u,a);if(!l){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(a,t)}return r.set(a,u),l?await t(a,s.gain,u.gain,c):await o(a,s.gain,u.gain,c),await i(s,a,u,c),u})(s,a,c)}}})(je,ze,U,Ie,le),ze,fe,ie),cn=(t=>(e,n,o,i)=>t(e,(t=>t.createScriptProcessor(n,o,i))))(ae),un=((t,e,n,o)=>(i,r,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const p=Ft(r,i.sampleRate),h=u.length,f=l.length,d=Math.min(h,f);if(0===u.length||u.length>20)throw o();if(0===u[0])throw e();if(0===l.length||l.length>20)throw o();if(0===l[0])throw e();if(1!==u[0]){for(let t=0;t<f;t+=1)l[t]/=u[0];for(let t=1;t<h;t+=1)u[t]/=u[0]}const m=n(i,p,s,s);m.channelCount=s,m.channelCountMode=a,m.channelInterpretation=c;const _=[],y=[],g=[];for(let t=0;t<s;t+=1){_.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),y.push(t),g.push(e)}m.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,o=e.numberOfChannels;for(let t=0;t<o;t+=1){const o=e.getChannelData(t),i=n.getChannelData(t);_[t]=Mt(u,h,l,f,d,y[t],g[t],_[t],32,o,i)}};const v=i.sampleRate/2;return Nt({get bufferSize(){return p},get channelCount(){return m.channelCount},set channelCount(t){m.channelCount=t},get channelCountMode(){return m.channelCountMode},set channelCountMode(t){m.channelCountMode=t},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(t){m.channelInterpretation=t},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:(...t)=>m.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>m.dispatchEvent(t[0]),getFrequencyResponse(e,n,o){if(e.length!==n.length||n.length!==o.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/v),r=[Math.cos(i),Math.sin(i)],s=Lt(zt(l,r),zt(u,r));n[t]=Math.sqrt(s[0]*s[0]+s[1]*s[1]),o[t]=Math.atan2(s[1],s[0])}},removeEventListener:(...t)=>m.removeEventListener(t[0],t[1],t[2])},m)})(At,Ct,cn,Bt),ln=((t,e,n,o)=>i=>t(Et,(()=>Et(i)))?Promise.resolve(t(o,o)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(Kt,ze,cn,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),o=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{o.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(ze,oe)),pn=((t,e,n,o,i,r)=>(s,a)=>{const c=new WeakMap;let u=null;return{render(l,p,h){const f=c.get(p);return void 0!==f?Promise.resolve(f):(async(l,p,h)=>{let f=n(l),d=null;const m=T(f,p);if(void 0===p.createIIRFilter?d=t(p):m||(f=e(p,(t=>t.createIIRFilter(a,s)))),c.set(p,null===d?f:d),null!==d){if(null===u){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(l.context.destination.channelCount,l.context.length,p.sampleRate);u=(async()=>(await i(l,t,t.destination,h),((t,e,n,o)=>{const i=n.length,r=o.length,s=Math.min(i,r);if(1!==n[0]){for(let t=0;t<i;t+=1)o[t]/=n[0];for(let t=1;t<r;t+=1)n[t]/=n[0]}const a=new Float32Array(32),c=new Float32Array(32),u=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),l=t.numberOfChannels;for(let e=0;e<l;e+=1){const l=t.getChannelData(e),p=u.getChannelData(e);a.fill(0),c.fill(0),Mt(n,i,o,r,s,a,c,0,32,l,p)}return u})(await r(t),p,s,a)))()}const t=await u;return d.buffer=t,d.start(0),d}return await i(l,p,f,h),f})(l,p,h)}}})(qe,ae,U,oe,le,ln),hn=((t,e,n,o,i)=>class extends t{constructor(t,r){const s=o(t),a=i(s),c={...Dt,...r},u=e(s,a?null:t.baseLatency,c);super(t,!1,u,a?n(c.feedback,c.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,o,i)=>{if(n.length!==o.length||o.length!==i.length)throw At();return e.call(t,n,o,i)})})(u),this._nativeIIRFilterNode=u}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(ve,((t,e)=>(n,o,i)=>{if(void 0===n.createIIRFilter)return e(n,o,i);const r=t(n,(t=>t.createIIRFilter(i.feedforward,i.feedback)));return Rt(r,i),r})(ae,un),pn,fe,ie),fn=((t,e,n,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,h.set(this,n);const i=n.sampleRate;Object.defineProperty(n,"sampleRate",{get:()=>i}),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Be,((t,e,n,o,i)=>(r,s)=>{const a=s.listener,{forwardX:c,forwardY:u,forwardZ:l,positionX:p,positionY:h,positionZ:f,upX:d,upY:m,upZ:_}=void 0===a.forwardX?(()=>{const c=e(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),u=i(s),l=o(s,256,9,0),p=(e,o)=>{const i=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});return i.connect(c,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>o}),t({context:r},u,i.offset,D,A)};let h=[0,0,-1,0,1,0],f=[0,0,0];return l.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some(((t,e)=>t!==h[e]))&&(a.setOrientation(...e),h=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((t,e)=>t!==f[e]))&&(a.setPosition(...n),f=n)},c.connect(l),{forwardX:p(0,0),forwardY:p(1,0),forwardZ:p(2,-1),positionX:p(6,0),positionY:p(7,0),positionZ:p(8,0),upX:p(3,0),upY:p(4,1),upZ:p(5,0)}})():a;return{get forwardX(){return c},get forwardY(){return u},get forwardZ(){return l},get positionX(){return p},get positionY(){return h},get positionZ(){return f},get upX(){return d},get upY(){return m},get upZ(){return _}}})(Fe,Ye,$e,cn,ie),_e,Jt),dn=((t,e,n,o,i,r)=>(s,a)=>{const c=e(s,(t=>t.createOscillator()));return Rt(c,a),qt(c,a,"detune"),qt(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):Pt(c,a,"type"),t(n,(()=>n(s)))||It(c),t(o,(()=>o(s)))||r(c,s),t(i,(()=>i(s)))||Vt(c),c})(Kt,ae,De,Me,Ee,Pe),mn=((t,e,n,o,i)=>()=>{const r=new WeakMap;let s=null,a=null,c=null;return{set periodicWave(t){s=t},set start(t){a=t},set stop(t){c=t},render(u,l,p){const h=r.get(l);return void 0!==h?Promise.resolve(h):(async(u,l,p)=>{let h=n(u);const f=T(h,l);if(!f){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===s?void 0:s,type:h.type};h=e(l,t),null!==a&&h.start(a),null!==c&&h.stop(c)}return r.set(l,h),f?(await t(l,u.detune,h.detune,p),await t(l,u.frequency,h.frequency,p)):(await o(l,u.detune,h.detune,p),await o(l,u.frequency,h.frequency,p)),await i(u,l,h,p),h})(u,l,p)}}})(je,dn,U,Ie,le),_n=((t,e,n,o,i,r,s,a)=>class extends t{constructor(t,n=Ut){const a=r(t),c={...Ut,...n},u=o(a,c),l=s(a),p=l?i():null,h=t.sampleRate/2;super(t,!1,u,p),this._detune=e(this,l,u.detune,153600,-153600),this._frequency=e(this,l,u.frequency,h,-h),this._nativeOscillatorNode=u,this._onended=null,this._oscillatorNodeRenderer=p,null!==this._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=c.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){if(this._nativeOscillatorNode.type=t,"custom"===t)throw n();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=t;else{P(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),setTimeout((()=>R(this)),1e3)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(ve,Fe,Ct,dn,mn,fe,ie,Jt),yn=(t=>(e,n)=>{const o=t(e),i=e.createBuffer(1,2,e.sampleRate);return o.buffer=i,o.loop=!0,o.connect(n),o.start(),()=>{o.stop(),o.disconnect(n)}})(qe),gn=((t,e,n,o,i,r)=>(s,{curve:a,oversample:c,...u})=>{const l=n(s,(t=>t.createWaveShaper())),p=n(s,(t=>t.createWaveShaper()));Rt(l,u),Rt(p,u);const h=o(s,{...u,gain:1}),f=o(s,{...u,gain:-1}),d=o(s,{...u,gain:1}),m=o(s,{...u,gain:-1});let _=null,y=!1,g=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){h.channelCount=t,f.channelCount=t,l.channelCount=t,d.channelCount=t,p.channelCount=t,m.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){h.channelCountMode=t,f.channelCountMode=t,l.channelCountMode=t,d.channelCountMode=t,p.channelCountMode=t,m.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,f.channelInterpretation=t,l.channelInterpretation=t,d.channelInterpretation=t,p.channelInterpretation=t,m.channelInterpretation=t},get context(){return l.context},get curve(){return g},set curve(n){if(null!==a&&a.length<2)throw e();if(null===n)l.curve=n,p.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),o=new Float32Array(t+2-t%2);e[0]=n[0],o[0]=-n[t-1];const i=Math.ceil((t+1)/2),r=(t+1)/2-1;for(let s=1;s<i;s+=1){const a=s/i*r,c=Math.floor(a),u=Math.ceil(a);e[s]=c===u?n[c]:(1-(a-c))*n[c]+(1-(u-a))*n[u],o[s]=c===u?-n[t-1-c]:-(1-(a-c))*n[t-1-c]-(1-(u-a))*n[t-1-u]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,l.curve=e,p.curve=o}g=n,y&&(i(g)&&null===_?_=t(s,h):null!==_&&(_(),_=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(t){l.oversample=t,p.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return a!==v.curve&&(v.curve=a),c!==v.oversample&&(v.oversample=c),r(Nt(v,d),(()=>{h.connect(l).connect(d),h.connect(f).connect(p).connect(m).connect(d),y=!0,i(g)&&(_=t(s,h))}),(()=>{h.disconnect(l),l.disconnect(d),h.disconnect(f),f.disconnect(p),p.disconnect(m),m.disconnect(d),y=!1,null!==_&&(_(),_=null)}))})(yn,Ct,ae,ze,Ht,Ge),vn=((t,e,n,o,i,r,s)=>(a,c)=>{const u=n(a,(t=>t.createWaveShaper()));try{return u.curve=new Float32Array([1]),o(a,c)}catch(t){}Rt(u,c);const l=c.curve;if(null!==l&&l.length<2)throw e();Pt(u,c,"curve"),Pt(u,c,"oversample");let p=null,h=!1;return s(u,"curve",(t=>()=>t.call(u)),(e=>n=>(e.call(u,n),h&&(i(n)&&null===p?p=t(a,u):i(n)||null===p||(p(),p=null)),n))),r(u,(()=>{h=!0,i(u.curve)&&(p=t(a,u))}),(()=>{h=!1,null!==p&&(p(),p=null)}))})(yn,Ct,ae,gn,Ht,Ge,$t),bn=((t,e,n,o,i,r,s,a,c,u)=>(l,{coneInnerAngle:p,coneOuterAngle:h,coneOuterGain:f,distanceModel:d,maxDistance:m,orientationX:_,orientationY:y,orientationZ:g,panningModel:v,positionX:b,positionY:x,positionZ:w,refDistance:T,rolloffFactor:O,...S})=>{const k=n(l,(t=>t.createPanner()));if(S.channelCount>2)throw a();if("max"===S.channelCountMode)throw a();Rt(k,S);const C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=o(l,{...C,channelInterpretation:"speakers",numberOfInputs:6}),D=i(l,{...S,gain:1}),M=i(l,{...C,gain:1}),E=i(l,{...C,gain:0}),P=i(l,{...C,gain:0}),R=i(l,{...C,gain:0}),j=i(l,{...C,gain:0}),q=i(l,{...C,gain:0}),I=r(l,256,6,0),V=s(l,{...C,curve:new Float32Array([1,1]),oversample:"none"});let F=[1,0,0],N=[0,0,0];I.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some(((t,e)=>t!==F[e]))&&(k.setOrientation(...e),F=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((t,e)=>t!==N[e]))&&(k.setPosition(...n),N=n)},Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0});const L={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(t){if(t>2)throw a();D.channelCount=t,k.channelCount=t},get channelCountMode(){return k.channelCountMode},set channelCountMode(t){if("max"===t)throw a();D.channelCountMode=t,k.channelCountMode=t},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(t){D.channelInterpretation=t,k.channelInterpretation=t},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(t){k.coneInnerAngle=t},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(t){k.coneOuterAngle=t},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();k.coneOuterGain=t},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(t){k.distanceModel=t},get inputs(){return[D]},get maxDistance(){return k.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;k.maxDistance=t},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return M.gain},get orientationY(){return E.gain},get orientationZ(){return P.gain},get panningModel(){return k.panningModel},set panningModel(t){if(k.panningModel=t,k.panningModel!==t&&"HRTF"===t)throw a()},get positionX(){return R.gain},get positionY(){return j.gain},get positionZ(){return q.gain},get refDistance(){return k.refDistance},set refDistance(t){if(t<0)throw new RangeError;k.refDistance=t},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;k.rolloffFactor=t},addEventListener:(...t)=>D.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>D.dispatchEvent(t[0]),removeEventListener:(...t)=>D.removeEventListener(t[0],t[1],t[2])};return p!==L.coneInnerAngle&&(L.coneInnerAngle=p),h!==L.coneOuterAngle&&(L.coneOuterAngle=h),f!==L.coneOuterGain&&(L.coneOuterGain=f),d!==L.distanceModel&&(L.distanceModel=d),m!==L.maxDistance&&(L.maxDistance=m),_!==L.orientationX.value&&(L.orientationX.value=_),y!==L.orientationY.value&&(L.orientationY.value=y),g!==L.orientationZ.value&&(L.orientationZ.value=g),v!==L.panningModel&&(L.panningModel=v),b!==L.positionX.value&&(L.positionX.value=b),x!==L.positionY.value&&(L.positionY.value=x),w!==L.positionZ.value&&(L.positionZ.value=w),T!==L.refDistance&&(L.refDistance=T),O!==L.rolloffFactor&&(L.rolloffFactor=O),u(Nt(L,k),(()=>{D.connect(k),t(D,V,0,0),V.connect(M).connect(A),V.connect(E).connect(A),V.connect(P).connect(A),V.connect(R).connect(A),V.connect(j).connect(A),V.connect(q).connect(A),A.connect(I)}),(()=>{D.disconnect(k),c(D,V,0,0),V.disconnect(M),M.disconnect(A),V.disconnect(E),E.disconnect(A),V.disconnect(P),P.disconnect(A),V.disconnect(R),R.disconnect(A),V.disconnect(j),j.disconnect(A),V.disconnect(q),q.disconnect(A),A.disconnect(I)}))})(N,Ct,ae,Ye,ze,cn,vn,Bt,z,Ge),xn=((t,e)=>(n,o)=>{const i=t(n,(t=>t.createPanner()));return void 0===i.orientationX?e(n,o):(Rt(i,o),qt(i,o,"orientationX"),qt(i,o,"orientationY"),qt(i,o,"orientationZ"),qt(i,o,"positionX"),qt(i,o,"positionY"),qt(i,o,"positionZ"),Pt(i,o,"coneInnerAngle"),Pt(i,o,"coneOuterAngle"),Pt(i,o,"coneOuterGain"),Pt(i,o,"distanceModel"),Pt(i,o,"maxDistance"),Pt(i,o,"panningModel"),Pt(i,o,"refDistance"),Pt(i,o,"rolloffFactor"),i)})(ae,bn),wn=((t,e,n,o,i)=>()=>{const r=new WeakMap;return{render(s,a,c){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(s,a,c)=>{let u=n(s);const l=T(u,a);if(!l){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,coneInnerAngle:u.coneInnerAngle,coneOuterAngle:u.coneOuterAngle,coneOuterGain:u.coneOuterGain,distanceModel:u.distanceModel,maxDistance:u.maxDistance,orientationX:u.orientationX.value,orientationY:u.orientationY.value,orientationZ:u.orientationZ.value,panningModel:u.panningModel,positionX:u.positionX.value,positionY:u.positionY.value,positionZ:u.positionZ.value,refDistance:u.refDistance,rolloffFactor:u.rolloffFactor};u=e(a,t)}return r.set(a,u),l?(await t(a,s.orientationX,u.orientationX,c),await t(a,s.orientationY,u.orientationY,c),await t(a,s.orientationZ,u.orientationZ,c),await t(a,s.positionX,u.positionX,c),await t(a,s.positionY,u.positionY,c),await t(a,s.positionZ,u.positionZ,c)):(await o(a,s.orientationX,u.orientationX,c),await o(a,s.orientationY,u.orientationY,c),await o(a,s.orientationZ,u.orientationZ,c),await o(a,s.positionX,u.positionX,c),await o(a,s.positionY,u.positionY,c),await o(a,s.positionZ,u.positionZ,c)),F(u)?await i(s,a,u.inputs[0],c):await i(s,a,u,c),u})(s,a,c)}}})(je,xn,U,Ie,le),Tn=((t,e,n,o,i,r)=>class extends t{constructor(t,s=Gt){const a=i(t),c={...Gt,...s},u=n(a,c),l=r(a);super(t,!1,u,l?o():null),this._nativePannerNode=u,this._orientationX=e(this,l,u.orientationX,D,A),this._orientationY=e(this,l,u.orientationY,D,A),this._orientationZ=e(this,l,u.orientationZ,D,A),this._positionX=e(this,l,u.positionX,D,A),this._positionY=e(this,l,u.positionY,D,A),this._positionZ=e(this,l,u.positionZ,D,A)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(ve,Fe,xn,wn,fe,ie),On=((t,e,n)=>class o{constructor(o,i){const r=e(o),s={...Qt,...i},a=t(r,s);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===o.prototype||n.has(t)}})((t=>(e,{disableNormalization:n,imag:o,real:i})=>{const r=t(e),s=new Float32Array(o),a=new Float32Array(i);return null!==r?r.createPeriodicWave(a,s,{disableNormalization:n}):e.createPeriodicWave(a,s,{disableNormalization:n})})(se),fe,new WeakSet),Sn=((t,e,n)=>(o,i)=>t(o,(t=>{const r=i.channelCountMode;if("clamped-max"===r)throw n();if(void 0===o.createStereoPanner)return e(o,i);const s=t.createStereoPanner();return Rt(s,i),qt(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw n()}}),s})))(ae,((t,e,n,o,i,r)=>{const s=16385,a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},p=(t,r,p,h,f)=>{if(1===r)return((t,e,i,r)=>{const p=new Float32Array(s),h=new Float32Array(s);for(let t=0;t<s;t+=1){const e=t/16384*c;p[t]=Math.cos(e),h[t]=Math.sin(e)}const f=n(t,{...u,gain:0}),d=o(t,{...l,curve:p}),m=o(t,{...l,curve:a}),_=n(t,{...u,gain:0}),y=o(t,{...l,curve:h});return{connectGraph(){e.connect(f),e.connect(m.inputs[0]),e.connect(_),m.connect(i),i.connect(d.inputs[0]),i.connect(y.inputs[0]),d.connect(f.gain),y.connect(_.gain),f.connect(r,0,0),_.connect(r,0,1)},disconnectGraph(){e.disconnect(f),e.disconnect(m.inputs[0]),e.disconnect(_),m.disconnect(i),i.disconnect(d.inputs[0]),i.disconnect(y.inputs[0]),d.disconnect(f.gain),y.disconnect(_.gain),f.disconnect(r,0,0),_.disconnect(r,0,1)}}})(t,p,h,f);if(2===r)return((t,i,r,p)=>{const h=new Float32Array(s),f=new Float32Array(s),d=new Float32Array(s),m=new Float32Array(s),_=Math.floor(8192.5);for(let t=0;t<s;t+=1)if(t>_){const e=(t-_)/(16384-_)*c;h[t]=Math.cos(e),f[t]=Math.sin(e),d[t]=0,m[t]=1}else{const e=t/(16384-_)*c;h[t]=1,f[t]=0,d[t]=Math.cos(e),m[t]=Math.sin(e)}const y=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=n(t,{...u,gain:0}),v=o(t,{...l,curve:h}),b=n(t,{...u,gain:0}),x=o(t,{...l,curve:f}),w=o(t,{...l,curve:a}),T=n(t,{...u,gain:0}),O=o(t,{...l,curve:d}),S=n(t,{...u,gain:0}),k=o(t,{...l,curve:m});return{connectGraph(){i.connect(y),i.connect(w.inputs[0]),y.connect(g,1),y.connect(b,1),y.connect(T,1),y.connect(S,1),w.connect(r),r.connect(v.inputs[0]),r.connect(x.inputs[0]),r.connect(O.inputs[0]),r.connect(k.inputs[0]),v.connect(g.gain),x.connect(b.gain),O.connect(T.gain),k.connect(S.gain),g.connect(p,0,0),T.connect(p,0,0),b.connect(p,0,1),S.connect(p,0,1)},disconnectGraph(){i.disconnect(y),i.disconnect(w.inputs[0]),y.disconnect(g,1),y.disconnect(b,1),y.disconnect(T,1),y.disconnect(S,1),w.disconnect(r),r.disconnect(v.inputs[0]),r.disconnect(x.inputs[0]),r.disconnect(O.inputs[0]),r.disconnect(k.inputs[0]),v.disconnect(g.gain),x.disconnect(b.gain),O.disconnect(T.gain),k.disconnect(S.gain),g.disconnect(p,0,0),T.disconnect(p,0,0),b.disconnect(p,0,1),S.disconnect(p,0,1)}}})(t,p,h,f);throw i()};return(e,{channelCount:o,channelCountMode:s,pan:a,...c})=>{if("max"===s)throw i();const u=t(e,{...c,channelCount:1,channelCountMode:s,numberOfInputs:2}),l=n(e,{...c,channelCount:o,channelCountMode:s,gain:1}),h=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:f,disconnectGraph:d}=p(e,o,l,h,u);Object.defineProperty(h.gain,"defaultValue",{get:()=>0});const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount!==t&&(_&&d(),({connectGraph:f,disconnectGraph:d}=p(e,t,l,h,u)),_&&f()),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2])};let _=!1;return r(Nt(m,u),(()=>{f(),_=!0}),(()=>{d(),_=!1}))}})(Ye,Ze,ze,vn,Bt,Ge),Bt),kn=((t,e,n,o,i)=>()=>{const r=new WeakMap;return{render(s,a,c){const u=r.get(a);return void 0!==u?Promise.resolve(u):(async(s,a,c)=>{let u=n(s);const l=T(u,a);if(!l){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(a,t)}return r.set(a,u),l?await t(a,s.pan,u.pan,c):await o(a,s.pan,u.pan,c),F(u)?await i(s,a,u.inputs[0],c):await i(s,a,u,c),u})(s,a,c)}}})(je,Sn,U,Ie,le),Cn=((t,e,n,o,i,r)=>class extends t{constructor(t,s=Yt){const a=i(t),c={...Yt,...s},u=n(a,c),l=r(a);super(t,!1,u,l?o():null),this._pan=e(this,l,u.pan,1,-1)}get pan(){return this._pan}})(ve,Fe,Sn,kn,fe,ie),An=((t,e,n)=>()=>{const o=new WeakMap;return{render(i,r,s){const a=o.get(r);return void 0!==a?Promise.resolve(a):(async(i,r,s)=>{let a=e(i);if(!T(a,r)){const e={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(r,e)}return o.set(r,a),F(a)?await n(i,r,a.inputs[0],s):await n(i,r,a,s),a})(i,r,s)}}})(vn,U,le),Dn=((t,e,n,o,i,r)=>class extends t{constructor(t,e=Zt){const s=i(t),a={...Zt,...e},c=n(s,a);super(t,!0,c,r(s)?o():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(ve,Ct,vn,An,fe,ie),Mn=(t=>null!==t&&t.isSecureContext)(ne),En=(t=>(e,n,o)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return o()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(ne),Pn=Mn?((t,e,n,o,i,r,s,a,c)=>(u,l,p={credentials:"omit"})=>{const h=s(u),f=new URL(l,location.href).toString();if(void 0!==h.audioWorklet)return i(l).then((t=>{const[e,n]=v(t,f),o=new Blob([`${e};(registerProcessor=>{${n}\n})((n,p)=>registerProcessor(n,class extends p{constructor(o){const{hasNoOutput,...q}=o.parameterData;if(hasNoOutput===1){super({...o,numberOfOutputs:0,outputChannelCount:[],parameterData:q});this._h=true}else{super(o);this._h=false}}process(i,o,p){return super.process(i,(this._h)?[]:o,p)}}))`],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(o),s=r(h);return(null!==s?s:h).audioWorklet.addModule(i,p).then((()=>URL.revokeObjectURL(i))).catch((t=>{throw URL.revokeObjectURL(i),t}))}));const d=c.get(u);if(void 0!==d&&d.has(l))return Promise.resolve();const _=a.get(u);if(void 0!==_){const t=_.get(l);if(void 0!==t)return t}const y=i(l).then((t=>{const[e,o]=v(t,f);return n(`${e};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)})).then((()=>{const t=window._AWGS.pop();if(void 0===t)throw new SyntaxError;o(h.currentTime,h.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const o=m.get(h);if(void 0!==o){if(o.has(t))throw e();x(n),b(n.parameterDescriptors),o.set(t,n)}else x(n),b(n.parameterDescriptors),m.set(h,new Map([[t,n]]))}),h.sampleRate,void 0,void 0)))})).catch((e=>{if("SyntaxError"===e.name)throw t();throw e}));return void 0===_?a.set(u,new Map([[l,y]])):_.set(l,y),y.then((()=>{const t=c.get(u);void 0===t?c.set(u,new Set([l])):t.add(l)})).catch((()=>{})).then((()=>{const t=a.get(u);void 0!==t&&t.delete(l)})),y})(r,Bt,(t=>e=>new Promise(((n,o)=>{if(null===t)return void o(new SyntaxError);const i=t.document.head;if(null===i)o(new SyntaxError);else{const r=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,u=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(t,e,n,i,r)=>e===a||e===location.href&&1===n&&1===i?(u(),o(r),!1):null!==c?c(t,e,n,i,r):void 0,r.onerror=()=>{u(),o(new SyntaxError)},r.onload=()=>{u(),n()},r.src=a,r.type="module",i.appendChild(r)}})))(ne),En,(t=>async e=>{try{const t=await fetch(e);if(t.ok)return t.text()}catch(t){}throw t()})(r),se,fe,new WeakMap,new WeakMap):void 0,Rn=(t=>e=>null!==t&&e instanceof t)(re),jn=((t,e)=>n=>t(n)||e(n))(Rn,ie),qn=((t,e,n,o,i,r,s,a,c,u,l,p,h,f,d,m,_,y,g,v)=>class extends d{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,o){return new n({length:e,numberOfChannels:t,sampleRate:o})}createBufferSource(){return new o(this)}createChannelMerger(t=6){return new r(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new s(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(t=1){return new l(this,{maxDelayTime:t})}createDynamicsCompressor(){return new p(this)}createGain(){return new h(this)}createIIRFilter(t,e){return new f(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new _(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new y(this,{...n,imag:e,real:t})}createStereoPanner(){return new g(this)}createWaveShaper(){return new v(this)}decodeAudioData(t,e,n){return u(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t))).catch((t=>{throw"function"==typeof n&&n(t),t}))}})(Pn,xe,Ae,Le,Ue,Xe,He,Je,en,((t,e,n,o,i,r,s,a,c,u,l,p,h)=>(n,o)=>{const f=s(n)?n:r(n);if(i.has(o)){const t=(()=>{try{return new DOMException("","DataCloneError")}catch(t){return t.code=25,t.name="DataCloneError",t}})();return Promise.reject(t)}try{i.add(o)}catch(t){}return e(l,(()=>l(f)))?("closed"===f.state&&null!==c&&a(f)?new c(1,1,f.sampleRate):f).decodeAudioData(o).catch((t=>{if(t instanceof DOMException&&"NotSupportedError"===t.name)throw new TypeError;throw t})).then((n=>(e(u,(()=>u(n)))||h(n),t.add(n),n))):new Promise(((e,n)=>{const i=()=>{try{(t=>{const{port1:e}=new MessageChannel;e.postMessage(t,[t])})(o)}catch(t){}},r=t=>{n(t),i()};try{f.decodeAudioData(o,(n=>{"function"!=typeof n.copyFromChannel&&(p(n),k(n)),t.add(n),i(),e(n)}),(t=>{r(null===t?(()=>{try{return new DOMException("","EncodingError")}catch(t){return t.code=0,t.name="EncodingError",t}})():t)}))}catch(t){r(t)}}))})(we,Kt,0,0,new WeakSet,fe,jn,ie,oe,O,Et,ke,Ce),on,sn,an,hn,fn,_n,Tn,On,Cn,Dn),In=((t,e,n,o,i)=>class extends t{constructor(t,r){const s=o(t);if(i(s))throw n();const a=e(s,r);super(t,!0,a,null),this._mediaElement=r.mediaElement,this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}})(ve,(t=>(e,n)=>t(e,(t=>t.createMediaElementSource(n.mediaElement))))(ae),Bt,fe,ie),Vn=((t,e,n,o,i)=>class extends t{constructor(t,r){const s=o(t);if(i(s))throw n();const a=e(s,r);super(t,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(ve,(t=>(e,{mediaStream:n})=>{const o=n.getAudioTracks(),i=t(e,(t=>{const e=o.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0)).slice(0,1);return t.createMediaStreamSource(new MediaStream(e))}));return Object.defineProperty(i,"mediaStream",{value:n}),i})(ae),Bt,fe,ie),Fn=((t,e,n,o,i)=>class extends t{constructor(t,r){const s=o(t);if(i(s))throw n();super(t,!0,e(s,r),null)}})(ve,((t,e)=>(n,{mediaStreamTrack:o})=>"function"==typeof n.createMediaStreamTrackSource?e(n,(t=>t.createMediaStreamTrackSource(o))):e(n,(e=>{const n=new MediaStream([o]),i=e.createMediaStreamSource(n);if("audio"!==o.kind)throw t();return i})))(Ct,ae),Bt,fe,ie),Nn=((t,e,n,o,i,r,s,a)=>class extends t{constructor(t={}){if(null===a)throw new Error("Missing the native AudioContext constructor.");const e=new a(t);if(null===e)throw o();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:r}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=e,this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamSource(t){return new r(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new s(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(qn,Ct,Bt,Xt,In,Vn,Fn,re),Ln=(t=>(e,n,o=0,i=0)=>{const r=e[o];if(void 0===r)throw t();return tt(n)?r.connect(n,0,i):r.connect(n,0)})(S),zn=(t=>(e,n,o,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?Ot(t,e,n).disconnect():tt(n)?void 0===o?e.forEach((t=>t.disconnect(n))):void 0===i?Ot(t,e,o).disconnect(n,0):Ot(t,e,o).disconnect(n,0,i):void 0===o?e.forEach((t=>t.disconnect(n))):Ot(t,e,o).disconnect(n,0))(S),Bn=((t,e,n,o,i,r,s,a,c,u,l,p,h)=>(f,d,m,y)=>{if(0===y.numberOfInputs&&0===y.numberOfOutputs)throw u();if(void 0!==y.outputChannelCount){if(y.outputChannelCount.some((t=>t<1)))throw u();if(y.outputChannelCount.length!==y.numberOfOutputs)throw n()}if("explicit"!==y.channelCountMode)throw u();const g=y.channelCount*y.numberOfInputs,v=y.outputChannelCount.reduce(((t,e)=>t+e),0),b=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(g+b>6||v>6)throw u();const x=new MessageChannel,w=[],T=[];for(let t=0;t<y.numberOfInputs;t+=1)w.push(a(f,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),T.push(r(f,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const O=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:o}of m.parameterDescriptors){const i=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==y.parameterData[o]?y.parameterData[o]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?D:e},minValue:{get:()=>void 0===n?A:n}}),O.push(i)}const S=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+b)}),k=Ft(d,f.sampleRate),C=c(f,k,g+b,Math.max(1,v)),M=r(f,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),E=[];for(let t=0;t<y.numberOfOutputs;t+=1)E.push(i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y.outputChannelCount[t]}));for(let t=0;t<y.numberOfInputs;t+=1){w[t].connect(T[t]);for(let e=0;e<y.channelCount;e+=1)T[t].connect(S,e,t*y.channelCount+e)}const P=new pt(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:t},e)=>{const n=O[e];return n.connect(S,0,g+e),n.start(0),[t,n.offset]})));S.connect(C);let R=y.channelInterpretation,j=null;const q=0===y.numberOfOutputs?[C]:E,I={get bufferSize(){return k},get channelCount(){return y.channelCount},set channelCount(t){throw o()},get channelCountMode(){return y.channelCountMode},set channelCountMode(t){throw o()},get channelInterpretation(){return R},set channelInterpretation(t){for(const e of w)e.channelInterpretation=t;R=t},get context(){return C.context},get inputs(){return w},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return j},set onprocessorerror(t){"function"==typeof j&&I.removeEventListener("processorerror",j),j="function"==typeof t?t:null,"function"==typeof j&&I.addEventListener("processorerror",j)},get parameters(){return P},get port(){return x.port2},addEventListener:(...t)=>C.addEventListener(t[0],t[1],t[2]),connect:e.bind(null,q),disconnect:l.bind(null,q),dispatchEvent:(...t)=>C.dispatchEvent(t[0]),removeEventListener:(...t)=>C.removeEventListener(t[0],t[1],t[2])},V=new Map;var F,N;x.port1.addEventListener=(F=x.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=V.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{p(f.currentTime,f.sampleRate,(()=>e(t)))},V.set(e,t[1]))}}return F.call(x.port1,t[0],t[1],t[2])}),x.port1.removeEventListener=(N=x.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=V.get(t[1]);void 0!==e&&(V.delete(t[1]),t[1]=e)}return N.call(x.port1,t[0],t[1],t[2])});let L=null;Object.defineProperty(x.port1,"onmessage",{get:()=>L,set:t=>{"function"==typeof L&&x.port1.removeEventListener("message",L),L="function"==typeof t?t:null,"function"==typeof L&&(x.port1.addEventListener("message",L),x.port1.start())}}),m.prototype.port=x.port1;let z=null;((t,e,n,o)=>{let i=_.get(t);void 0===i&&(i=new WeakMap,_.set(t,i));const r=(async(t,e)=>new t(await(t=>new Promise(((e,n)=>{const{port1:o,port2:i}=new MessageChannel;o.onmessage=({data:t})=>{o.close(),i.close(),e(t)},o.onmessageerror=({data:t})=>{o.close(),i.close(),n(t)},i.postMessage(t)})))(e)))(n,o);return i.set(e,r),r})(f,I,m,y).then((t=>z=t));const B=_t(y.numberOfInputs,y.channelCount),W=_t(y.numberOfOutputs,y.outputChannelCount),U=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let G=!0;const Q=()=>{y.numberOfOutputs>0&&C.disconnect(M);for(let t=0,e=0;t<y.numberOfOutputs;t+=1){const n=E[t];for(let o=0;o<y.outputChannelCount[t];o+=1)M.disconnect(n,e+o,o);e+=y.outputChannelCount[t]}};C.onaudioprocess=({inputBuffer:e,outputBuffer:n})=>{if(null!==z)for(let o=0;o<k;o+=128){for(let t=0;t<y.numberOfInputs;t+=1)for(let n=0;n<y.channelCount;n+=1)dt(e,B[t],n,n,o);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:t},n)=>{dt(e,U,t,g+n,o)}));for(let t=0;t<y.numberOfInputs;t+=1)for(let e=0;e<y.outputChannelCount[t];e+=1)0===W[t][e].byteLength&&(W[t][e]=new Float32Array(128));try{const e=B.map(((e,n)=>{const o=t.get(I);return void 0===o||void 0===o.get(n)?[new Float32Array(0)]:e})),i=p(f.currentTime+o/f.sampleRate,f.sampleRate,(()=>z.process(e,W,U)));G=i;for(let t=0,e=0;t<y.numberOfOutputs;t+=1){for(let i=0;i<y.outputChannelCount[t];i+=1)mt(n,W[t],i,e+i,o);e+=y.outputChannelCount[t]}}catch(t){G=!1,I.dispatchEvent(new ErrorEvent("processorerror",{error:t}))}if(!G){for(let t=0;t<y.numberOfInputs;t+=1){w[t].disconnect(T[t]);for(let e=0;e<y.channelCount;e+=1)T[o].disconnect(S,e,t*y.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=O[e];t.disconnect(S,0,g+e),t.stop()}}S.disconnect(C),C.onaudioprocess=null,Y&&Q();break}}};let Y=!1;return h(I,(()=>{if(G){y.numberOfOutputs>0&&C.connect(M);for(let t=0,e=0;t<y.numberOfOutputs;t+=1){const n=E[t];for(let o=0;o<y.outputChannelCount[t];o+=1)M.connect(n,e+o,o);e+=y.outputChannelCount[t]}}Y=!0}),(()=>{G&&Q(),Y=!1}))})(he,Ln,S,Ct,Ye,Ze,$e,ze,cn,Bt,zn,En,Ge),Wn=((t,e,n,o,i)=>(r,s,a,c,u,l)=>{if(null!==a)try{const n=e(r,(t=>i(t)&&0!==l.numberOfInputs&&0===l.numberOfOutputs?new a(t,c,{...l,numberOfOutputs:1,outputChannelCount:[1],parameterData:{...l.parameterData,hasNoOutput:1}}):new a(t,c,l))),o=new Map;let s=null;return Object.defineProperties(n,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>s,set:t=>{"function"==typeof s&&n.removeEventListener("processorerror",s),s="function"==typeof t?t:null,"function"==typeof s&&n.addEventListener("processorerror",s)}}}),n.addEventListener=(h=n.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=o.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{e(new ErrorEvent(t[0],{...n,error:new Error}))},o.set(e,t[1]))}}return h.call(n,t[0],t[1],t[2])}),n.removeEventListener=(p=n.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=o.get(t[1]);void 0!==e&&(o.delete(t[1]),t[1]=e)}return p.call(n,t[0],t[1],t[2])}),n}catch(t){if(11===t.code)throw o();throw t}var p,h;if(void 0===u)throw o();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(l),n(r,s,u,l)})(Ct,ae,Bn,Bt,ie),Un=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(ne),Gn=((t,e,n,o,i,r,s,a,c,u,l,p,h,f,d)=>(m,_,y)=>{const g=new WeakMap;let v=null;return{render(b,x,w){const O=g.get(x);return void 0!==O?Promise.resolve(O):(async(b,x,w)=>{let O=u(b),S=null;const k=T(O,x);if(null===l){const t=_.outputChannelCount.reduce(((t,e)=>t+e),0),n=i(x,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),r=[];for(let t=0;t<b.numberOfOutputs;t+=1)r.push(o(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:_.outputChannelCount[t]}));const c=0===_.numberOfOutputs?[n]:r,u=s(x,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});u.connect=e.bind(null,c),u.disconnect=a.bind(null,c),S=[n,r,u]}else k||(O=new l(x,m));if(g.set(x,null===S?O:S[2]),null!==S){if(null===v){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===p)throw new Error("Missing the native OfflineAudioContext constructor.");const t=b.channelCount*b.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,a=async()=>{const a=new p(n,128*Math.ceil(b.context.length/128),x.sampleRate),c=[],u=[];for(let t=0;t<_.numberOfInputs;t+=1)c.push(s(a,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),u.push(i(a,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const l=await Promise.all(Array.from(b.parameters.values()).map((async t=>{const e=r(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await h(a,t,e.offset,w),e}))),m=o(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){c[t].connect(u[t]);for(let e=0;e<_.channelCount;e+=1)u[t].connect(m,e,t*_.channelCount+e)}for(const[e,n]of l.entries())n.connect(m,0,t+e),n.start(0);return m.connect(a.destination),await Promise.all(c.map((t=>f(b,a,t,w)))),d(a)};v=yt(b,0===n?null:await a(),x,_,y,c)}const t=await v,e=n(x),[a,u,l]=S;null!==t&&(e.buffer=t,e.start(0)),e.connect(a);for(let t=0,e=0;t<b.numberOfOutputs;t+=1){const n=u[t];for(let o=0;o<_.outputChannelCount[t];o+=1)a.connect(n,e+o,o);e+=_.outputChannelCount[t]}return l}if(k)for(const[e,n]of b.parameters.entries())await t(x,n,O.parameters.get(e),w);else for(const[t,e]of b.parameters.entries())await h(x,e,O.parameters.get(t),w);return await f(b,x,O,w),O})(b,x,w)}}})(je,Ln,qe,Ye,Ze,$e,ze,zn,En,U,Un,oe,Ie,le,ln),Qn=Mn?((t,e,n,o,i,r,s,a,c)=>class extends t{constructor(t,c,u=ht){const l=r(t),p=s(l),h=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:ft(t.numberOfOutputs)}))({...ht,...u}),f=m.get(l),d=void 0===f?void 0:f.get(c),_=o(l,p?null:t.baseLatency,a,c,d,h);super(t,!0,_,p?n(c,h,d):null);const y=[];if(_.parameters.forEach(((t,n)=>{const o=e(this,p,t);y.push([n,o])})),this._nativeAudioWorkletNode=_,this._numberOfOutputs=0===u.numberOfOutputs?0:this._nativeAudioWorkletNode.numberOfOutputs,this._onprocessorerror=null,this._parameters=new pt(y),"closed"!==t.state){const e=new i(t,{gain:0});try{this.connect(e).connect(t.destination)}catch(t){if("IndexSizeError"!==t.name)throw t}}}get numberOfOutputs(){return this._numberOfOutputs}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?c(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(ve,Fe,Gn,Wn,an,fe,ie,Un,Jt):void 0,Yn=((t,e)=>(n,o,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,o,i)}catch(e){if("IndexSizeError"===e.name||"SyntaxError"===e.name)throw t();throw e}})(Bt,oe),Xn=((t,e,n,o,i,r,s)=>(a,c)=>n(a).render(a,c,[]).then((()=>o(c))).then((n=>("function"!=typeof n.copyFromChannel?(r(n),k(n)):e(i,(()=>i(n)))||s(n),t.add(n),n))))(we,Kt,ue,ln,O,ke,Ce),Zn=((t,e,n,o,i)=>class extends t{constructor(t,n,i){let r;if("number"==typeof t&&void 0!==n&&void 0!==i)r={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");r=t}const{length:s,numberOfChannels:a,sampleRate:c}={...Wt,...r},u=o(a,s,c);e(Et,(()=>Et(u)))||u.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(u.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(u,a),this._length=s,this._nativeOfflineAudioContext=u,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).then((t=>(this._state=null,t))).catch((t=>{throw this._state=null,t})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(qn,Kt,Ct,Yn,Xn),Hn=((t,e)=>n=>{const o=t.get(n);return e(o)||e(n)})(h,Rn),$n=((t,e)=>n=>t.has(n)||e(n))(c,ye),Jn=((t,e)=>n=>t.has(n)||e(n))(l,ge),Kn=((t,e)=>n=>{const o=t.get(n);return e(o)||e(n)})(h,ie);var to=function(t,e){return(to=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function eo(t,e){function n(){this.constructor=t}to(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function no(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function oo(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{c(o.next(t))}catch(t){r(t)}}function a(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((o=o.apply(t,e||[])).next())}))}function io(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function ro(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function ao(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(so(arguments[e]));return t}function co(t,e){if(!t)throw new Error(e)}function uo(t,e,n){if(void 0===n&&(n=1/0),!(e<=t&&t<=n))throw new RangeError("Value must be within ["+e+", "+n+"], got: "+t)}function lo(t){t.isOffline||"running"===t.state||fo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var po=console;function ho(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];po.log.apply(po,ao(t))}function fo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];po.warn.apply(po,ao(t))}function mo(t){return void 0===t}function _o(t){return!mo(t)}function yo(t){return"function"==typeof t}function go(t){return"number"==typeof t}function vo(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function bo(t){return"boolean"==typeof t}function xo(t){return Array.isArray(t)}function wo(t){return"string"==typeof t}function To(t){return wo(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Oo(){return new Nn}function So(t,e,n){return new Zn(t,e,n)}var ko="object"==typeof self?self:null,Co=ko&&(ko.hasOwnProperty("AudioContext")||ko.hasOwnProperty("webkitAudioContext")),Ao=function(){function t(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}return t.prototype._createWorker=function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t"],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},t.prototype._createTimeout=function(){var t=this;this._timeout=setTimeout((function(){t._createTimeout(),t._callback()}),1e3*this._updateInterval)},t.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},t.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disposeClock()},t}();function Do(t){return Jn(t)}function Mo(t){return $n(t)}function Eo(t){return Kn(t)}function Po(t){return Hn(t)}function Ro(t){return t instanceof AudioBuffer}function jo(t,e){return"value"===t||Do(e)||Mo(e)||Ro(e)}function qo(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];if(!o.length)return t;var r=o.shift();if(vo(t)&&vo(r))for(var s in r)jo(s,r[s])?t[s]=r[s]:vo(r[s])?(t[s]||Object.assign(t,((e={})[s]={},e)),qo(t[s],r[s])):Object.assign(t,((n={})[s]=r[s],n));return qo.apply(void 0,ao([t],o))}function Io(t,e,n,o){var i;void 0===n&&(n=[]);var r={},s=Array.from(e);if(vo(s[0])&&o&&!Reflect.has(s[0],o)&&(Object.keys(s[0]).some((function(e){return Reflect.has(t,e)}))||(qo(r,((i={})[o]=s[0],i)),n.splice(n.indexOf(o),1),s.shift())),1===s.length&&vo(s[0]))qo(r,s[0]);else for(var a=0;a<n.length;a++)_o(s[a])&&(r[n[a]]=s[a]);return qo(t,r)}function Vo(t,e){return mo(t)?e:t}function Fo(t,e){return e.forEach((function(e){Reflect.has(t,e)&&delete t[e]})),t}var No=function(){function t(){this.debug=!1,this._wasDisposed=!1}return t.getDefaults=function(){return{}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(this.debug||ko&&this.toString()===ko.TONE_DEBUG_CLASS)&&ho.apply(void 0,ao([this],t))},t.prototype.dispose=function(){return this._wasDisposed=!0,this},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.name},t.version="14.5.17",t}(),Lo=1e-6;function zo(t,e){return t>e+Lo}function Bo(t,e){return zo(t,e)||Uo(t,e)}function Wo(t,e){return t+Lo<e}function Uo(t,e){return Math.abs(t-e)<Lo}function Go(t,e,n){return Math.max(Math.min(t,n),e)}var Qo=function(t){function e(){var n=t.call(this)||this;n.name="Timeline",n._timeline=[];var o=Io(e.getDefaults(),arguments,["memory"]);return n.memory=o.memory,n.increasing=o.increasing,n}return eo(e,t),e.getDefaults=function(){return{memory:1/0,increasing:!1}},Object.defineProperty(e.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){if(co(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];co(Bo(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var o=this.length-this.memory;this._timeline.splice(0,o)}return this},e.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},e.prototype.get=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},e.prototype.peek=function(){return this._timeline[0]},e.prototype.shift=function(){return this._timeline.shift()},e.prototype.getAfter=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},e.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null},e.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(Uo(this._timeline[e].time,t)){for(var n=e;n>=0&&Uo(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Bo(this._timeline[0].time,t)&&(this._timeline=[]);return this},e.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},e.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},e.prototype._search=function(t,e){if(void 0===e&&(e="time"),0===this._timeline.length)return-1;var n=0,o=this._timeline.length,i=o;if(o>0&&this._timeline[o-1][e]<=t)return o-1;for(;n<i;){var r=Math.floor(n+(i-n)/2),s=this._timeline[r],a=this._timeline[r+1];if(Uo(s[e],t)){for(var c=r;c<this._timeline.length;c++)Uo(this._timeline[c][e],t)&&(r=c);return r}if(Wo(s[e],t)&&zo(a[e],t))return r;zo(s[e],t)?i=r:n=r+1}return-1},e.prototype._iterate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._timeline.length-1),this._timeline.slice(e,n+1).forEach(t)},e.prototype.forEach=function(t){return this._iterate(t),this},e.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},e.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},e.prototype.forEachBetween=function(t,e,n){var o=this._search(t),i=this._search(e);return-1!==o&&-1!==i?(this._timeline[o].time!==t&&(o+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,o,i)):-1===o&&this._iterate(n,0,i),this},e.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},e.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate((function(n){n.time===t&&e(n)}),0,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=[],this},e}(No),Yo=[];function Xo(t){Yo.push(t)}var Zo=[];function Ho(t){Zo.push(t)}var $o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Emitter",e}return eo(e,t),e.prototype.on=function(t,e){var n=this;return t.split(/\W+/).forEach((function(t){mo(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)})),this},e.prototype.once=function(t,e){var n=this,o=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];e.apply(void 0,ao(i)),n.off(t,o)};return this.on(t,o),this},e.prototype.off=function(t,e){var n=this;return t.split(/\W+/).forEach((function(o){if(mo(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(mo(e))n._events[t]=[];else for(var i=n._events[t],r=0;r<i.length;r++)i[r]===e&&i.splice(r,1)})),this},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(t))for(var o=this._events[t].slice(0),i=0,r=o.length;i<r;i++)o[i].apply(this,e);return this},e.mixin=function(t){["on","once","off","emit"].forEach((function(n){var o=Object.getOwnPropertyDescriptor(e.prototype,n);Object.defineProperty(t.prototype,n,o)}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=void 0,this},e}(No),Jo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOffline=!1,e}return eo(e,t),e}($o),Ko=function(t){function e(){var n=t.call(this)||this;n.name="Context",n._constants=new Map,n._timeouts=new Qo,n._timeoutIds=0,n._initialized=!1,n.isOffline=!1,n._workletModules=new Map;var o=Io(e.getDefaults(),arguments,["context"]);return o.context?n._context=o.context:n._context=Oo(),n._latencyHint=o.latencyHint,n.lookAhead=o.lookAhead,n._ticker=new Ao(n.emit.bind(n,"tick"),o.clockSource,o.updateInterval),n.on("tick",n._timeoutLoop.bind(n)),n._context.onstatechange=function(){n.emit("statechange",n.state)},n}return eo(e,t),e.getDefaults=function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}},e.prototype.initialize=function(){var t;return this._initialized||(t=this,Yo.forEach((function(e){return e(t)})),this._initialized=!0),this},e.prototype.createAnalyser=function(){return this._context.createAnalyser()},e.prototype.createOscillator=function(){return this._context.createOscillator()},e.prototype.createBufferSource=function(){return this._context.createBufferSource()},e.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},e.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},e.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},e.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},e.prototype.createConstantSource=function(){return this._context.createConstantSource()},e.prototype.createConvolver=function(){return this._context.createConvolver()},e.prototype.createDelay=function(t){return this._context.createDelay(t)},e.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},e.prototype.createGain=function(){return this._context.createGain()},e.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},e.prototype.createPanner=function(){return this._context.createPanner()},e.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},e.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},e.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},e.prototype.createMediaStreamSource=function(t){if(Po(this._context))return this._context.createMediaStreamSource(t);throw new Error("Only available on online audio context")},e.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this._context.listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this.initialize(),this._transport},set:function(t){co(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draw",{get:function(){return this.initialize(),this._draw},set:function(t){co(!this._initialized,"Draw cannot be set after initialization."),this._draw=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return this.initialize(),this._destination},set:function(t){co(!this._initialized,"The destination cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),e.prototype.createAudioWorkletNode=function(t,e){return function(t,e,n){return co(_o(Qn),"This node only works in a secure context (https or localhost)"),new Qn(t,e,n)}(this.rawContext,t,e)},e.prototype.addAudioWorkletModule=function(t,e){return oo(this,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return co(_o(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),[4,this._workletModules.get(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.workletsAreReady=function(){return oo(this,void 0,void 0,(function(){var t;return io(this,(function(e){switch(e.label){case 0:return t=[],this._workletModules.forEach((function(e){return t.push(e)})),[4,Promise.all(t)];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,wo(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.now=function(){return this._context.currentTime+this.lookAhead},e.prototype.immediate=function(){return this._context.currentTime},e.prototype.resume=function(){return"suspended"===this._context.state&&Po(this._context)?this._context.resume():Promise.resolve()},e.prototype.close=function(){return oo(this,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return Po(this._context)?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._initialized&&(e=this,Zo.forEach((function(t){return t(e)}))),[2]}var e}))}))},e.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),o=0;o<n.length;o++)n[o]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i},e.prototype.dispose=function(){var e=this;return t.prototype.dispose.call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((function(t){return e._constants[t].disconnect()})),this},e.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},e.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},e.prototype.clearTimeout=function(t){var e=this;return this._timeouts.forEach((function(n){n.id===t&&e._timeouts.remove(n)})),this},e.prototype.clearInterval=function(t){return this.clearTimeout(t)},e.prototype.setInterval=function(t,e){var n=this,o=++this._timeoutIds,i=function(){var r=n.now();n._timeouts.add({callback:function(){t(),i()},id:o,time:r+e})};return i(),o},e}(Jo),ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lookAhead=0,e.latencyHint=0,e.isOffline=!1,e}return eo(e,t),e.prototype.createAnalyser=function(){return{}},e.prototype.createOscillator=function(){return{}},e.prototype.createBufferSource=function(){return{}},e.prototype.createBiquadFilter=function(){return{}},e.prototype.createBuffer=function(t,e,n){return{}},e.prototype.createChannelMerger=function(t){return{}},e.prototype.createChannelSplitter=function(t){return{}},e.prototype.createConstantSource=function(){return{}},e.prototype.createConvolver=function(){return{}},e.prototype.createDelay=function(t){return{}},e.prototype.createDynamicsCompressor=function(){return{}},e.prototype.createGain=function(){return{}},e.prototype.createIIRFilter=function(t,e){return{}},e.prototype.createPanner=function(){return{}},e.prototype.createPeriodicWave=function(t,e,n){return{}},e.prototype.createStereoPanner=function(){return{}},e.prototype.createWaveShaper=function(){return{}},e.prototype.createMediaStreamSource=function(t){return{}},e.prototype.decodeAudioData=function(t){return Promise.resolve({})},e.prototype.createAudioWorkletNode=function(t,e){return{}},Object.defineProperty(e.prototype,"rawContext",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.addAudioWorkletModule=function(t,e){return oo(this,void 0,void 0,(function(){return io(this,(function(t){return[2,Promise.resolve()]}))}))},e.prototype.resume=function(){return Promise.resolve()},e.prototype.setTimeout=function(t,e){return 0},e.prototype.clearTimeout=function(t){return this},e.prototype.setInterval=function(t,e){return 0},e.prototype.clearInterval=function(t){return this},e.prototype.getConstant=function(t){return{}},Object.defineProperty(e.prototype,"currentTime",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"draw",{get:function(){return{}},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return{}},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.now=function(){return 0},e.prototype.immediate=function(){return 0},e}(Jo);function ei(t,e){xo(e)?e.forEach((function(e){return ei(t,e)})):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function ni(t,e){xo(e)?e.forEach((function(e){return ni(t,e)})):Object.defineProperty(t,e,{writable:!0})}var oi=function(){},ii=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffer",n.onload=oi;var o=Io(e.getDefaults(),arguments,["url","onload","onerror"]);return n.reverse=o.reverse,n.onload=o.onload,o.url&&Ro(o.url)||o.url instanceof e?n.set(o.url):wo(o.url)&&n.load(o.url).catch(o.onerror),n}return eo(e,t),e.getDefaults=function(){return{onerror:oi,onload:oi,reverse:!1}},Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:ci().sampleRate},enumerable:!0,configurable:!0}),e.prototype.set=function(t){var n=this;return t instanceof e?t.loaded?this._buffer=t.get():t.onload=function(){n.set(t),n.onload(n)}:this._buffer=t,this._reversed&&this._reverse(),this},e.prototype.get=function(){return this._buffer},e.prototype.load=function(t){return oo(this,void 0,void 0,(function(){var n,o,i,r;return io(this,(function(s){switch(s.label){case 0:n=e.load(t),e.downloads.push(n),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n];case 2:return o=s.sent(),this.set(o),this.onload(this),[3,4];case 3:throw i=s.sent(),r=e.downloads.indexOf(n),e.downloads.splice(r,1),i;case 4:return[2,this]}}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=void 0,this},e.prototype.fromArray=function(t){for(var e=xo(t)&&t[0].length>0,n=e?t.length:1,o=e?t[0].length:t.length,i=ci(),r=i.createBuffer(n,o,i.sampleRate),s=e||1!==n?t:[t],a=0;a<n;a++)r.copyToChannel(s[a],a);return this._buffer=r,this},e.prototype.toMono=function(t){if(go(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,o=0;o<n;o++)for(var i=this.toArray(o),r=0;r<i.length;r++)e[r]+=i[r];e=e.map((function(t){return t/n})),this.fromArray(e)}return this},e.prototype.toArray=function(t){if(go(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},e.prototype.getChannelData=function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)},e.prototype.slice=function(t,n){void 0===n&&(n=this.duration);var o=Math.floor(t*this.sampleRate),i=Math.floor(n*this.sampleRate);co(o<i,"The start time must be less than the end time");for(var r=i-o,s=ci().createBuffer(this.numberOfChannels,r,this.sampleRate),a=0;a<this.numberOfChannels;a++)s.copyToChannel(this.getChannelData(a).subarray(o,i),a);return new e(s)},e.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())},enumerable:!0,configurable:!0}),e.fromArray=function(t){return(new e).fromArray(t)},e.fromUrl=function(t){return oo(this,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return[4,(new e).load(t)];case 1:return[2,n.sent()]}}))}))},e.load=function(t){return oo(this,void 0,void 0,(function(){var n,o,i,r,s,a,c,u,l,p,h;return io(this,(function(f){switch(f.label){case 0:if(n=t.match(/\[(.+\|?)+\]$/)){o=n[1].split("|"),i=o[0];try{for(r=ro(o),s=r.next();!s.done;s=r.next())if(a=s.value,e.supportsType(a)){i=a;break}}catch(t){p={error:t}}finally{try{s&&!s.done&&(h=r.return)&&h.call(r)}finally{if(p)throw p.error}}t=t.replace(n[0],i)}return c=""===e.baseUrl||e.baseUrl.endsWith("/")?e.baseUrl:e.baseUrl+"/",[4,fetch(c+t)];case 1:if(!(u=f.sent()).ok)throw new Error("could not load url: "+t);return[4,u.arrayBuffer()];case 2:return l=f.sent(),[4,ci().decodeAudioData(l)];case 3:return[2,f.sent()]}}))}))},e.supportsType=function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)},e.loaded=function(){return oo(this,void 0,void 0,(function(){var t,n,o,i,r;return io(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,7]),t=ro(e.downloads),n=t.next(),s.label=1;case 1:return n.done?[3,4]:[4,n.value];case 2:s.sent(),s.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return o=s.sent(),i={error:o},[3,7];case 6:try{n&&!n.done&&(r=t.return)&&r.call(t)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},e.baseUrl="",e.downloads=[],e}(No),ri=function(t){function e(){var e=t.call(this,{clockSource:"offline",context:Eo(arguments[0])?arguments[0]:So(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Eo(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})||this;return e.name="OfflineContext",e._currentTime=0,e.isOffline=!0,e._duration=Eo(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],e}return eo(e,t),e.prototype.now=function(){return this._currentTime},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),e.prototype._renderClock=function(t){return oo(this,void 0,void 0,(function(){var e,n;return io(this,(function(o){switch(o.label){case 0:e=0,o.label=1;case 1:return this._duration-this._currentTime>=0?(this.emit("tick"),this._currentTime+=128/this.sampleRate,e++,n=Math.floor(this.sampleRate/128),t&&e%n==0?[4,new Promise((function(t){return setTimeout(t,1)}))]:[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.render=function(t){return void 0===t&&(t=!0),oo(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return[4,this.workletsAreReady()];case 1:return n.sent(),[4,this._renderClock(t)];case 2:return n.sent(),[4,this._context.startRendering()];case 3:return e=n.sent(),[2,new ii(e)]}}))}))},e.prototype.close=function(){return Promise.resolve()},e}(Ko),si=new ti,ai=si;function ci(){return ai===si&&Co&&ui(new Ko),ai}function ui(t){ai=Po(t)?new Ko(t):Eo(t)?new ri(t):t}if(ko&&!ko.TONE_SILENCE_LOGGING){console.log("%c * Tone.js v14.5.17 * ","background: #000; color: #fff")}function li(t){return Math.pow(10,t/20)}function pi(t){return Math.log(t)/Math.LN10*20}function hi(t){return Math.pow(2,t/12)}var fi=440;function di(t){return Math.round(function(t){return 69+12*Math.log2(t/fi)}(t))}function mi(t){return fi*Math.pow(2,(t-69)/12)}var _i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TimeClass",e}return eo(e,t),e.prototype._getExpressions=function(){var n=this;return Object.assign(t.prototype._getExpressions.call(this),{now:{method:function(t){return n._now()+new n.constructor(n.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var o=new e(n.context,t).valueOf();return n._secondsToUnits(n.context.transport.nextSubdivision(o))},regexp:/^@(.+)/}})},e.prototype.quantize=function(t,e){void 0===e&&(e=1);var n=new this.constructor(this.context,t).valueOf(),o=this.valueOf();return o+(Math.round(o/n)*n-o)*e},e.prototype.toNotation=function(){for(var t=this,n=this.toSeconds(),o=["1m"],i=1;i<9;i++){var r=Math.pow(2,i);o.push(r+"n."),o.push(r+"n"),o.push(r+"t")}o.push("0");var s=o[0],a=new e(this.context,o[0]).toSeconds();return o.forEach((function(o){var i=new e(t.context,o).toSeconds();Math.abs(i-n)<Math.abs(a-n)&&(s=o,a=i)})),s},e.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),o=e%1*4;e=Math.floor(e)%this._getTimeSignature();var i=o.toString();return i.length>3&&(o=parseFloat(parseFloat(i).toFixed(3))),[n,e,o].join(":")},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},e.prototype.toSeconds=function(){return this.valueOf()},e.prototype.toMidi=function(){return di(this.toFrequency())},e.prototype._now=function(){return this.context.now()},e}(function(t){function e(e,n,o){var i=t.call(this)||this;return i.defaultUnits="s",i._val=n,i._units=o,i.context=e,i._expressions=i._getExpressions(),i}return eo(e,t),e.prototype._getExpressions=function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var o=parseInt(e,10),i="."===n?1.5:1;return 1===o?t._beatsToUnits(t._getTimeSignature())*i:t._beatsToUnits(4/o)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,o){var i=0;return e&&"0"!==e&&(i+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(i+=t._beatsToUnits(parseFloat(n))),o&&"0"!==o&&(i+=t._beatsToUnits(parseFloat(o)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},e.prototype.valueOf=function(){if(this._val instanceof e&&this.fromType(this._val),mo(this._val))return this._noArg();if(wo(this._val)&&mo(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(vo(this._val)){var n=0;for(var o in this._val)if(_o(this._val[o])){var i=this._val[o];n+=new this.constructor(this.context,o).valueOf()*i}return n}if(_o(this._units)){var r=this._expressions[this._units],s=this._val.toString().trim().match(r.regexp);return s?r.method.apply(this,s.slice(1)):r.method.call(this,this._val)}return wo(this._val)?parseFloat(this._val):this._val},e.prototype._frequencyToUnits=function(t){return 1/t},e.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},e.prototype._secondsToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},e.prototype._noArg=function(){return this._now()},e.prototype._getBpm=function(){return this.context.transport.bpm.value},e.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},e.prototype._getPPQ=function(){return this.context.transport.PPQ},e.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this},e.prototype.toFrequency=function(){return 1/this.toSeconds()},e.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e}(No)),yi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Frequency",e.defaultUnits="hz",e}return eo(e,t),Object.defineProperty(e,"A4",{get:function(){return fi},set:function(t){!function(t){fi=t}(t)},enumerable:!0,configurable:!0}),e.prototype._getExpressions=function(){return Object.assign({},t.prototype._getExpressions.call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:e.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var o=gi[t.toLowerCase()]+12*(parseInt(n,10)+1);return"midi"===this.defaultUnits?o:e.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var o=1;return t&&"0"!==t&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(o*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(o*=this._beatsToUnits(parseFloat(n)/4)),o}}})},e.prototype.transpose=function(t){return new e(this.context,this.valueOf()*hi(t))},e.prototype.harmonize=function(t){var e=this;return t.map((function(t){return e.transpose(t)}))},e.prototype.toMidi=function(){return di(this.valueOf())},e.prototype.toNote=function(){var t=this.toFrequency(),n=Math.log2(t/e.A4),o=Math.round(12*n)+57,i=Math.floor(o/12);return i<0&&(o+=-12*i),vi[o%12]+i.toString()},e.prototype.toSeconds=function(){return 1/t.prototype.toSeconds.call(this)},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},e.prototype._noArg=function(){return 0},e.prototype._frequencyToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},e.prototype._beatsToUnits=function(e){return 1/t.prototype._beatsToUnits.call(this,e)},e.prototype._secondsToUnits=function(t){return 1/t},e.mtof=function(t){return mi(t)},e.ftom=function(t){return di(t)},e}(_i),gi={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},vi=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TransportTime",e}return eo(e,t),e.prototype._now=function(){return this.context.transport.seconds},e}(_i),xi=function(t){function e(){var n=t.call(this)||this,o=Io(e.getDefaults(),arguments,["context"]);return n.defaultContext?n.context=n.defaultContext:n.context=o.context,n}return eo(e,t),e.getDefaults=function(){return{context:ci()}},e.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},e.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),e.prototype.toSeconds=function(t){return new _i(this.context,t).toSeconds()},e.prototype.toFrequency=function(t){return new yi(this.context,t).toFrequency()},e.prototype.toTicks=function(t){return new bi(this.context,t).toTicks()},e.prototype._getPartialProperties=function(t){var e=this.get();return Object.keys(e).forEach((function(n){mo(t[n])&&delete e[n]})),e},e.prototype.get=function(){var t=this,n=this.constructor.getDefaults();return Object.keys(n).forEach((function(o){if(Reflect.has(t,o)){var i=t[o];_o(i)&&_o(i.value)&&_o(i.setValueAtTime)?n[o]=i.value:i instanceof e?n[o]=i._getPartialProperties(n[o]):xo(i)||go(i)||wo(i)||bo(i)?n[o]=i:delete n[o]}})),n},e.prototype.set=function(t){var n=this;return Object.keys(t).forEach((function(o){Reflect.has(n,o)&&_o(n[o])&&(n[o]&&_o(n[o].value)&&_o(n[o].setValueAtTime)?n[o].value!==t[o]&&(n[o].value=t[o]):n[o]instanceof e?n[o].set(t[o]):n[o]=t[o])})),this},e}(No),wi=function(t){function e(e){void 0===e&&(e="stopped");var n=t.call(this)||this;return n.name="StateTimeline",n._initial=e,n.setStateAtTime(n._initial,0),n}return eo(e,t),e.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},e.prototype.setStateAtTime=function(t,e,n){return uo(e,0),this.add(Object.assign({},n,{state:t,time:e})),this},e.prototype.getLastState=function(t,e){for(var n=this._search(e);n>=0;n--){var o=this._timeline[n];if(o.state===t)return o}},e.prototype.getNextState=function(t,e){var n=this._search(e);if(-1!==n)for(var o=n;o<this._timeline.length;o++){var i=this._timeline[o];if(i.state===t)return i}},e}(Qo),Ti=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["param","units","convert"]))||this;n.name="Param",n.overridden=!1,n._minOutput=1e-7;var o=Io(e.getDefaults(),arguments,["param","units","convert"]);for(co(_o(o.param)&&(Do(o.param)||o.param instanceof e),"param must be an AudioParam");!Do(o.param);)o.param=o.param._param;return n._swappable=!!_o(o.swappable)&&o.swappable,n._swappable?(n.input=n.context.createGain(),n._param=o.param,n.input.connect(n._param)):n._param=n.input=o.param,n._events=new Qo(1e3),n._initialValue=n._param.defaultValue,n.units=o.units,n.convert=o.convert,n._minValue=o.minValue,n._maxValue=o.maxValue,_o(o.value)&&o.value!==n._toType(n._initialValue)&&n.setValueAtTime(o.value,0),n}return eo(e,t),e.getDefaults=function(){return Object.assign(xi.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return _o(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return _o(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),e.prototype._is=function(t,e){return this.units===e},e.prototype._assertRange=function(t){return _o(this.maxValue)&&_o(this.minValue)&&uo(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t},e.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?li(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t},e.prototype._toType=function(t){return this.convert&&"decibels"===this.units?pi(t):t},e.prototype.setValueAtTime=function(t,e){var n=this.toSeconds(e),o=this._fromType(t);return co(isFinite(o)&&isFinite(n),"Invalid argument(s) to setValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._assertRange(o),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,n),this},e.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),o=this._events.get(e),i=this._initialValue;if(null===o)i=this._initialValue;else if("setTargetAtTime"!==o.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=o.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var r=o.value;"setTargetAtTime"===o.type&&(r=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value),i="linearRampToValueAtTime"===n.type?this._linearInterpolate(o.time,r,n.time,n.value,e):this._exponentialInterpolate(o.time,r,n.time,n.value,e)}else i=o.value;else{var s,a;a=null===(s=this._events.getBefore(o.time))?this._initialValue:s.value,"setTargetAtTime"===o.type&&(i=this._exponentialApproach(o.time,a,o.value,o.constant,e))}return this._toType(i)},e.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},e.prototype.linearRampToValueAtTime=function(t,e){var n=this._fromType(t),o=this.toSeconds(e);return co(isFinite(n)&&isFinite(o),"Invalid argument(s) to linearRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._assertRange(n),this._events.add({time:o,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,o),this._param.linearRampToValueAtTime(n,o),this},e.prototype.exponentialRampToValueAtTime=function(t,e){var n=this._fromType(t);n=Math.max(this._minOutput,n),this._assertRange(n);var o=this.toSeconds(e);return co(isFinite(n)&&isFinite(o),"Invalid argument(s) to exponentialRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,o),this._param.exponentialRampToValueAtTime(n,o),this},e.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var o=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,o),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this},e.prototype.setTargetAtTime=function(t,e,n){var o=this._fromType(t);co(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var i=this.toSeconds(e);return this._assertRange(o),co(isFinite(o)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(o,i,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,o){void 0===o&&(o=1),n=this.toSeconds(n),e=this.toSeconds(e);var i=this._fromType(t[0])*o;this.setValueAtTime(this._toType(i),e);for(var r=n/(t.length-1),s=1;s<t.length;s++){var a=this._fromType(t[s])*o;this.linearRampToValueAtTime(this._toType(a),e+s*r)}return this},e.prototype.cancelScheduledValues=function(t){var e=this.toSeconds(t);return co(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this},e.prototype.cancelAndHoldAtTime=function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));co(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);var o=this._events.get(e),i=this._events.getAfter(e);return o&&Uo(o.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this},e.prototype.rampTo=function(t,e,n){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},e.prototype.apply=function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var o=this._events.getAfter(n.time),i=o?o.time:e+2,r=(i-e)/10,s=e;s<i;s+=r)t.linearRampToValueAtTime(this.getValueAtTime(s),s);return this._events.forEachAfter(this.context.currentTime,(function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this},e.prototype.setParam=function(t){co(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),this},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this._toType(this._param.defaultValue)},enumerable:!0,configurable:!0}),e.prototype._exponentialApproach=function(t,e,n,o,i){return n+(e-n)*Math.exp(-(i-t)/o)},e.prototype._linearInterpolate=function(t,e,n,o,i){return e+(i-t)/(n-t)*(o-e)},e.prototype._exponentialInterpolate=function(t,e,n,o,i){return e*Math.pow(o/e,(i-t)/(n-t))},e}(xi),Oi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="ToneAudioNode",e._internalChannels=[],e}return eo(e,t),Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return _o(this.input)?Do(this.input)||this.input instanceof Ti?1:this.input.numberOfInputs:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return _o(this.output)?this.output.numberOfOutputs:0},enumerable:!0,configurable:!0}),e.prototype._isAudioNode=function(t){return _o(t)&&(t instanceof e||Mo(t))},e.prototype._getInternalNodes=function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t},e.prototype._setChannelProperties=function(t){this._getInternalNodes().forEach((function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))},e.prototype._getChannelProperties=function(){var t=this._getInternalNodes();co(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}},Object.defineProperty(e.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),ki(this,t,e,n),this},e.prototype.toDestination=function(){return this.connect(this.context.destination),this},e.prototype.toMaster=function(){return fo("toMaster() has been renamed toDestination()"),this.toDestination()},e.prototype.disconnect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Ci(this,t,e,n),this},e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Si.apply(void 0,ao([this],t)),this},e.prototype.fan=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach((function(e){return t.connect(e)})),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),_o(this.input)&&(this.input instanceof e?this.input.dispose():Mo(this.input)&&this.input.disconnect()),_o(this.output)&&(this.output instanceof e?this.output.dispose():Mo(this.output)&&this.output.disconnect()),this._internalChannels=[],this},e}(xi);function Si(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();t.reduce((function(t,e){return t instanceof Oi?t.connect(e):Mo(t)&&ki(t,e),e}),n)}function ki(t,e,n,o){for(void 0===n&&(n=0),void 0===o&&(o=0),co(_o(t),"Cannot connect from undefined node"),co(_o(e),"Cannot connect to undefined node"),(e instanceof Oi||Mo(e))&&co(e.numberOfInputs>0,"Cannot connect to node with no inputs"),co(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Oi||e instanceof Ti;)_o(e.input)&&(e=e.input);for(;t instanceof Oi;)_o(t.output)&&(t=t.output);Do(e)?t.connect(e,n):t.connect(e,n,o)}function Ci(t,e,n,o){if(void 0===n&&(n=0),void 0===o&&(o=0),_o(e))for(;e instanceof Oi;)e=e.input;for(;!Mo(t);)_o(t.output)&&(t=t.output);Do(e)?t.disconnect(e,n):Mo(e)?t.disconnect(e,n,o):t.disconnect()}var Ai=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["gain","units"]))||this;n.name="Gain",n._gainNode=n.context.createGain(),n.input=n._gainNode,n.output=n._gainNode;var o=Io(e.getDefaults(),arguments,["gain","units"]);return n.gain=new Ti({context:n.context,convert:o.convert,param:n._gainNode.gain,units:o.units,value:o.gain,minValue:o.minValue,maxValue:o.maxValue}),ei(n,"gain"),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{convert:!0,gain:1,units:"gain"})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},e}(Oi),Di=function(t){function e(e){var n=t.call(this,e)||this;return n.onended=oi,n._startTime=-1,n._stopTime=-1,n._timeout=-1,n.output=new Ai({context:n.context,gain:0}),n._gainNode=n.output,n.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},n._fadeIn=e.fadeIn,n._fadeOut=e.fadeOut,n._curve=e.curve,n.onended=e.onended,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:oi})},e.prototype._startGain=function(t,e){void 0===e&&(e=1),co(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this},e.prototype.stop=function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this},e.prototype._stopGain=function(t){var e=this;co(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()}),this._stopTime-this.context.now()),this},e.prototype._onended=function(){var t=this;this.onended!==oi&&(this.onended(this),this.onended=oi,this.context.isOffline||setTimeout((function(){return t.dispose()}),1e3))},Object.defineProperty(e.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.cancelStop=function(){return this.log("cancelStop"),co(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this},e}(Oi),Mi=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["offset"]))||this;n.name="ToneConstantSource",n._source=n.context.createConstantSource();var o=Io(e.getDefaults(),arguments,["offset"]);return ki(n._source,n._gainNode),n.offset=new Ti({context:n.context,convert:o.convert,param:n._source.offset,units:o.units,value:o.offset,minValue:o.minValue,maxValue:o.maxValue}),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Di.getDefaults(),{convert:!0,offset:1,units:"number"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this},e.prototype._stopSource=function(t){this._source.stop(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this},e}(Di),Ei=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["value","units"]))||this;n.name="Signal",n.override=!0;var o=Io(e.getDefaults(),arguments,["value","units"]);return n.output=n._constantSource=new Mi({context:n.context,convert:o.convert,offset:o.value,units:o.units,minValue:o.minValue,maxValue:o.maxValue}),n._constantSource.start(0),n.input=n._param=n._constantSource.offset,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{convert:!0,units:"number",value:0})},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Pi(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._constantSource.dispose(),this},e.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(t,e),this},e.prototype.getValueAtTime=function(t){return this._param.getValueAtTime(t)},e.prototype.setRampPoint=function(t){return this._param.setRampPoint(t),this},e.prototype.linearRampToValueAtTime=function(t,e){return this._param.linearRampToValueAtTime(t,e),this},e.prototype.exponentialRampToValueAtTime=function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this},e.prototype.exponentialRampTo=function(t,e,n){return this._param.exponentialRampTo(t,e,n),this},e.prototype.linearRampTo=function(t,e,n){return this._param.linearRampTo(t,e,n),this},e.prototype.targetRampTo=function(t,e,n){return this._param.targetRampTo(t,e,n),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this},e.prototype.setTargetAtTime=function(t,e,n){return this._param.setTargetAtTime(t,e,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,o){return this._param.setValueCurveAtTime(t,e,n,o),this},e.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(t),this},e.prototype.cancelAndHoldAtTime=function(t){return this._param.cancelAndHoldAtTime(t),this},e.prototype.rampTo=function(t,e,n){return this._param.rampTo(t,e,n),this},Object.defineProperty(e.prototype,"value",{get:function(){return this._param.value},set:function(t){this._param.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convert",{get:function(){return this._param.convert},set:function(t){this._param.convert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden",{get:function(){return this._param.overridden},set:function(t){this._param.overridden=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),e.prototype.apply=function(t){return this._param.apply(t),this},e}(Oi);function Pi(t,e,n,o){(e instanceof Ti||Do(e)||e instanceof Ei&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ei&&(e.overridden=!0)),ki(t,e,n,o)}var Ri=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["value"]))||this;n.name="TickParam",n._events=new Qo(1/0),n._multiplier=1;var o=Io(e.getDefaults(),arguments,["value"]);return n._multiplier=o.multiplier,n._events.cancel(0),n._events.add({ticks:0,time:0,type:"setValueAtTime",value:n._fromType(o.value)}),n.setValueAtTime(o.value,0),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ti.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var o=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(1/n,1)),s=0;s<=r;s++){var a=n*s+e,c=this._exponentialApproach(i.time,i.value,o,n,a);this.linearRampToValueAtTime(this._toType(c),a)}return this},e.prototype.setValueAtTime=function(e,n){var o=this.toSeconds(n);t.prototype.setValueAtTime.call(this,e,n);var i=this._events.get(o),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,o);return i.ticks=Math.max(s,0),this},e.prototype.linearRampToValueAtTime=function(e,n){var o=this.toSeconds(n);t.prototype.linearRampToValueAtTime.call(this,e,n);var i=this._events.get(o),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,o);return i.ticks=Math.max(s,0),this},e.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),o=this._events.get(e),i=Math.round(Math.max(10*(e-o.time),1)),r=(e-o.time)/i,s=0;s<=i;s++){var a=r*s+o.time,c=this._exponentialInterpolate(o.time,o.value,e,n,a);this.linearRampToValueAtTime(this._toType(c),a)}return this},e.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(mo(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var o=this._fromType(this.getValueAtTime(t.time)),i=this._fromType(this.getValueAtTime(e)),r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(o+i)+t.ticks},e.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)},e.prototype.getDurationOfTicks=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(e);return this.getTimeOfTick(o+t)-n},e.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var o=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-o)/(n.time-e.time),r=Math.sqrt(Math.pow(o,2)-2*i*(e.ticks-t)),s=(-o+r)/i;return(s>0?s:(-o-r)/i)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},e.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},e.prototype.timeToTicks=function(t,e){var n=this.toSeconds(e),o=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+o)-i},e.prototype._fromType=function(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):t.prototype._fromType.call(this,e)},e.prototype._toType=function(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:t.prototype._toType.call(this,e)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)},enumerable:!0,configurable:!0}),e}(Ti),ji=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["value"]))||this;n.name="TickSignal";var o=Io(e.getDefaults(),arguments,["value"]);return n.input=n._param=new Ri({context:n.context,convert:o.convert,multiplier:o.multiplier,param:n._constantSource.offset,units:o.units,value:o.value}),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.ticksToTime=function(t,e){return this._param.ticksToTime(t,e)},e.prototype.timeToTicks=function(t,e){return this._param.timeToTicks(t,e)},e.prototype.getTimeOfTick=function(t){return this._param.getTimeOfTick(t)},e.prototype.getDurationOfTicks=function(t,e){return this._param.getDurationOfTicks(t,e)},e.prototype.getTicksAtTime=function(t){return this._param.getTicksAtTime(t)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this},e}(Ei),qi=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency"]))||this;n.name="TickSource",n._state=new wi,n._tickOffset=new Qo;var o=Io(e.getDefaults(),arguments,["frequency"]);return n.frequency=new ji({context:n.context,units:o.units,value:o.frequency}),ei(n,"frequency"),n._state.setStateAtTime("stopped",0),n.setTicksAtTime(0,0),n}return eo(e,t),e.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},xi.getDefaults())},Object.defineProperty(e.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),_o(e)&&this.setTicksAtTime(e,n)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},e.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},e.prototype.getTicksAtTime=function(t){var e=this,n=this.toSeconds(t),o=this._state.getLastState("stopped",n),i={state:"paused",time:n};this._state.add(i);var r=o,s=0;return this._state.forEachBetween(o.time,n+this.sampleTime,(function(t){var n=r.time,o=e._tickOffset.get(t.time);o&&o.time>=r.time&&(s=o.ticks,n=o.time),"started"===r.state&&"started"!==t.state&&(s+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),r=t})),this._state.remove(i),s},Object.defineProperty(e.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t),o={state:"paused",time:t};this._state.add(o);var i=n,r=0;return this._state.forEachBetween(n.time,t+this.sampleTime,(function(t){var n=i.time,o=e._tickOffset.get(t.time);o&&o.time>=i.time&&(r=o.seconds,n=o.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-n),i=t})),this._state.remove(o),r},e.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},e.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},e.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var n=this._tickOffset.get(e),o=this._state.get(e),i=Math.max(n.time,o.time),r=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(r)},e.prototype.forEachTickBetween=function(t,e,n){var o=this,i=this._state.get(t);this._state.forEachBetween(t,e,(function(e){i&&"started"===i.state&&"started"!==e.state&&o.forEachTickBetween(Math.max(i.time,t),e.time-o.sampleTime,n),i=e}));var r=null;if(i&&"started"===i.state)for(var s=Math.max(i.time,t),a=this.frequency.getTicksAtTime(s),c=a-this.frequency.getTicksAtTime(i.time),u=Math.ceil(c)-c,l=this.frequency.getTimeOfTick(a+u);l<e;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(t){r=t;break}l+=this.frequency.getDurationOfTicks(1,l)}if(r)throw r;return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},e}(xi),Ii=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","frequency"]))||this;n.name="Clock",n.callback=oi,n._lastUpdate=0,n._state=new wi("stopped"),n._boundLoop=n._loop.bind(n);var o=Io(e.getDefaults(),arguments,["callback","frequency"]);return n.callback=o.callback,n._tickSource=new qi({context:n.context,frequency:o.frequency,units:o.units}),n._lastUpdate=0,n.frequency=n._tickSource.frequency,ei(n,"frequency"),n._state.setStateAtTime("stopped",0),n.context.on("tick",n._boundLoop),n}return eo(e,t),e.getDefaults=function(){return Object.assign(xi.getDefaults(),{callback:oi,frequency:1,units:"hertz"})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){lo(this.context);var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(e.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},e.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},e.prototype.getTimeOfTick=function(t,e){return void 0===e&&(e=this.now()),this._tickSource.getTimeOfTick(t,e)},e.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},e.prototype.nextTickTime=function(t,e){var n=this.toSeconds(e),o=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(o+t,n)},e.prototype._loop=function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,(function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}})),this._tickSource.forEachTickBetween(e,n,(function(e,n){t.callback(e,n)})))},e.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},e}(xi);$o.mixin(Ii);var Vi=function(t){function e(e){var n=t.call(this)||this;return n.name="TimelineValue",n._timeline=new Qo({memory:10}),n._initialValue=e,n}return eo(e,t),e.prototype.set=function(t,e){return this._timeline.add({value:t,time:e}),this},e.prototype.get=function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue},e}(No),Fi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Ticks",e.defaultUnits="i",e}return eo(e,t),e.prototype._now=function(){return this.context.transport.ticks},e.prototype._beatsToUnits=function(t){return this._getPPQ()*t},e.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},e.prototype._ticksToUnits=function(t){return t},e.prototype.toTicks=function(){return this.valueOf()},e.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},e}(bi),Ni=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="IntervalTimeline",e._root=null,e._length=0,e}return eo(e,t),e.prototype.add=function(t){co(_o(t.time),"Events must have a time property"),co(_o(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new Li(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},e.prototype.remove=function(t){var e,n;if(null!==this._root){var o=[];this._root.search(t.time,o);try{for(var i=ro(o),r=i.next();!r.done;r=i.next()){var s=r.value;if(s.event===t){this._removeNode(s),this._length--;break}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}return this},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,(function(t){return e.remove(t)})),this},e.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},e.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},e.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()},e.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),o=t.right;o&&(t.right=o.left,o.left=t),null!==e?n?e.left=o:e.right=o:this._setRoot(o)},e.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),o=t.left;o&&(t.left=o.right,o.right=t),null!==e?n?e.left=o:e.right=o:this._setRoot(o)},e.prototype._rebalance=function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},e.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],o=1;o<e.length;o++)e[o].low>n.low&&(n=e[o]);return n.event}}return null},e.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse((function(t){return e.push(t)})),e.forEach((function(e){e.event&&t(e.event)}))}return this},e.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this},e.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach((function(t){t.event&&e(t.event)}))}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._root&&this._root.traverse((function(t){return t.dispose()})),this._root=null,this},e}(No),Li=function(){function t(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}return t.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},t.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},t.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},t.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},t.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},t.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},t.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},t.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t}(),zi=function(){function t(e,n){this.id=t._eventId++;var o=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=o.callback,this._once=o.once,this.time=o.time}return t.getDefaults=function(){return{callback:oi,once:!1,time:0}},t.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},t.prototype.dispose=function(){return this.callback=void 0,this},t._eventId=0,t}(),Bi=function(t){function e(n,o){var i=t.call(this,n,o)||this;i._currentId=-1,i._nextId=-1,i._nextTick=i.time,i._boundRestart=i._restart.bind(i);var r=Object.assign(e.getDefaults(),o);return i.duration=new Fi(n.context,r.duration).valueOf(),i._interval=new Fi(n.context,r.interval).valueOf(),i._nextTick=r.time,i.transport.on("start",i._boundRestart),i.transport.on("loopStart",i._boundRestart),i.context=i.transport.context,i._restart(),i}return eo(e,t),e.getDefaults=function(){return Object.assign({},zi.getDefaults(),{duration:1/0,interval:1,once:!1})},e.prototype.invoke=function(e){this._createEvents(e),t.prototype.invoke.call(this,e)},e.prototype._createEvents=function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Fi(this.context,this._nextTick).toSeconds()))},e.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Fi(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Fi(this.context,this._nextTick).toSeconds())},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},e}(zi),Wi=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="Transport",n._loop=new Vi(!1),n._loopStart=0,n._loopEnd=0,n._scheduledEvents={},n._timeline=new Qo,n._repeatedEvents=new Ni,n._syncedSignals=[],n._swingAmount=0;var o=Io(e.getDefaults(),arguments);return n._ppq=o.ppq,n._clock=new Ii({callback:n._processTick.bind(n),context:n.context,frequency:0,units:"bpm"}),n._bindClockEvents(),n.bpm=n._clock.frequency,n._clock.frequency.multiplier=o.ppq,n.bpm.setValueAtTime(o.bpm,0),ei(n,"bpm"),n._timeSignature=o.timeSignature,n._swingTicks=o.ppq/2,n}return eo(e,t),e.getDefaults=function(){return Object.assign(xi.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},e.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),o=Math.sin(n*Math.PI)*this._swingAmount;t+=new Fi(this.context,2*this._swingTicks/3).toSeconds()*o}this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,(function(e){return e.invoke(t)}))},e.prototype.schedule=function(t,e){var n=new zi(this,{callback:t,time:new bi(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.scheduleRepeat=function(t,e,n,o){void 0===o&&(o=1/0);var i=new Bi(this,{callback:t,duration:new _i(this.context,o).toTicks(),interval:new _i(this.context,e).toTicks(),time:new bi(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)},e.prototype.scheduleOnce=function(t,e){var n=new zi(this,{callback:t,once:!0,time:new bi(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},e.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},e.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var n=this.toTicks(t);return this._timeline.forEachFrom(n,(function(t){return e.clear(t.id)})),this._repeatedEvents.forEachFrom(n,(function(t){return e.clear(t.id)})),this},e.prototype._bindClockEvents=function(){var t=this;this._clock.on("start",(function(e,n){n=new Fi(t.context,n).toSeconds(),t.emit("start",e,n)})),this._clock.on("stop",(function(e){t.emit("stop",e)})),this._clock.on("pause",(function(e){t.emit("pause",e)}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n;return _o(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this},e.prototype.stop=function(t){return this._clock.stop(t),this},e.prototype.pause=function(t){return this._clock.pause(t),this},e.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(e.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){xo(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new _i(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new _i(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())},enumerable:!0,configurable:!0}),e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swingSubdivision",{get:function(){return new Fi(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new Fi(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();if("started"===this.state){var n=this._clock.getTicksAtTime(e),o=this._clock.getTimeOfTick(Math.ceil(n));this.emit("stop",o),this._clock.setTicksAtTime(t,o),this.emit("start",o,this._clock.getSecondsAtTime(o))}else this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),e.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},e.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(e.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},e.prototype.syncSignal=function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var o=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/o}else e=0}var i=new Ai(e);return this.bpm.connect(i),i.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:i,signal:t}),t.value=0,this},e.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._clock.dispose(),ni(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},e}(xi);$o.mixin(Wi),Xo((function(t){t.transport=new Wi({context:t})})),Ho((function(t){t.transport.dispose()}));var Ui=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["delayTime","maxDelay"]))||this;n.name="Delay";var o=Io(e.getDefaults(),arguments,["delayTime","maxDelay"]),i=n.toSeconds(o.maxDelay);return n._maxDelay=Math.max(i,n.toSeconds(o.delayTime)),n._delayNode=n.input=n.output=n.context.createDelay(i),n.delayTime=new Ti({context:n.context,param:n._delayNode.delayTime,units:"time",value:o.delayTime,minValue:0,maxValue:n.maxDelay}),ei(n,"delayTime"),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{delayTime:0,maxDelay:1})},Object.defineProperty(e.prototype,"maxDelay",{get:function(){return this._maxDelay},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},e}(Oi),Gi=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["volume"]))||this;n.name="Volume";var o=Io(e.getDefaults(),arguments,["volume"]);return n.input=n.output=new Ai({context:n.context,gain:o.volume,units:"decibels"}),n.volume=n.output.gain,ei(n,"volume"),n._unmutedVolume=o.volume,n.mute=o.mute,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.volume.dispose(),this},e}(Oi),Qi=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="Destination",n.input=new Gi({context:n.context}),n.output=new Ai({context:n.context}),n.volume=n.input.volume;var o=Io(e.getDefaults(),arguments);return Si(n.input,n.output,n.context.rawContext.destination),n.mute=o.mute,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Si.apply(void 0,ao(t)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.volume.dispose(),this},e}(Oi);Xo((function(t){t.destination=new Qi({context:t})})),Ho((function(t){t.destination.dispose()}));var Yi=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffers",n._buffers=new Map,n._loadingCount=0;var o=Io(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return n.baseUrl=o.baseUrl,Object.keys(o.urls).forEach((function(t){n._loadingCount++;var e=o.urls[t];n.add(t,e,n._bufferLoaded.bind(n,o.onload))})),n}return eo(e,t),e.getDefaults=function(){return{baseUrl:"",onerror:oi,onload:oi,urls:{}}},e.prototype.has=function(t){return this._buffers.has(t.toString())},e.prototype.get=function(t){return co(this.has(t),"ToneAudioBuffers has no buffer named: "+t),this._buffers.get(t.toString())},e.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t()},Object.defineProperty(e.prototype,"loaded",{get:function(){return Array.from(this._buffers).every((function(t){var e=so(t,2);return e[0],e[1].loaded}))},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return void 0===n&&(n=oi),wo(e)?this._buffers.set(t.toString(),new ii(this.baseUrl+e,n)):this._buffers.set(t.toString(),new ii(e,n)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.forEach((function(t){return t.dispose()})),this._buffers.clear(),this},e}(No),Xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="MidiClass",e.defaultUnits="midi",e}return eo(e,t),e.prototype._frequencyToUnits=function(e){return di(t.prototype._frequencyToUnits.call(this,e))},e.prototype._ticksToUnits=function(e){return di(t.prototype._ticksToUnits.call(this,e))},e.prototype._beatsToUnits=function(e){return di(t.prototype._beatsToUnits.call(this,e))},e.prototype._secondsToUnits=function(e){return di(t.prototype._secondsToUnits.call(this,e))},e.prototype.toMidi=function(){return this.valueOf()},e.prototype.toFrequency=function(){return mi(this.toMidi())},e.prototype.transpose=function(t){return new e(this.context,this.toMidi()+t)},e}(yi),Zi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Draw",e.expiration=.25,e.anticipation=.008,e._events=new Qo,e._boundDrawLoop=e._drawLoop.bind(e),e._animationFrame=-1,e}return eo(e,t),e.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},e.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},e.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},e}(xi);Xo((function(t){t.draw=new Zi({context:t})})),Ho((function(t){t.draw.dispose()}));var Hi=function(t){function e(e){var n=t.call(this,e)||this;return n.input=void 0,n._state=new wi("stopped"),n._synced=!1,n._scheduled=[],n._syncedStart=oi,n._syncedStop=oi,n._state.memory=100,n._state.increasing=!0,n._volume=n.output=new Gi({context:n.context,mute:e.mute,volume:e.volume}),n.volume=n._volume.volume,ei(n,"volume"),n.onstop=e.onstop,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mute:!1,onstop:oi,volume:0})},Object.defineProperty(e.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype._clampToCurrentTime=function(t){return this._synced?t:Math.max(t,this.context.currentTime)},e.prototype.start=function(t,e,n){var o=this,i=mo(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),"started"===this._state.getValueAtTime(i))co(zo(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);else{if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){var r=this._state.get(i);r&&(r.offset=this.toSeconds(Vo(e,0)),r.duration=n?this.toSeconds(n):void 0);var s=this.context.transport.schedule((function(t){o._start(t,e,n)}),i);this._scheduled.push(s),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start(i,e,n);lo(this.context)}return this},e.prototype.stop=function(t){var e=mo(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||_o(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this},e.prototype.restart=function(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this},e.prototype.sync=function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var o=t._state.get(n);if(o&&"started"===o.state&&o.time!==n){var i=n-t.toSeconds(o.time),r=void 0;o.duration&&(r=t.toSeconds(o.duration)-i),t._start(e,t.toSeconds(o.offset)+i,r)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},e.prototype.unsync=function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((function(e){return t.context.transport.clear(e)})),this._scheduled=[],this._state.cancel(0),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.onstop=oi,this.unsync(),this._volume.dispose(),this._state.dispose(),this},e}(Oi),$i=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["buffer","onload"]))||this;n.name="ToneBufferSource",n._source=n.context.createBufferSource(),n._internalChannels=[n._source],n._sourceStarted=!1,n._sourceStopped=!1;var o=Io(e.getDefaults(),arguments,["buffer","onload"]);return ki(n._source,n._gainNode),n._source.onended=function(){return n._stopSource()},n.playbackRate=new Ti({context:n.context,param:n._source.playbackRate,units:"positive",value:o.playbackRate}),n.loop=o.loop,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n._buffer=new ii(o.buffer,o.onload),n._internalChannels.push(n._source),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Di.getDefaults(),{buffer:new ii,loop:!1,loopEnd:0,loopStart:0,onload:oi,playbackRate:1})},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,n,o){void 0===o&&(o=1),co(this.buffer.loaded,"buffer is either not set or not loaded");var i=this.toSeconds(t);this._startGain(i,o),e=this.loop?Vo(e,this.loopStart):Vo(e,0);var r=Math.max(this.toSeconds(e),0);if(this.loop){var s=this.toSeconds(this.loopEnd)||this.buffer.duration,a=this.toSeconds(this.loopStart),c=s-a;Bo(r,s)&&(r=(r-a)%c+a)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Wo(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,r)),_o(n)){var u=this.toSeconds(n);u=Math.max(u,0),this.stop(i+u)}return this},e.prototype._stopSource=function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},e}(Di),Ji=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["type"]))||this;n.name="Noise",n._source=null;var o=Io(e.getDefaults(),arguments,["type"]);return n._playbackRate=o.playbackRate,n.type=o.type,n._fadeIn=o.fadeIn,n._fadeOut=o.fadeOut,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(co(t in er,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)},enumerable:!0,configurable:!0}),e.prototype._start=function(t){var e=this,n=er[this._type];this._source=new $i({buffer:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return e.onstop(e)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(n.duration-.001))},e.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)},enumerable:!0,configurable:!0}),e.prototype._restart=function(t){this._stop(t),this._start(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},e}(Hi),Ki=220500,tr={brown:null,pink:null,white:null},er={get brown(){if(!tr.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(Ki);t[e]=n;for(var o=0,i=0;i<Ki;i++){var r=2*Math.random()-1;n[i]=(o+.02*r)/1.02,o=n[i],n[i]*=3.5}}tr.brown=(new ii).fromArray(t)}return tr.brown},get pink(){if(!tr.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(Ki);t[e]=n;var o=void 0,i=void 0,r=void 0,s=void 0,a=void 0,c=void 0,u=void 0;o=i=r=s=a=c=u=0;for(var l=0;l<Ki;l++){var p=2*Math.random()-1;o=.99886*o+.0555179*p,i=.99332*i+.0750759*p,r=.969*r+.153852*p,s=.8665*s+.3104856*p,a=.55*a+.5329522*p,c=-.7616*c-.016898*p,n[l]=o+i+r+s+a+c+u+.5362*p,n[l]*=.11,u=.115926*p}}tr.pink=(new ii).fromArray(t)}return tr.pink},get white(){if(!tr.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(Ki);t[e]=n;for(var o=0;o<Ki;o++)n[o]=2*Math.random()-1}tr.white=(new ii).fromArray(t)}return tr.white}},nr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["channels"]))||this;n.name="Split";var o=Io(e.getDefaults(),arguments,["channels"]);return n._splitter=n.input=n.output=n.context.createChannelSplitter(o.channels),n._internalChannels=[n._splitter],n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{channels:2})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this},e}(Oi),or=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["type","size"]))||this;n.name="Analyser",n._analysers=[],n._buffers=[];var o=Io(e.getDefaults(),arguments,["type","size"]);n.input=n.output=n._gain=new Ai({context:n.context}),n._split=new nr({context:n.context,channels:o.channels}),n.input.connect(n._split),uo(o.channels,1);for(var i=0;i<o.channels;i++)n._analysers[i]=n.context.createAnalyser(),n._split.connect(n._analysers[i],i,0);return n.size=o.size,n.type=o.type,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})},e.prototype.getValue=function(){var t=this;return this._analysers.forEach((function(e,n){var o=t._buffers[n];"fft"===t._type?e.getFloatFrequencyData(o):"waveform"===t._type&&e.getFloatTimeDomainData(o)})),1===this.channels?this._buffers[0]:this._buffers},Object.defineProperty(e.prototype,"size",{get:function(){return this._analysers[0].frequencyBinCount},set:function(t){var e=this;this._analysers.forEach((function(n,o){n.fftSize=2*t,e._buffers[o]=new Float32Array(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channels",{get:function(){return this._analysers.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){co("waveform"===t||"fft"===t,"Analyser: invalid type: "+t),this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._analysers[0].smoothingTimeConstant},set:function(t){this._analysers.forEach((function(e){return e.smoothingTimeConstant=t}))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analysers.forEach((function(t){return t.disconnect()})),this._split.dispose(),this._gain.dispose(),this},e}(Oi),ir=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;return n.name="MeterBase",n.input=n.output=n._analyser=new or({context:n.context,size:256,type:"waveform"}),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this},e}(Oi),rr=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["smoothing"]))||this;n.name="Meter",n._rms=0;var o=Io(e.getDefaults(),arguments,["smoothing"]);return n.input=n.output=n._analyser=new or({context:n.context,size:256,type:"waveform",channels:o.channels}),n.smoothing=o.smoothing,n.normalRange=o.normalRange,n}eo(e,t),e.getDefaults=function(){return Object.assign(ir.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})},e.prototype.getLevel=function(){return fo("'getLevel' has been changed to 'getValue'"),this.getValue()},e.prototype.getValue=function(){var t=this,e=this._analyser.getValue(),n=(1===this.channels?[e]:e).map((function(e){var n=e.reduce((function(t,e){return t+e*e}),0),o=Math.sqrt(n/e.length);return t._rms=Math.max(o,t._rms*t.smoothing),t.normalRange?t._rms:pi(t._rms)}));return 1===this.channels?n[0]:n},Object.defineProperty(e.prototype,"channels",{get:function(){return this._analyser.channels},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this}}(ir),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["size"]))||this;n.name="FFT";var o=Io(e.getDefaults(),arguments,["size"]);return n.normalRange=o.normalRange,n._analyser.type="fft",n.size=o.size,n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})},e.prototype.getValue=function(){var t=this;return this._analyser.getValue().map((function(e){return t.normalRange?li(e):e}))},Object.defineProperty(e.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._analyser.smoothing},set:function(t){this._analyser.smoothing=t},enumerable:!0,configurable:!0})}(ir),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;return n.name="DCMeter",n._analyser.type="waveform",n._analyser.size=256,n}eo(e,t),e.prototype.getValue=function(){return this._analyser.getValue()[0]}}(ir),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["size"]))||this;n.name="Waveform";var o=Io(e.getDefaults(),arguments,["size"]);return n._analyser.type="waveform",n.size=o.size,n}eo(e,t),e.getDefaults=function(){return Object.assign(ir.getDefaults(),{size:1024})},e.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(e.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t},enumerable:!0,configurable:!0})}(ir),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OnePoleFilter";var o=Io(e.getDefaults(),arguments,["frequency","type"]);return n._frequency=o.frequency,n._type=o.type,n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context}),n._createFilter(),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{frequency:880,type:"lowpass"})},e.prototype._createFilter=function(){var t=this,e=this._filter,n=this.toFrequency(this._frequency),o=1/(2*Math.PI*n);if("lowpass"===this._type){var i=1/(o*this.context.sampleRate),r=i-1;this._filter=this.context.createIIRFilter([i,0],[1,r])}else r=1/(o*this.context.sampleRate)-1,this._filter=this.context.createIIRFilter([1,-1],[1,r]);this.input.chain(this._filter,this.output),e&&this.context.setTimeout((function(){t.disposed||(t.input.disconnect(e),e.disconnect())}),this.blockTime)},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._createFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._createFilter()},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){void 0===t&&(t=128);for(var e=new Float32Array(t),n=0;n<t;n++){var o=19980*Math.pow(n/t,2)+20;e[n]=o}var i=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,i,r),i},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this},e}(Oi)),sr=function(t){function e(){return t.call(this,Object.assign(Io(e.getDefaults(),arguments,["context"])))||this}return eo(e,t),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Pi(this,t,e,n),this},e}(Oi),ar=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["mapping","length"])))||this;n.name="WaveShaper",n._shaper=n.context.createWaveShaper(),n.input=n._shaper,n.output=n._shaper;var o=Io(e.getDefaults(),arguments,["mapping","length"]);return xo(o.mapping)||o.mapping instanceof Float32Array?n.curve=Float32Array.from(o.mapping):yo(o.mapping)&&n.setMap(o.mapping,o.length),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{length:1024})},e.prototype.setMap=function(t,e){void 0===e&&(e=1024);for(var n=new Float32Array(e),o=0,i=e;o<i;o++){var r=o/(i-1)*2-1;n[o]=t(r,o)}return this.curve=n,this},Object.defineProperty(e.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){co(["none","2x","4x"].some((function(e){return e.includes(t)})),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this},e}(sr),cr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Abs",e._abs=new ar({context:e.context,mapping:function(t){return Math.abs(t)<.001?0:Math.abs(t)}}),e.input=e._abs,e.output=e._abs,e}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this},e}(sr),ur=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["smoothing"]))||this;n.name="Follower";var o=Io(e.getDefaults(),arguments,["smoothing"]);return n._abs=n.input=new cr({context:n.context}),n._lowpass=n.output=new rr({context:n.context,frequency:1/n.toSeconds(o.smoothing),type:"lowpass"}),n._abs.connect(n._lowpass),n._smoothing=o.smoothing,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{smoothing:.05})},Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._smoothing},set:function(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this._lowpass.dispose(),this},e}(Oi),lr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["solo"]))||this;n.name="Solo";var o=Io(e.getDefaults(),arguments,["solo"]);return n.input=n.output=new Ai({context:n.context}),e._allSolos.has(n.context)||e._allSolos.set(n.context,new Set),e._allSolos.get(n.context).add(n),n.solo=o.solo,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{solo:!1})},Object.defineProperty(e.prototype,"solo",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),e._allSolos.get(this.context).forEach((function(t){return t._updateSolo()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return 0===this.input.gain.value},enumerable:!0,configurable:!0}),e.prototype._addSolo=function(){e._soloed.has(this.context)||e._soloed.set(this.context,new Set),e._soloed.get(this.context).add(this)},e.prototype._removeSolo=function(){e._soloed.has(this.context)&&e._soloed.get(this.context).delete(this)},e.prototype._isSoloed=function(){return e._soloed.has(this.context)&&e._soloed.get(this.context).has(this)},e.prototype._noSolos=function(){return!e._soloed.has(this.context)||e._soloed.has(this.context)&&0===e._soloed.get(this.context).size},e.prototype._updateSolo=function(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},e.prototype.dispose=function(){return t.prototype.dispose.call(this),e._allSolos.get(this.context).delete(this),this._removeSolo(),this},e._allSolos=new Map,e._soloed=new Map,e}(Oi),pr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["pan"])))||this;n.name="Panner",n._panner=n.context.createStereoPanner(),n.input=n._panner,n.output=n._panner;var o=Io(e.getDefaults(),arguments,["pan"]);return n.pan=new Ti({context:n.context,param:n._panner.pan,value:o.pan,minValue:-1,maxValue:1}),n._panner.channelCount=1,n._panner.channelCountMode="explicit",ei(n,"pan"),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{pan:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.disconnect(),this.pan.dispose(),this},e}(Oi),hr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["pan","volume"]))||this;n.name="PanVol";var o=Io(e.getDefaults(),arguments,["pan","volume"]);return n._panner=n.input=new pr({context:n.context,pan:o.pan}),n.pan=n._panner.pan,n._volume=n.output=new Gi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,n._panner.connect(n._volume),n.mute=o.mute,ei(n,["pan","volume"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mute:!1,pan:0,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this},e}(Oi),fr=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["volume","pan"]))||this;n.name="Channel";var o=Io(e.getDefaults(),arguments,["volume","pan"]);return n._solo=n.input=new lr({solo:o.solo,context:n.context}),n._panVol=n.output=new hr({context:n.context,pan:o.pan,volume:o.volume,mute:o.mute}),n.pan=n._panVol.pan,n.volume=n._panVol.volume,n._solo.connect(n._panVol),ei(n,["pan","volume"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1})},Object.defineProperty(e.prototype,"solo",{get:function(){return this._solo.solo},set:function(t){this._solo.solo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._solo.muted||this.mute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t},enumerable:!0,configurable:!0}),e.prototype._getBus=function(t){return e.buses.has(t)||e.buses.set(t,new Ai({context:this.context})),e.buses.get(t)},e.prototype.send=function(t,e){void 0===e&&(e=0);var n=this._getBus(t),o=new Ai({context:this.context,units:"decibels",gain:e});return this.connect(o),o.connect(n),o},e.prototype.receive=function(t){this._getBus(t).connect(this)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this},e.buses=new Map}(Oi),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="GainToAudio",e._norm=new ar({context:e.context,mapping:function(t){return 2*Math.abs(t)-1}}),e.input=e._norm,e.output=e._norm,e}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(sr)),dr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["fade"])))||this;n.name="CrossFade",n._panner=n.context.createStereoPanner(),n._split=n.context.createChannelSplitter(2),n._g2a=new fr({context:n.context}),n.a=new Ai({context:n.context,gain:0}),n.b=new Ai({context:n.context,gain:0}),n.output=new Ai({context:n.context}),n._internalChannels=[n.a,n.b];var o=Io(e.getDefaults(),arguments,["fade"]);return n.fade=new Ei({context:n.context,units:"normalRange",value:o.fade}),ei(n,"fade"),n.context.getConstant(1).connect(n._panner),n._panner.connect(n._split),n._panner.channelCount=1,n._panner.channelCountMode="explicit",ki(n._split,n.a.gain,0),ki(n._split,n.b.gain,1),n.fade.chain(n._g2a,n._panner.pan),n.a.connect(n.output),n.b.connect(n.output),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{fade:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this},e}(Oi),mr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["channels"]))||this;n.name="Merge";var o=Io(e.getDefaults(),arguments,["channels"]);return n._merger=n.output=n.input=n.context.createChannelMerger(o.channels),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{channels:2})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merger.disconnect(),this},e}(Oi),_r=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Add",n._sum=new Ai({context:n.context}),n.input=n._sum,n.output=n._sum,n.addend=n._param,Si(n._constantSource,n._sum),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this},e}(Ei),yr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["value"])))||this;n.name="Multiply",n.override=!1;var o=Io(e.getDefaults(),arguments,["value"]);return n._mult=n.input=n.output=new Ai({context:n.context,minValue:o.minValue,maxValue:o.maxValue}),n.factor=n._param=n._mult.gain,n.factor.setValueAtTime(o.value,0),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this},e}(Ei),gr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Negate",e._multiply=new yr({context:e.context,value:-1}),e.input=e._multiply,e.output=e._multiply,e}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this},e}(sr),vr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Subtract",n._sum=new Ai({context:n.context}),n.input=n._sum,n.output=n._sum,n._neg=new gr({context:n.context}),n.subtrahend=n._param,Si(n._constantSource,n._neg,n._sum),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._sum.dispose(),this},e}(Ei),br=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;return n.name="MidSideMerge",n.mid=new Ai({context:n.context}),n.side=new Ai({context:n.context}),n._left=new _r({context:n.context}),n._leftMult=new yr({context:n.context,value:Math.SQRT1_2}),n._right=new vr({context:n.context}),n._rightMult=new yr({context:n.context,value:Math.SQRT1_2}),n._merge=n.output=new mr({context:n.context}),n.mid.fan(n._left),n.side.connect(n._left.addend),n.mid.connect(n._right),n.side.connect(n._right.subtrahend),n._left.connect(n._leftMult),n._right.connect(n._rightMult),n._leftMult.connect(n._merge,0,0),n._rightMult.connect(n._merge,0,1),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this},e}(Oi),xr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;return n.name="MidSideSplit",n._split=n.input=new nr({channels:2,context:n.context}),n._midAdd=new _r({context:n.context}),n.mid=new yr({context:n.context,value:Math.SQRT1_2}),n._sideSubtract=new vr({context:n.context}),n.side=new yr({context:n.context,value:Math.SQRT1_2}),n._split.connect(n._midAdd,0),n._split.connect(n._midAdd.addend,1),n._split.connect(n._sideSubtract,0),n._split.connect(n._sideSubtract.subtrahend,1),n._midAdd.connect(n.mid),n._sideSubtract.connect(n.side),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this},e}(Oi),wr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type","rolloff"]))||this;n.name="Filter",n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context}),n._filters=[];var o=Io(e.getDefaults(),arguments,["frequency","type","rolloff"]);return n._filters=[],n.Q=new Ei({context:n.context,units:"positive",value:o.Q}),n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency}),n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),n.gain=new Ei({context:n.context,units:"decibels",value:o.gain}),n._type=o.type,n.rolloff=o.rolloff,ei(n,["detune","frequency","gain","Q"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){co(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: "+t),this._type=t,this._filters.forEach((function(e){return e.type=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var e=go(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],o=n.indexOf(e);co(-1!==o,"rolloff can only be "+n.join(", ")),o+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((function(t){return t.disconnect()})),this._filters=new Array(o);for(var i=0;i<o;i++){var r=this.context.createBiquadFilter();r.type=this._type,this.frequency.connect(r.frequency),this.detune.connect(r.detune),this.Q.connect(r.Q),this.gain.connect(r.gain),this._filters[i]=r}this._internalChannels=this._filters,Si.apply(void 0,ao([this.input],this._internalChannels,[this.output]))},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){var e=this;void 0===t&&(t=128);for(var n=new Float32Array(t).map((function(){return 1})),o=new Float32Array(t),i=0;i<t;i++){var r=19980*Math.pow(i/t,2)+20;o[i]=r}var s=new Float32Array(t),a=new Float32Array(t);return this._filters.forEach((function(){var t=e.context.createBiquadFilter();t.type=e._type,t.Q.value=e.Q.value,t.frequency.value=e.frequency.value,t.gain.value=e.gain.value,t.getFrequencyResponse(o,s,a),s.forEach((function(t,e){n[e]*=t}))})),n},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filters.forEach((function(t){t.disconnect()})),ni(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this},e}(Oi),Tr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["lowFrequency","highFrequency"]))||this;n.name="MultibandSplit",n.input=new Ai({context:n.context}),n.output=void 0,n.low=new wr({context:n.context,frequency:0,type:"lowpass"}),n._lowMidFilter=new wr({context:n.context,frequency:0,type:"highpass"}),n.mid=new wr({context:n.context,frequency:0,type:"lowpass"}),n.high=new wr({context:n.context,frequency:0,type:"highpass"}),n._internalChannels=[n.low,n.mid,n.high];var o=Io(e.getDefaults(),arguments,["lowFrequency","highFrequency"]);return n.lowFrequency=new Ei({context:n.context,units:"frequency",value:o.lowFrequency}),n.highFrequency=new Ei({context:n.context,units:"frequency",value:o.highFrequency}),n.Q=new Ei({context:n.context,units:"positive",value:o.Q}),n.input.fan(n.low,n.high),n.input.chain(n._lowMidFilter,n.mid),n.lowFrequency.fan(n.low.frequency,n._lowMidFilter.frequency),n.highFrequency.fan(n.mid.frequency,n.high.frequency),n.Q.connect(n.low.Q),n.Q.connect(n._lowMidFilter.Q),n.Q.connect(n.mid.Q),n.Q.connect(n.high.Q),ei(n,["high","mid","low","highFrequency","lowFrequency"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),ni(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this},e}(Oi),Or=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["positionX","positionY","positionZ"]))||this;n.name="Panner3D";var o=Io(e.getDefaults(),arguments,["positionX","positionY","positionZ"]);return n._panner=n.input=n.output=n.context.createPanner(),n.panningModel=o.panningModel,n.maxDistance=o.maxDistance,n.distanceModel=o.distanceModel,n.coneOuterGain=o.coneOuterGain,n.coneOuterAngle=o.coneOuterAngle,n.coneInnerAngle=o.coneInnerAngle,n.refDistance=o.refDistance,n.rolloffFactor=o.rolloffFactor,n.positionX=new Ti({context:n.context,param:n._panner.positionX,value:o.positionX}),n.positionY=new Ti({context:n.context,param:n._panner.positionY,value:o.positionY}),n.positionZ=new Ti({context:n.context,param:n._panner.positionZ,value:o.positionZ}),n.orientationX=new Ti({context:n.context,param:n._panner.orientationX,value:o.orientationX}),n.orientationY=new Ti({context:n.context,param:n._panner.orientationY,value:o.orientationY}),n.orientationZ=new Ti({context:n.context,param:n._panner.orientationZ,value:o.orientationZ}),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})},e.prototype.setPosition=function(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this},e.prototype.setOrientation=function(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this},Object.defineProperty(e.prototype,"panningModel",{get:function(){return this._panner.panningModel},set:function(t){this._panner.panningModel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refDistance",{get:function(){return this._panner.refDistance},set:function(t){this._panner.refDistance=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolloffFactor",{get:function(){return this._panner.rolloffFactor},set:function(t){this._panner.rolloffFactor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceModel",{get:function(){return this._panner.distanceModel},set:function(t){this._panner.distanceModel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coneInnerAngle",{get:function(){return this._panner.coneInnerAngle},set:function(t){this._panner.coneInnerAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coneOuterAngle",{get:function(){return this._panner.coneOuterAngle},set:function(t){this._panner.coneOuterAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coneOuterGain",{get:function(){return this._panner.coneOuterGain},set:function(t){this._panner.coneOuterGain=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDistance",{get:function(){return this._panner.maxDistance},set:function(t){this._panner.maxDistance=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}(Oi),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["threshold","ratio"]))||this;n.name="Compressor",n._compressor=n.context.createDynamicsCompressor(),n.input=n._compressor,n.output=n._compressor;var o=Io(e.getDefaults(),arguments,["threshold","ratio"]);return n.threshold=new Ti({minValue:n._compressor.threshold.minValue,maxValue:n._compressor.threshold.maxValue,context:n.context,convert:!1,param:n._compressor.threshold,units:"decibels",value:o.threshold}),n.attack=new Ti({minValue:n._compressor.attack.minValue,maxValue:n._compressor.attack.maxValue,context:n.context,param:n._compressor.attack,units:"time",value:o.attack}),n.release=new Ti({minValue:n._compressor.release.minValue,maxValue:n._compressor.release.maxValue,context:n.context,param:n._compressor.release,units:"time",value:o.release}),n.knee=new Ti({minValue:n._compressor.knee.minValue,maxValue:n._compressor.knee.maxValue,context:n.context,convert:!1,param:n._compressor.knee,units:"decibels",value:o.knee}),n.ratio=new Ti({minValue:n._compressor.ratio.minValue,maxValue:n._compressor.ratio.maxValue,context:n.context,convert:!1,param:n._compressor.ratio,units:"positive",value:o.ratio}),ei(n,["knee","release","attack","ratio","threshold"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})},Object.defineProperty(e.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this},e}(Oi)),Sr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments)))||this;return n.name="GreaterThanZero",n._thresh=n.output=new ar({context:n.context,length:127,mapping:function(t){return t<=0?0:1}}),n._scale=n.input=new yr({context:n.context,value:1e4}),n._scale.connect(n._thresh),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._thresh.dispose(),this},e}(sr),kr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["value"])))||this;n.name="GreaterThan",n.override=!1;var o=Io(e.getDefaults(),arguments,["value"]);return n._subtract=n.input=new vr({context:n.context,value:o.value}),n._gtz=n.output=new Sr({context:n.context}),n.comparator=n._param=n._subtract.subtrahend,ei(n,"comparator"),n._subtract.connect(n._gtz),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Ei.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this},e}(Ei);function Cr(t,e){void 0===e&&(e=1/0);var n=new WeakMap;return function(o,i){Reflect.defineProperty(o,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(o){uo(o,t,e),n.set(this,o)}})}}function Ar(t,e){void 0===e&&(e=1/0);var n=new WeakMap;return function(o,i){Reflect.defineProperty(o,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(o){uo(this.toSeconds(o),t,e),n.set(this,o)}})}}(function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["threshold","smoothing"])))||this;n.name="Gate";var o=Io(e.getDefaults(),arguments,["threshold","smoothing"]);return n._follower=new ur({context:n.context,smoothing:o.smoothing}),n._gt=new kr({context:n.context,value:li(o.threshold)}),n.input=new Ai({context:n.context}),n._gate=n.output=new Ai({context:n.context}),n.input.connect(n._gate),n.input.chain(n._follower,n._gt,n._gate.gain),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{smoothing:.1,threshold:-40})},Object.defineProperty(e.prototype,"threshold",{get:function(){return pi(this._gt.value)},set:function(t){this._gt.value=li(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}})(Oi),function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["threshold"])))||this;n.name="Limiter";var o=Io(e.getDefaults(),arguments,["threshold"]);return n._compressor=n.input=n.output=new Or({context:n.context,ratio:20,attack:0,release:0,threshold:o.threshold}),n.threshold=n._compressor.threshold,ei(n,"threshold"),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{threshold:-12})},Object.defineProperty(e.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this.threshold.dispose(),this}}(Oi),function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments)))||this;n.name="MidSideCompressor";var o=Io(e.getDefaults(),arguments);return n._midSideSplit=n.input=new xr({context:n.context}),n._midSideMerge=n.output=new br({context:n.context}),n.mid=new Or(Object.assign(o.mid,{context:n.context})),n.side=new Or(Object.assign(o.side,{context:n.context})),n._midSideSplit.mid.chain(n.mid,n._midSideMerge.mid),n._midSideSplit.side.chain(n.side,n._midSideMerge.side),ei(n,["mid","side"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}(Oi),function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments)))||this;n.name="MultibandCompressor";var o=Io(e.getDefaults(),arguments);return n._splitter=n.input=new Tr({context:n.context,lowFrequency:o.lowFrequency,highFrequency:o.highFrequency}),n.lowFrequency=n._splitter.lowFrequency,n.highFrequency=n._splitter.highFrequency,n.output=new Ai({context:n.context}),n.low=new Or(Object.assign(o.low,{context:n.context})),n.mid=new Or(Object.assign(o.mid,{context:n.context})),n.high=new Or(Object.assign(o.high,{context:n.context})),n._splitter.low.chain(n.low,n.output),n._splitter.mid.chain(n.mid,n.output),n._splitter.high.chain(n.high,n.output),ei(n,["high","mid","low","highFrequency","lowFrequency"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}(Oi);var Dr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;n.name="Envelope",n._sig=new Ei({context:n.context,value:0}),n.output=n._sig,n.input=void 0;var o=Io(e.getDefaults(),arguments,["attack","decay","sustain","release"]);return n.attack=o.attack,n.decay=o.decay,n.sustain=o.sustain,n.release=o.release,n.attackCurve=o.attackCurve,n.releaseCurve=o.releaseCurve,n.decayCurve=o.decayCurve,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype._getCurve=function(t,e){if(wo(t))return t;var n=void 0;for(n in Mr)if(Mr[n][e]===t)return n;return t},e.prototype._setCurve=function(t,e,n){if(wo(n)&&Reflect.has(Mr,n)){var o=Mr[n];vo(o)?"_decayCurve"!==t&&(this[t]=o[e]):this[t]=o}else{if(!xo(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}},Object.defineProperty(e.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){co(["linear","exponential"].some((function(e){return e===t})),"Invalid envelope curve: "+t),this._decayCurve=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){void 0===e&&(e=1),this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),o=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);for(var r=this._attackCurve,s=1;s<r.length;s++)if(r[s-1]<=i&&i<=r[s]){(r=this._attackCurve.slice(s))[0]=i;break}this._sig.setValueCurveAtTime(r,t,n,e)}if(o){var a=e*this.sustain,c=t+n;this.log("decay",c),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(a,o+c):this._sig.exponentialApproachValueAtTime(a,c,o)}return this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(co(xo(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this},e.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},e.prototype.triggerAttackRelease=function(t,e,n){return void 0===n&&(n=1),e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},e.prototype.cancel=function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Pi(this,t,e,n),this},e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){var e,n,o,i,r,s,a;return io(this,(function(c){switch(c.label){case 0:return e=t/this.context.sampleRate,n=new ri(1,e,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=o+this.toSeconds(this.release),s=i+(r=.1*i),(a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/s,decay:e*this.toSeconds(this.decay)/s,release:e*this.toSeconds(this.release)/s,context:n})))._sig.toDestination(),a.triggerAttackRelease(e*(o+r)/s,0),[4,n.render()];case 1:return[2,c.sent().getChannelData(0)]}}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this},no([Ar(0)],e.prototype,"attack",void 0),no([Ar(0)],e.prototype,"decay",void 0),no([Cr(0,1)],e.prototype,"sustain",void 0),no([Ar(0)],e.prototype,"release",void 0),e}(Oi),Mr=function(){var t,e,n=128,o=[];for(t=0;t<n;t++)o[t]=Math.sin(t/127*(Math.PI/2));var i=[];for(t=0;t<127;t++){e=t/127;var r=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=r/10+.83*e}i[127]=1;var s=[];for(t=0;t<n;t++)s[t]=Math.ceil(t/127*5)/5;var a=[];for(t=0;t<n;t++)e=t/127,a[t]=.5*(1-Math.cos(Math.PI*e));var c,u=[];for(t=0;t<n;t++){e=t/127;var l=4*Math.pow(e,3)+.2,p=Math.cos(l*Math.PI*2*e);u[t]=Math.abs(p*(1-e))}function h(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:h(u),Out:u},cosine:{In:o,Out:(c=o,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:h(i)},sine:{In:a,Out:h(a)},step:{In:s,Out:h(s)}}}(),Er=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;return n.name="AmplitudeEnvelope",n._gainNode=new Ai({context:n.context,gain:0}),n.output=n._gainNode,n.input=n._gainNode,n._sig.connect(n._gainNode.gain),n.output=n._gainNode,n.input=n._gainNode,n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.dispose(),this},e}(Dr),Pr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["min","max"])))||this;n.name="Scale";var o=Io(e.getDefaults(),arguments,["min","max"]);return n._mult=n.input=new yr({context:n.context,value:o.max-o.min}),n._add=n.output=new _r({context:n.context,value:o.min}),n._min=o.min,n._max=o.max,n.input.connect(n.output),n}return eo(e,t),e.getDefaults=function(){return Object.assign(sr.getDefaults(),{max:1,min:0})},Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t,this._setRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t,this._setRange()},enumerable:!0,configurable:!0}),e.prototype._setRange=function(){this._add.value=this._min,this._mult.value=this._max-this._min},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._mult.dispose(),this},e}(sr),Rr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["value"])))||this;n.name="Pow";var o=Io(e.getDefaults(),arguments,["value"]);return n._exponentScaler=n.input=n.output=new ar({context:n.context,mapping:n._expFunc(o.value),length:8192}),n._exponent=o.value,n}return eo(e,t),e.getDefaults=function(){return Object.assign(sr.getDefaults(),{value:1})},e.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},Object.defineProperty(e.prototype,"value",{get:function(){return this._exponent},set:function(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._exponentScaler.dispose(),this},e}(sr),jr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;n.name="FrequencyEnvelope";var o=Io(e.getDefaults(),arguments,["attack","decay","sustain","release"]);return n._octaves=o.octaves,n._baseFrequency=n.toFrequency(o.baseFrequency),n._exponent=n.input=new Rr({context:n.context,value:o.exponent}),n._scale=n.output=new Pr({context:n.context,min:n._baseFrequency,max:n._baseFrequency*Math.pow(2,n._octaves)}),n._sig.chain(n._exponent,n._scale),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Dr.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})},Object.defineProperty(e.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){var e=this.toFrequency(t);uo(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){uo(t,0),this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exponent",{get:function(){return this._exponent.value},set:function(t){this._exponent.value=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._exponent.dispose(),this._scale.dispose(),this},e}(Dr),qr=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["low","mid","high"]))||this;n.name="EQ3",n.output=new Ai({context:n.context}),n._internalChannels=[];var o=Io(e.getDefaults(),arguments,["low","mid","high"]);return n.input=n._multibandSplit=new Tr({context:n.context,highFrequency:o.highFrequency,lowFrequency:o.lowFrequency}),n._lowGain=new Ai({context:n.context,gain:o.low,units:"decibels"}),n._midGain=new Ai({context:n.context,gain:o.mid,units:"decibels"}),n._highGain=new Ai({context:n.context,gain:o.high,units:"decibels"}),n.low=n._lowGain.gain,n.mid=n._midGain.gain,n.high=n._highGain.gain,n.Q=n._multibandSplit.Q,n.lowFrequency=n._multibandSplit.lowFrequency,n.highFrequency=n._multibandSplit.highFrequency,n._multibandSplit.low.chain(n._lowGain,n.output),n._multibandSplit.mid.chain(n._midGain,n.output),n._multibandSplit.high.chain(n._highGain,n.output),ei(n,["low","mid","high","lowFrequency","highFrequency"]),n._internalChannels=[n._multibandSplit],n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),ni(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}(Oi),function(t){function e(e){var n=t.call(this,e)||this;n.name="ToneAudioWorklet",n.workletOptions={},n.onprocessorerror=oi;var o=URL.createObjectURL(new Blob([n._audioWorklet()],{type:"text/javascript"})),i=n._audioWorkletName();return n.context.addAudioWorkletModule(o,i).then((function(){n.disposed||(n._worklet=n.context.createAudioWorkletNode(i,n.workletOptions),n._worklet.onprocessorerror=n.onprocessorerror.bind(n),n.onReady(n._worklet))})),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._worklet&&this._worklet.disconnect(),this},e}(Oi)),Ir=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["delayTime","resonance"]))||this;n.name="FeedbackCombFilter",n.workletOptions={numberOfInputs:1,numberOfOutputs:1,channelCount:1};var o=Io(e.getDefaults(),arguments,["delayTime","resonance"]);n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context});var i=n.context.createGain();return n.delayTime=new Ti({context:n.context,value:o.delayTime,units:"time",minValue:0,maxValue:1,param:i.gain,swappable:!0}),n.resonance=new Ti({context:n.context,value:o.resonance,units:"normalRange",param:i.gain,swappable:!0}),ei(n,["resonance","delayTime"]),n}return eo(e,t),e.prototype._audioWorkletName=function(){return"feedback-comb-filter"},e.prototype._audioWorklet=function(){return' \n\t\t\tregisterProcessor("'+this._audioWorkletName()+'", class extends AudioWorkletProcessor {\n\t\t\t\tstatic get parameterDescriptors() {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tname: "delayTime",\n\t\t\t\t\t\tdefaultValue: 0.1,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: "feedback",\n\t\t\t\t\t\tdefaultValue: 0.5,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 0.9999,\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t\n\t\t\t\tconstructor(options) {\n\t\t\t\t\tsuper(options);\n\t\t\t\t\tthis.delayBuffer = new Float32Array(sampleRate);\n\t\t\t\t}\n\t\t\t\n\t\t\t\tgetParameter(parameter, index) {\n\t\t\t\t\tif (parameter.length > 1) {\n\t\t\t\t\t\treturn parameter[index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn parameter[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t\tprocess(inputs, outputs, parameters) {\n\t\t\t\t\tconst input = inputs[0];\n\t\t\t\t\tconst output = outputs[0];\n\t\t\t\t\tconst delayLength = this.delayBuffer.length;\n\t\t\t\t\tconst inputChannel = input[0];\n\t\t\t\t\tconst outputChannel = output[0];\n\t\t\t\t\tconst delayTimeParam = parameters.delayTime;\n\t\t\t\t\tconst feedbackParam = parameters.feedback;\n\t\t\t\t\tinputChannel.forEach((value, index) => {\n\t\t\t\t\t\tconst delayTime = this.getParameter(delayTimeParam, index);\n\t\t\t\t\t\tconst feedback = this.getParameter(feedbackParam, index);\n\t\t\t\t\t\tconst delaySamples = Math.floor(delayTime * sampleRate);\n\t\t\t\t\t\tconst currentIndex = (currentFrame + index) % delayLength;\n\t\t\t\t\t\tconst delayedIndex = (currentFrame + index + delaySamples) % delayLength;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// the current value to output\n\t\t\t\t\t\tconst currentValue = this.delayBuffer[currentIndex];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// write the current value to the delayBuffer in the future\n\t\t\t\t\t\tthis.delayBuffer[delayedIndex] = value + currentValue * feedback;\n\n\t\t\t\t\t\t// set all of the output channels to the same value\n\t\t\t\t\t\toutputChannel[index] = delaySamples > 0 ? currentValue : value;\n\t\t\t\t\t});\n\t\t\t\t\t// keep the processing alive\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t'},e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{delayTime:.1,resonance:.5})},e.prototype.onReady=function(t){Si(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var n=t.parameters.get("feedback");this.resonance.setParam(n)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this},e}(qr),Vr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["delayTime","resonance","dampening"]))||this;n.name="LowpassCombFilter";var o=Io(e.getDefaults(),arguments,["delayTime","resonance","dampening"]);return n._combFilter=n.output=new Ir({context:n.context,delayTime:o.delayTime,resonance:o.resonance}),n.delayTime=n._combFilter.delayTime,n.resonance=n._combFilter.resonance,n._lowpass=n.input=new rr({context:n.context,frequency:o.dampening,type:"lowpass"}),n._lowpass.connect(n._combFilter),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lowpass.frequency},set:function(t){this._lowpass.frequency=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._combFilter.dispose(),this._lowpass.dispose(),this},e}(Oi);function Fr(t,e){return oo(this,void 0,void 0,(function(){var n,o;return io(this,(function(i){switch(i.label){case 0:return n=e/t.context.sampleRate,o=new ri(1,n,t.context.sampleRate),new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:o})).toDestination().start(0),[4,o.render()];case 1:return[2,i.sent().getChannelData(0)]}}))}))}(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Convolver",n._convolver=n.context.createConvolver();var o=Io(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new ii(o.url,(function(t){n.buffer=t,o.onload()})),n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context}),n._buffer.loaded&&(n.buffer=n._buffer),n.normalize=o.normalize,n.input.chain(n._convolver,n.output),n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{normalize:!0,onload:oi})},e.prototype.load=function(t){return oo(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=this,[4,this._buffer.load(t)];case 1:return e.buffer=n.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.connect(this._convolver));var e=this._buffer.get();this._convolver.buffer=e||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer.dispose(),this._convolver.disconnect(),this}})(Oi),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["volume"]))||this;n.name="UserMedia";var o=Io(e.getDefaults(),arguments,["volume"]);return n._volume=n.output=new Gi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,ei(n,"volume"),n.mute=o.mute,n}eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{mute:!1,volume:0})},e.prototype.open=function(t){return oo(this,void 0,void 0,(function(){var n,o,i,r;return io(this,(function(s){switch(s.label){case 0:return co(e.supported,"UserMedia is not supported"),"started"===this.state&&this.close(),[4,e.enumerateDevices()];case 1:return n=s.sent(),go(t)?this._device=n[t]:(this._device=n.find((function(e){return e.label===t||e.deviceId===t})),!this._device&&n.length>0&&(this._device=n[0]),co(_o(this._device),"No matching device "+t)),o={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}},this._device&&(o.audio.deviceId=this._device.deviceId),[4,navigator.mediaDevices.getUserMedia(o)];case 2:return i=s.sent(),this._stream||(this._stream=i,ki(r=this.context.createMediaStreamSource(i),this.output),this._mediaStream=r),[2,this]}}))}))},e.prototype.close=function(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((function(t){t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this},e.enumerateDevices=function(){return oo(this,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:return[2,t.sent().filter((function(t){return"audioinput"===t.kind}))]}}))}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._stream&&this._stream.active?"started":"stopped"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._device?this._device.deviceId:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._device?this._device.groupId:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._device?this._device.label:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.close(),this._volume.dispose(),this.volume.dispose(),this},Object.defineProperty(e,"supported",{get:function(){return _o(navigator.mediaDevices)&&_o(navigator.mediaDevices.getUserMedia)},enumerable:!0,configurable:!0})}(Oi);var Nr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="ToneOscillatorNode",n._oscillator=n.context.createOscillator(),n._internalChannels=[n._oscillator];var o=Io(e.getDefaults(),arguments,["frequency","type"]);return ki(n._oscillator,n._gainNode),n.type=o.type,n.frequency=new Ti({context:n.context,param:n._oscillator.frequency,units:"frequency",value:o.frequency}),n.detune=new Ti({context:n.context,param:n._oscillator.detune,units:"cents",value:o.detune}),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Di.getDefaults(),{detune:0,frequency:440,type:"sine"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this},e.prototype._stopSource=function(t){this._oscillator.stop(t)},e.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this},e}(Di),Lr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="Oscillator",n._oscillator=null;var o=Io(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency}),ei(n,"frequency"),n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),ei(n,"detune"),n._partials=o.partials,n._partialCount=o.partialCount,n._type=o.type,o.partialCount&&"custom"!==o.type&&(n._type=n.baseType+o.partialCount.toString()),n.phase=o.phase,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},e.prototype._start=function(t){var e=this,n=this.toSeconds(t),o=new Nr({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)},e.prototype._stop=function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)},e.prototype._restart=function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this},e.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},e.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},e.prototype._getCachedPeriodicWave=function(){var t=this;if("custom"===this._type)return e._periodicWaveCache.find((function(e){return e.phase===t._phase&&(n=e.partials,o=t._partials,n.length===o.length&&n.every((function(t,e){return o[e]===t})));var n,o}));var n=e._periodicWaveCache.find((function(e){return e.type===t._type&&e.phase===t._phase}));return this._partialCount=n?n.partialCount:this._partialCount,n},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t;var n=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&n)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var o=this._getCachedPeriodicWave();if(_o(o)){var i=o.partials,r=o.wave;this._wave=r,this._partials=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var s=so(this._getRealImaginary(t,this._phase),2),a=s[0],c=s[1],u=this.context.createPeriodicWave(a,c);this._wave=u,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),e._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),e._periodicWaveCache.length>100&&e._periodicWaveCache.shift()}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){uo(t,0);var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var o=new Float32Array(t);this._partials.forEach((function(t,e){return o[e]=t})),this._partials=Array.from(o),this.type=this._type}},enumerable:!0,configurable:!0}),e.prototype._getRealImaginary=function(t,e){var n=2048,o=new Float32Array(n),i=new Float32Array(n),r=1;if("custom"===t){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[o,i]}else{var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);s?(r=parseInt(s[2],10)+1,this._partialCount=parseInt(s[2],10),t=s[1],n=r=Math.max(r,2)):this._partialCount=0,this._partials=[]}for(var a=1;a<n;++a){var c=2/(a*Math.PI),u=void 0;switch(t){case"sine":u=a<=r?1:0,this._partials[a-1]=u;break;case"square":u=1&a?2*c:0,this._partials[a-1]=u;break;case"sawtooth":u=c*(1&a?1:-1),this._partials[a-1]=u;break;case"triangle":u=1&a?c*c*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=u;break;case"custom":u=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==u?(o[a]=-u*Math.sin(e*a),i[a]=u*Math.cos(e*a)):(o[a]=0,i[a]=0)}return[o,i]},e.prototype._inverseFFT=function(t,e,n){for(var o=0,i=t.length,r=0;r<i;r++)o+=t[r]*Math.cos(r*n)+e[r]*Math.sin(r*n);return o},e.prototype.getInitialValue=function(){for(var t=so(this._getRealImaginary(this._type,0),2),e=t[0],n=t[1],o=0,i=2*Math.PI,r=0;r<32;r++)o=Math.max(this._inverseFFT(e,n,r/32*i),o);return Go(-this._inverseFFT(e,n,this._phase)/o,-1,1)},Object.defineProperty(e.prototype,"partials",{get:function(){return this._partials.slice(0,this.partialCount)},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},e._periodicWaveCache=[],e}(Hi),zr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioToGain",e._norm=new ar({context:e.context,mapping:function(t){return(t+1)/2}}),e.input=e._norm,e.output=e._norm,e}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(sr),Br=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="AMOscillator",n._modulationScale=new zr({context:n.context}),n._modulationNode=new Ai({context:n.context});var o=Io(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new Lr({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase,type:o.type}),n.frequency=n._carrier.frequency,n.detune=n._carrier.detune,n._modulator=new Lr({context:n.context,phase:o.phase,type:o.modulationType}),n.harmonicity=new yr({context:n.context,units:"positive",value:o.harmonicity}),n.frequency.chain(n.harmonicity,n._modulator.frequency),n._modulator.chain(n._modulationScale,n._modulationNode.gain),n._carrier.chain(n._modulationNode,n.output),ei(n,["frequency","detune","harmonicity"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Lr.getDefaults(),{harmonicity:1,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype._restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this},e}(Hi),Wr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="FMOscillator",n._modulationNode=new Ai({context:n.context,gain:0});var o=Io(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new Lr({context:n.context,detune:o.detune,frequency:0,onstop:function(){return n.onstop(n)},phase:o.phase,type:o.type}),n.detune=n._carrier.detune,n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency}),n._modulator=new Lr({context:n.context,phase:o.phase,type:o.modulationType}),n.harmonicity=new yr({context:n.context,units:"positive",value:o.harmonicity}),n.modulationIndex=new yr({context:n.context,units:"positive",value:o.modulationIndex}),n.frequency.connect(n._carrier.frequency),n.frequency.chain(n.harmonicity,n._modulator.frequency),n.frequency.chain(n.modulationIndex,n._modulationNode),n._modulator.connect(n._modulationNode.gain),n._modulationNode.connect(n._carrier.frequency),n._carrier.connect(n.output),n.detune.connect(n._modulator.detune),ei(n,["modulationIndex","frequency","detune","harmonicity"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Lr.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype._restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this},e}(Hi),Ur=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","width"]))||this;n.name="PulseOscillator",n._widthGate=new Ai({context:n.context,gain:0}),n._thresh=new ar({context:n.context,mapping:function(t){return t<=0?-1:1}});var o=Io(e.getDefaults(),arguments,["frequency","width"]);return n.width=new Ei({context:n.context,units:"audioRange",value:o.width}),n._sawtooth=new Lr({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase,type:"sawtooth"}),n.frequency=n._sawtooth.frequency,n.detune=n._sawtooth.detune,n._sawtooth.chain(n._thresh,n.output),n.width.chain(n._widthGate,n._thresh),ei(n,["width","frequency","detune"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})},e.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)},e.prototype._restart=function(t){this._sawtooth.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)},Object.defineProperty(e.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sawtooth.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this},e}(Hi),Gr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type","spread"]))||this;n.name="FatOscillator",n._oscillators=[];var o=Io(e.getDefaults(),arguments,["frequency","type","spread"]);return n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency}),n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),n._spread=o.spread,n._type=o.type,n._phase=o.phase,n._partials=o.partials,n._partialCount=o.partialCount,n.count=o.count,ei(n,["frequency","detune"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Lr.getDefaults(),{count:3,spread:20,type:"sawtooth"})},e.prototype._start=function(t){t=this.toSeconds(t),this._forEach((function(e){return e.start(t)}))},e.prototype._stop=function(t){t=this.toSeconds(t),this._forEach((function(e){return e.stop(t)}))},e.prototype._restart=function(t){this._forEach((function(e){return e.restart(t)}))},e.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach((function(e){return e.type=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach((function(t,o){return t.detune.value=e+n*o}))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){var e=this;if(uo(t,1),this._oscillators.length!==t){this._forEach((function(t){return t.dispose()})),this._oscillators=[];for(var n=0;n<t;n++){var o=new Lr({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:0===n?function(){return e.onstop(e)}:oi});"custom"===this.type&&(o.partials=this._partials),this.frequency.connect(o.frequency),this.detune.connect(o.detune),o.detune.overridden=!1,o.connect(this.output),this._oscillators[n]=o}this.spread=this._spread,"started"===this.state&&this._forEach((function(t){return t.start()}))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach((function(e){return e.phase=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach((function(e){return e.baseType=t})),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((function(e){return e.partials=t})))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach((function(e){return e.partialCount=t})),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach((function(t){return t.dispose()})),this},e}(Hi),Qr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","modulationFrequency"]))||this;n.name="PWMOscillator",n.sourceType="pwm",n._scale=new yr({context:n.context,value:2});var o=Io(e.getDefaults(),arguments,["frequency","modulationFrequency"]);return n._pulse=new Ur({context:n.context,frequency:o.modulationFrequency}),n._pulse._sawtooth.type="sine",n.modulationFrequency=n._pulse.frequency,n._modulator=new Lr({context:n.context,detune:o.detune,frequency:o.frequency,onstop:function(){return n.onstop(n)},phase:o.phase}),n.frequency=n._modulator.frequency,n.detune=n._modulator.detune,n._modulator.chain(n._scale,n._pulse.width),n._pulse.connect(n.output),ei(n,["modulationFrequency","frequency","detune"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})},e.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},e.prototype._restart=function(t){this._modulator.restart(t),this._pulse.restart(t)},Object.defineProperty(e.prototype,"type",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this},e}(Hi),Yr={am:Br,fat:Gr,fm:Wr,oscillator:Lr,pulse:Ur,pwm:Qr},Xr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OmniOscillator";var o=Io(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency}),n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),ei(n,["frequency","detune"]),n.set(o),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Lr.getDefaults(),Wr.getDefaults(),Br.getDefaults(),Gr.getDefaults(),Ur.getDefaults(),Qr.getDefaults())},e.prototype._start=function(t){this._oscillator.start(t)},e.prototype._stop=function(t){this._oscillator.stop(t)},e.prototype._restart=function(t){return this._oscillator.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){var t=this,e="";return["am","fm","fat"].some((function(e){return t._sourceType===e}))&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)},enumerable:!0,configurable:!0}),e.prototype.set=function(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),t.prototype.set.call(this,e),this},e.prototype._createNewOscillator=function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var n=Yr[t],o=this.now();if(this._oscillator){var i=this._oscillator;i.stop(o),this.context.setTimeout((function(){return i.dispose()}),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(o)}},Object.defineProperty(e.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceType",{get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")},enumerable:!0,configurable:!0}),e.prototype._getOscType=function(t,e){return t instanceof Yr[e]},Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&go(t)&&(this._oscillator.count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&go(t)&&(this._oscillator.spread=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&wo(t)&&(this._oscillator.modulationType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationFrequency",{get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0},enumerable:!0,configurable:!0}),e.prototype.asArray=function(t){return void 0===t&&(t=1024),oo(this,void 0,void 0,(function(){return io(this,(function(e){return[2,Fr(this,t)]}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this},e}(Hi),Zr=function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments)))||this;return n.name="Zero",n._gain=new Ai({context:n.context}),n.output=n._gain,n.input=void 0,ki(n.context.getConstant(0),n._gain),n}return eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),Ci(this.context.getConstant(0),this._gain),this},e}(sr),Hr=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","min","max"]))||this;n.name="LFO",n._stoppedValue=0,n._units="number",n.convert=!0,n._fromType=Ti.prototype._fromType,n._toType=Ti.prototype._toType,n._is=Ti.prototype._is,n._clampValue=Ti.prototype._clampValue;var o=Io(e.getDefaults(),arguments,["frequency","min","max"]);return n._oscillator=new Lr({context:n.context,frequency:o.frequency,type:o.type}),n.frequency=n._oscillator.frequency,n._amplitudeGain=new Ai({context:n.context,gain:o.amplitude,units:"normalRange"}),n.amplitude=n._amplitudeGain.gain,n._stoppedSignal=new Ei({context:n.context,units:"audioRange",value:0}),n._zeros=new Zr({context:n.context}),n._a2g=new zr({context:n.context}),n._scaler=n.output=new Pr({context:n.context,max:o.max,min:o.min}),n.min=o.min,n.max=o.max,n.units=o.units,n._oscillator.chain(n._a2g,n._amplitudeGain,n._scaler),n._zeros.connect(n._a2g),n._stoppedSignal.connect(n._a2g),ei(n,["amplitude","frequency"]),n.phase=o.phase,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,phase:0,type:"sine",units:"number"})},e.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},e.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},e.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},e.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(e.prototype,"min",{get:function(){return this._toType(this._scaler.min)},set:function(t){t=this._fromType(t),this._scaler.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._toType(this._scaler.max)},set:function(t){t=this._fromType(t),this._scaler.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._oscillator.state},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return(t instanceof Ti||t instanceof Ei)&&(this.convert=t.convert,this.units=t.units),Pi(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this},e}(Oi),$r=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Player",n._activeSources=new Set;var o=Io(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new ii({onload:n._onload.bind(n,o.onload),reverse:o.reverse,url:o.url}),n.autostart=o.autostart,n._loop=o.loop,n._loopStart=o.loopStart,n._loopEnd=o.loopEnd,n._playbackRate=o.playbackRate,n.fadeIn=o.fadeIn,n.fadeOut=o.fadeOut,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:oi,playbackRate:1,reverse:!1})},e.prototype.load=function(t){return oo(this,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return[4,this._buffer.load(t)];case 1:return e.sent(),this._onload(),[2,this]}}))}))},e.prototype._onload=function(t){void 0===t&&(t=oi),t(),this.autostart&&this.start()},e.prototype._onSourceEnd=function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||this._state.setStateAtTime("stopped",this.now())},e.prototype.start=function(e,n,o){return t.prototype.start.call(this,e,n,o),this},e.prototype._start=function(t,e,n){e=this._loop?Vo(e,this._loopStart):Vo(e,0);var o=this.toSeconds(e);this._synced&&(o*=this._playbackRate);var i=n;n=Vo(n,Math.max(this._buffer.duration-o,0));var r=this.toSeconds(n);r/=this._playbackRate,t=this.toSeconds(t);var s=new $i({buffer:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+r),this._state.setStateAtTime("stopped",t+r,{implicitEnd:!0})),this._activeSources.add(s),this._loop&&mo(i)?s.start(t,o):s.start(t,o,r-this.toSeconds(this.fadeOut))},e.prototype._stop=function(t){var e=this.toSeconds(t);this._activeSources.forEach((function(t){return t.stop(e)}))},e.prototype.restart=function(e,n,o){return t.prototype.restart.call(this,e,n,o),this},e.prototype._restart=function(t,e,n){this._stop(t),this._start(t,e,n)},e.prototype.seek=function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var o=this.toSeconds(t);this._stop(n),this._start(n,o)}return this},e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this.buffer.loaded&&uo(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopStart=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this.buffer.loaded&&uo(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((function(e){e.loopEnd=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((function(e){e.loop=t})),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((function(t){return t.cancelStop()}))),this._activeSources.forEach((function(n){n.playbackRate.setValueAtTime(t,e)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._activeSources.forEach((function(t){return t.dispose()})),this._activeSources.clear(),this._buffer.dispose(),this},no([Ar(0)],e.prototype,"fadeIn",void 0),no([Ar(0)],e.prototype,"fadeOut",void 0),e}(Hi),Jr=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["urls","onload"],"urls"))||this;n.name="Players",n.input=void 0,n._players=new Map;var o=Io(e.getDefaults(),arguments,["urls","onload"],"urls");return n._volume=n.output=new Gi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,ei(n,"volume"),n._buffers=new Yi(o.urls,o.onload,o.baseUrl),n.mute=o.mute,n._fadeIn=o.fadeIn,n._fadeOut=o.fadeOut,n}eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:oi,urls:{},volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._players.forEach((function(e){e.fadeIn=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._players.forEach((function(e){e.fadeOut=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Array.from(this._players).some((function(t){var e=so(t,2);return e[0],"started"===e[1].state}))?"started":"stopped"},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._buffers.has(t)},e.prototype.player=function(t){if(co(this.has(t),"No Player with the name "+t+" exists on this object"),!this._players.has(t)){var e=new $r({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return co(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this},e.prototype.stopAll=function(t){return this._players.forEach((function(e){return e.stop(t)})),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach((function(t){return t.dispose()})),this._buffers.dispose(),this}}(Oi),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["url","onload"]))||this;n.name="GrainPlayer",n._loopStart=0,n._loopEnd=0,n._activeSources=[];var o=Io(e.getDefaults(),arguments,["url","onload"]);return n.buffer=new ii({onload:o.onload,reverse:o.reverse,url:o.url}),n._clock=new Ii({context:n.context,callback:n._tick.bind(n),frequency:1/o.grainSize}),n._playbackRate=o.playbackRate,n._grainSize=o.grainSize,n._overlap=o.overlap,n.detune=o.detune,n.overlap=o.overlap,n.loop=o.loop,n.playbackRate=o.playbackRate,n.grainSize=o.grainSize,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n.reverse=o.reverse,n._clock.on("stop",n._onstop.bind(n)),n}eo(e,t),e.getDefaults=function(){return Object.assign(Hi.getDefaults(),{onload:oi,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})},e.prototype._start=function(t,e,n){e=Vo(e,0),e=this.toSeconds(e),t=this.toSeconds(t);var o=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/o),n&&this.stop(t+this.toSeconds(n))},e.prototype.restart=function(e,n,o){return t.prototype.restart.call(this,e,n,o),this},e.prototype._restart=function(t,e,n){this._stop(t),this._start(t,e,n)},e.prototype._stop=function(t){this._clock.stop(t)},e.prototype._onstop=function(t){this._activeSources.forEach((function(e){e.fadeOut=0,e.stop(t)})),this.onstop(this)},e.prototype._tick=function(t){var e=this,n=this._clock.getTicksAtTime(t),o=n*(1/this._clock.frequency.getValueAtTime(t));if(this.log("offset",o),!this.loop&&o>this.buffer.duration)this.stop(t);else{var i=o<this._overlap?0:this._overlap,r=new $i({context:this.context,buffer:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:hi(this.detune/100)}).connect(this.output);r.start(t,this._grainSize*n),r.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(r),r.onended=function(){var t=e._activeSources.indexOf(r);-1!==t&&e._activeSources.splice(t,1)}}},Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){uo(t,.001),this._playbackRate=t,this.grainSize=this._grainSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this.buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((function(t){return t.dispose()})),this}}(Hi),function(t){function e(){var n=t.call(this,Object.assign(Io(e.getDefaults(),arguments,["min","max","exponent"])))||this;n.name="ScaleExp";var o=Io(e.getDefaults(),arguments,["min","max","exponent"]);return n.input=n._exp=new Rr({context:n.context,value:o.exponent}),n._exp.connect(n._mult),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Pr.getDefaults(),{exponent:1})},Object.defineProperty(e.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._exp.dispose(),this},e}(Pr)),Kr=(function(t){function e(){var e=t.call(this,Io(Ei.getDefaults(),arguments,["value","units"]))||this;e.name="SyncedSignal",e.override=!1;var n=Io(Ei.getDefaults(),arguments,["value","units"]);return e._lastVal=n.value,e._synced=e.context.transport.scheduleRepeat(e._onTick.bind(e),"1i"),e._syncedCallback=e._anchorValue.bind(e),e.context.transport.on("start",e._syncedCallback),e.context.transport.on("pause",e._syncedCallback),e.context.transport.on("stop",e._syncedCallback),e._constantSource.disconnect(),e._constantSource.stop(0),e._constantSource=e.output=new Mi({context:e.context,offset:n.value,units:n.units}).start(0),e.setValueAtTime(n.value,0),e}eo(e,t),e.prototype._onTick=function(e){var n=t.prototype.getValueAtTime.call(this,this.context.transport.seconds);this._lastVal!==n&&(this._lastVal=n,this._constantSource.offset.setValueAtTime(n,e))},e.prototype._anchorValue=function(e){var n=t.prototype.getValueAtTime.call(this,this.context.transport.seconds);this._lastVal=n,this._constantSource.offset.cancelAndHoldAtTime(e),this._constantSource.offset.setValueAtTime(n,e)},e.prototype.getValueAtTime=function(e){var n=new bi(this.context,e).toSeconds();return t.prototype.getValueAtTime.call(this,n)},e.prototype.setValueAtTime=function(e,n){var o=new bi(this.context,n).toSeconds();return t.prototype.setValueAtTime.call(this,e,o),this},e.prototype.linearRampToValueAtTime=function(e,n){var o=new bi(this.context,n).toSeconds();return t.prototype.linearRampToValueAtTime.call(this,e,o),this},e.prototype.exponentialRampToValueAtTime=function(e,n){var o=new bi(this.context,n).toSeconds();return t.prototype.exponentialRampToValueAtTime.call(this,e,o),this},e.prototype.setTargetAtTime=function(e,n,o){var i=new bi(this.context,n).toSeconds();return t.prototype.setTargetAtTime.call(this,e,i,o),this},e.prototype.cancelScheduledValues=function(e){var n=new bi(this.context,e).toSeconds();return t.prototype.cancelScheduledValues.call(this,n),this},e.prototype.setValueCurveAtTime=function(e,n,o,i){var r=new bi(this.context,n).toSeconds();return o=this.toSeconds(o),t.prototype.setValueCurveAtTime.call(this,e,r,o,i),this},e.prototype.cancelAndHoldAtTime=function(e){var n=new bi(this.context,e).toSeconds();return t.prototype.cancelAndHoldAtTime.call(this,n),this},e.prototype.setRampPoint=function(e){var n=new bi(this.context,e).toSeconds();return t.prototype.setRampPoint.call(this,n),this},e.prototype.exponentialRampTo=function(e,n,o){var i=new bi(this.context,o).toSeconds();return t.prototype.exponentialRampTo.call(this,e,n,i),this},e.prototype.linearRampTo=function(e,n,o){var i=new bi(this.context,o).toSeconds();return t.prototype.linearRampTo.call(this,e,n,i),this},e.prototype.targetRampTo=function(e,n,o){var i=new bi(this.context,o).toSeconds();return t.prototype.targetRampTo.call(this,e,n,i),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}(Ei),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n._scheduledEvents=[],n._synced=!1,n._original_triggerAttack=n.triggerAttack,n._original_triggerRelease=n.triggerRelease;var o=Io(e.getDefaults(),arguments);return n._volume=n.output=new Gi({context:n.context,volume:o.volume}),n.volume=n._volume.volume,ei(n,"volume"),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{volume:0})},e.prototype.sync=function(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this},e.prototype._syncMethod=function(t,e){var n=this,o=this["_original_"+t]=this[t];this[t]=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[e],s=n.context.transport.schedule((function(i){t[e]=i,o.apply(n,t)}),r);n._scheduledEvents.push(s)}},e.prototype.unsync=function(){var t=this;return this._scheduledEvents.forEach((function(e){return t.context.transport.clear(e)})),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var i=this.toSeconds(n),r=this.toSeconds(e);return this.triggerAttack(t,i,o),this.triggerRelease(i+r),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this},e}(Oi)),ts=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this,o=Io(e.getDefaults(),arguments);return n.portamento=o.portamento,n.onsilence=o.onsilence,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Kr.getDefaults(),{detune:0,onsilence:oi,portamento:0})},e.prototype.triggerAttack=function(t,e,n){void 0===n&&(n=1),this.log("triggerAttack",t,e,n);var o=this.toSeconds(e);return this._triggerEnvelopeAttack(o,n),this.setNote(t,o),this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),o=t instanceof yi?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,i,n)}else this.frequency.setValueAtTime(o,n);return this},no([Ar(0)],e.prototype,"portamento",void 0),e}(Kr),es=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="Synth";var o=Io(e.getDefaults(),arguments);return n.oscillator=new Xr(Object.assign({context:n.context,detune:o.detune,onstop:function(){return n.onsilence(n)}},o.oscillator)),n.frequency=n.oscillator.frequency,n.detune=n.oscillator.detune,n.envelope=new Er(Object.assign({context:n.context},o.envelope)),n.oscillator.chain(n.envelope,n.output),ei(n,["oscillator","frequency","detune","envelope"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{envelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Fo(Xr.getDefaults(),ao(Object.keys(Hi.getDefaults()),["frequency","detune"])),{type:"triangle"})})},e.prototype._triggerEnvelopeAttack=function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+o)}},e.prototype._triggerEnvelopeRelease=function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this},e}(ts),ns=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="ModulationSynth";var o=Io(e.getDefaults(),arguments);return n._carrier=new es({context:n.context,oscillator:o.oscillator,envelope:o.envelope,onsilence:function(){return n.onsilence(n)},volume:-10}),n._modulator=new es({context:n.context,oscillator:o.modulation,envelope:o.modulationEnvelope,volume:-10}),n.oscillator=n._carrier.oscillator,n.envelope=n._carrier.envelope,n.modulation=n._modulator.oscillator,n.modulationEnvelope=n._modulator.envelope,n.frequency=new Ei({context:n.context,units:"frequency"}),n.detune=new Ei({context:n.context,value:o.detune,units:"cents"}),n.harmonicity=new yr({context:n.context,value:o.harmonicity,minValue:0}),n._modulationNode=new Ai({context:n.context,gain:0}),ei(n,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{harmonicity:3,oscillator:Object.assign(Fo(Xr.getDefaults(),ao(Object.keys(Hi.getDefaults()),["frequency","detune"])),{type:"sine"}),envelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Fo(Xr.getDefaults(),ao(Object.keys(Hi.getDefaults()),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})},e.prototype._triggerEnvelopeAttack=function(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)},e.prototype._triggerEnvelopeRelease=function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this},e}(ts),os=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;return n.name="AMSynth",n._modulationScale=new zr({context:n.context}),n.frequency.connect(n._carrier.frequency),n.frequency.chain(n.harmonicity,n._modulator.frequency),n.detune.fan(n._carrier.detune,n._modulator.detune),n._modulator.chain(n._modulationScale,n._modulationNode.gain),n._carrier.chain(n._modulationNode,n.output),n}eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._modulationScale.dispose(),this}}(ns),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="MonoSynth";var o=Io(e.getDefaults(),arguments);return n.oscillator=new Xr(Object.assign(o.oscillator,{context:n.context,detune:o.detune,onstop:function(){return n.onsilence(n)}})),n.frequency=n.oscillator.frequency,n.detune=n.oscillator.detune,n.filter=new wr(Object.assign(o.filter,{context:n.context})),n.filterEnvelope=new jr(Object.assign(o.filterEnvelope,{context:n.context})),n.envelope=new Er(Object.assign(o.envelope,{context:n.context})),n.oscillator.chain(n.filter,n.envelope,n.output),n.filterEnvelope.connect(n.filter.frequency),ei(n,["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(ts.getDefaults(),{envelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Fo(wr.getDefaults(),Object.keys(Oi.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Fo(jr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Fo(Xr.getDefaults(),Object.keys(Hi.getDefaults())),{type:"sawtooth"})})},e.prototype._triggerEnvelopeAttack=function(t,e){if(void 0===e&&(e=1),this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+o)}},e.prototype._triggerEnvelopeRelease=function(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this},e}(ts)),is=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="DuoSynth";var o=Io(e.getDefaults(),arguments);return n.voice0=new os(Object.assign(o.voice0,{context:n.context,onsilence:function(){return n.onsilence(n)}})),n.voice1=new os(Object.assign(o.voice1,{context:n.context})),n.harmonicity=new yr({context:n.context,units:"positive",value:o.harmonicity}),n._vibrato=new Hr({frequency:o.vibratoRate,context:n.context,min:-50,max:50}),n._vibrato.start(),n.vibratoRate=n._vibrato.frequency,n._vibratoGain=new Ai({context:n.context,units:"normalRange",gain:o.vibratoAmount}),n.vibratoAmount=n._vibratoGain.gain,n.frequency=new Ei({context:n.context,units:"frequency",value:440}),n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),n.frequency.connect(n.voice0.frequency),n.frequency.chain(n.harmonicity,n.voice1.frequency),n._vibrato.connect(n._vibratoGain),n._vibratoGain.fan(n.voice0.detune,n.voice1.detune),n.detune.fan(n.voice0.detune,n.voice1.detune),n.voice0.connect(n.output),n.voice1.connect(n.output),ei(n,["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),n}eo(e,t),e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)},e.getDefaults=function(){return qo(ts.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:qo(Fo(os.getDefaults(),Object.keys(ts.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:qo(Fo(os.getDefaults(),Object.keys(ts.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})},e.prototype._triggerEnvelopeAttack=function(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)},e.prototype._triggerEnvelopeRelease=function(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}(ts),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="FMSynth";var o=Io(e.getDefaults(),arguments);return n.modulationIndex=new yr({context:n.context,value:o.modulationIndex}),n.frequency.connect(n._carrier.frequency),n.frequency.chain(n.harmonicity,n._modulator.frequency),n.frequency.chain(n.modulationIndex,n._modulationNode),n.detune.fan(n._carrier.detune,n._modulator.detune),n._modulator.connect(n._modulationNode.gain),n._modulationNode.connect(n._carrier.frequency),n._carrier.connect(n.output),n}eo(e,t),e.getDefaults=function(){return Object.assign(ns.getDefaults(),{modulationIndex:10})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.modulationIndex.dispose(),this}}(ns),[1,1.483,1.932,2.546,2.63,3.897]),rs=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="MetalSynth",n._oscillators=[],n._freqMultipliers=[];var o=Io(e.getDefaults(),arguments);n.detune=new Ei({context:n.context,units:"cents",value:o.detune}),n.frequency=new Ei({context:n.context,units:"frequency"}),n._amplitude=new Ai({context:n.context,gain:0}).connect(n.output),n._highpass=new wr({Q:0,context:n.context,type:"highpass"}).connect(n._amplitude);for(var i=0;i<is.length;i++){var r=new Wr({context:n.context,harmonicity:o.harmonicity,modulationIndex:o.modulationIndex,modulationType:"square",onstop:0===i?function(){return n.onsilence(n)}:oi,type:"square"});r.connect(n._highpass),n._oscillators[i]=r;var s=new yr({context:n.context,value:is[i]});n._freqMultipliers[i]=s,n.frequency.chain(s,r.frequency),n.detune.connect(r.detune)}return n._filterFreqScaler=new Pr({context:n.context,max:7e3,min:n.toFrequency(o.resonance)}),n.envelope=new Dr({attack:o.envelope.attack,attackCurve:"linear",context:n.context,decay:o.envelope.decay,release:o.envelope.release,sustain:0}),n.envelope.chain(n._filterFreqScaler,n._highpass.frequency),n.envelope.connect(n._amplitude.gain),n._octaves=o.octaves,n.octaves=o.octaves,n}eo(e,t),e.getDefaults=function(){return qo(ts.getDefaults(),{envelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})},e.prototype._triggerEnvelopeAttack=function(t,e){var n=this;return void 0===e&&(e=1),this.envelope.triggerAttack(t,e),this._oscillators.forEach((function(e){return e.start(t)})),0===this.envelope.sustain&&this._oscillators.forEach((function(e){e.stop(t+n.toSeconds(n.envelope.attack)+n.toSeconds(n.envelope.decay))})),this},e.prototype._triggerEnvelopeRelease=function(t){var e=this;return this.envelope.triggerRelease(t),this._oscillators.forEach((function(n){return n.stop(t+e.toSeconds(e.envelope.release))})),this},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){this._oscillators.forEach((function(e){return e.modulationIndex.value=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){this._oscillators.forEach((function(e){return e.harmonicity.value=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._oscillators.forEach((function(t){return t.dispose()})),this._freqMultipliers.forEach((function(t){return t.dispose()})),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}(ts),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="MembraneSynth",n.portamento=0;var o=Io(e.getDefaults(),arguments);return n.pitchDecay=o.pitchDecay,n.octaves=o.octaves,ei(n,["oscillator","envelope"]),n}eo(e,t),e.getDefaults=function(){return qo(ts.getDefaults(),es.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),o=this.toFrequency(t instanceof yi?t.toFrequency():t),i=o*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(o,n+this.toSeconds(this.pitchDecay)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this}}(es),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="NoiseSynth";var o=Io(e.getDefaults(),arguments);return n.noise=new Ji(Object.assign({context:n.context},o.noise)),n.envelope=new Er(Object.assign({context:n.context},o.envelope)),n.noise.chain(n.envelope,n.output),n}eo(e,t),e.getDefaults=function(){return Object.assign(Kr.getDefaults(),{envelope:Object.assign(Fo(Dr.getDefaults(),Object.keys(Oi.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(Fo(Ji.getDefaults(),Object.keys(Hi.getDefaults())),{type:"white"})})},e.prototype.triggerAttack=function(t,e){return void 0===e&&(e=1),t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this},e.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},e.prototype.triggerAttackRelease=function(t,e,n){return void 0===n&&(n=1),e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.noise.dispose(),this.envelope.dispose(),this}}(Kr),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="PluckSynth";var o=Io(e.getDefaults(),arguments);return n._noise=new Ji({context:n.context,type:"pink"}),n.attackNoise=o.attackNoise,n._lfcf=new Vr({context:n.context,dampening:o.dampening,resonance:o.resonance}),n.resonance=o.resonance,n.release=o.release,n._noise.connect(n._lfcf),n._lfcf.connect(n.output),n}eo(e,t),e.getDefaults=function(){return qo(Kr.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lfcf.dampening},set:function(t){this._lfcf.dampening=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){var n=this.toFrequency(t);e=this.toSeconds(e);var o=1/n;return this._lfcf.delayTime.setValueAtTime(o,e),this._noise.start(e),this._noise.stop(e+o*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this},e.prototype.triggerRelease=function(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this}}(Kr),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["voice","options"]))||this;n.name="PolySynth",n._availableVoices=[],n._activeVoices=[],n._voices=[],n._gcTimeout=-1,n._averageActiveVoices=0;var o=Io(e.getDefaults(),arguments,["voice","options"]);co(!go(o.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var i=o.voice.getDefaults();n.options=Object.assign(i,o.options),n.voice=o.voice,n.maxPolyphony=o.maxPolyphony,n._dummyVoice=n._getNextAvailableVoice();var r=n._voices.indexOf(n._dummyVoice);return n._voices.splice(r,1),n._gcTimeout=n.context.setInterval(n._collectGarbage.bind(n),1),n}eo(e,t),e.getDefaults=function(){return Object.assign(Kr.getDefaults(),{maxPolyphony:32,options:{},voice:es})},Object.defineProperty(e.prototype,"activeVoices",{get:function(){return this._activeVoices.length},enumerable:!0,configurable:!0}),e.prototype._makeVoiceAvailable=function(t){this._availableVoices.push(t);var e=this._activeVoices.findIndex((function(e){return e.voice===t}));this._activeVoices.splice(e,1)},e.prototype._getNextAvailableVoice=function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}fo("Max polyphony exceeded. Note dropped.")},e.prototype._collectGarbage=function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){var t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}},e.prototype._triggerAttack=function(t,e,n){var o=this;t.forEach((function(t){var i=new Xi(o.context,t).toMidi(),r=o._getNextAvailableVoice();r&&(r.triggerAttack(t,e,n),o._activeVoices.push({midi:i,voice:r,released:!1}),o.log("triggerAttack",t,e))}))},e.prototype._triggerRelease=function(t,e){var n=this;t.forEach((function(t){var o=new Xi(n.context,t).toMidi(),i=n._activeVoices.find((function(t){var e=t.midi,n=t.released;return e===o&&!n}));i&&(i.voice.triggerRelease(e),i.released=!0,n.log("triggerRelease",t,e))}))},e.prototype._scheduleEvent=function(t,e,n,o){var i=this;co(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,o):this._triggerRelease(e,n):this.context.setTimeout((function(){i._scheduleEvent(t,e,n,o)}),n-this.now())},e.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]);var o=this.toSeconds(e);return this._scheduleEvent("attack",t,o,n),this},e.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]);var n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var i=this.toSeconds(n);if(this.triggerAttack(t,i,o),xo(e)){co(xo(t),"If the duration is an array, the notes must also be an array"),t=t;for(var r=0;r<t.length;r++){var s=e[Math.min(r,e.length-1)];co((a=this.toSeconds(s))>0,"The duration must be greater than 0"),this.triggerRelease(t[r],i+a)}}else{var a;co((a=this.toSeconds(e))>0,"The duration must be greater than 0"),this.triggerRelease(t,i+a)}return this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.set=function(t){var e=Fo(t,["onsilence","context"]);return this.options=qo(this.options,e),this._voices.forEach((function(t){return t.set(e)})),this._dummyVoice.set(e),this},e.prototype.get=function(){return this._dummyVoice.get()},e.prototype.releaseAll=function(){var t=this.now();return this._activeVoices.forEach((function(e){e.voice.triggerRelease(t)})),this._activeVoices=[],this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dummyVoice.dispose(),this._voices.forEach((function(t){return t.dispose()})),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}(Kr),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))||this;n.name="Sampler",n._activeSources=new Map;var o=Io(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),i={};return Object.keys(o.urls).forEach((function(t){var e=parseInt(t,10);if(co(To(t)||go(e)&&isFinite(e),"url key is neither a note or midi pitch: "+t),To(t)){var r=new yi(n.context,t).toMidi();i[r]=o.urls[t]}else go(e)&&isFinite(e)&&(i[e]=o.urls[e])})),n._buffers=new Yi(i,o.onload,o.baseUrl),n.attack=o.attack,n.release=o.release,n.curve=o.curve,n._buffers.loaded&&Promise.resolve().then(o.onload),n}eo(e,t),e.getDefaults=function(){return Object.assign(Kr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:oi,release:.1,urls:{}})},e.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: "+t)},e.prototype.triggerAttack=function(t,e,n){var o=this;return void 0===n&&(n=1),this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((function(t){var i=new yi(o.context,t).toMidi(),r=o._findClosest(i),s=i-r,a=o._buffers.get(s),c=hi(r),u=new $i({buffer:a,context:o.context,curve:o.curve,fadeIn:o.attack,fadeOut:o.release,playbackRate:c}).connect(o.output);u.start(e,0,a.duration/c,n),xo(o._activeSources.get(i))||o._activeSources.set(i,[]),o._activeSources.get(i).push(u),u.onended=function(){if(o._activeSources&&o._activeSources.has(i)){var t=o._activeSources.get(i),e=t.indexOf(u);-1!==e&&t.splice(e,1)}}})),this},e.prototype.triggerRelease=function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((function(t){var o=new yi(n.context,t).toMidi();if(n._activeSources.has(o)&&n._activeSources.get(o).length){var i=n._activeSources.get(o);e=n.toSeconds(e),i.forEach((function(t){t.stop(e)})),n._activeSources.set(o,[])}})),this},e.prototype.releaseAll=function(t){var e=this.toSeconds(t);return this._activeSources.forEach((function(t){for(;t.length;)t.shift().stop(e)})),this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.triggerAttackRelease=function(t,e,n,o){var i=this;void 0===o&&(o=1);var r=this.toSeconds(n);return this.triggerAttack(t,r,o),xo(e)?(co(xo(t),"notes must be an array when duration is array"),t.forEach((function(t,n){var o=e[Math.min(n,e.length-1)];i.triggerRelease(t,r+i.toSeconds(o))}))):this.triggerRelease(t,r+this.toSeconds(e)),this},e.prototype.add=function(t,e,n){if(co(To(t)||isFinite(t),"note must be a pitch or midi: "+t),To(t)){var o=new yi(this.context,t).toMidi();this._buffers.add(o,e,n)}else this._buffers.add(t,e,n);return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.dispose(),this._activeSources.forEach((function(t){t.forEach((function(t){return t.dispose()}))})),this._activeSources.clear(),this},no([Ar(0)],e.prototype,"attack",void 0),no([Ar(0)],e.prototype,"release",void 0)}(Kr),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","value"]))||this;n.name="ToneEvent",n._state=new wi("stopped"),n._startOffset=0;var o=Io(e.getDefaults(),arguments,["callback","value"]);return n._loop=o.loop,n.callback=o.callback,n.value=o.value,n._loopStart=n.toTicks(o.loopStart),n._loopEnd=n.toTicks(o.loopEnd),n._playbackRate=o.playbackRate,n._probability=o.probability,n._humanize=o.humanize,n.mute=o.mute,n._playbackRate=o.playbackRate,n._state.increasing=!0,n._rescheduleEvents(),n}return eo(e,t),e.getDefaults=function(){return Object.assign(xi.getDefaults(),{callback:oi,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})},e.prototype._rescheduleEvents=function(t){var e=this;void 0===t&&(t=-1),this._state.forEachFrom(t,(function(t){var n;if("started"===t.state){-1!==t.id&&e.context.transport.clear(t.id);var o=t.time+Math.round(e.startOffset/e._playbackRate);if(!0===e._loop||go(e._loop)&&e._loop>1){n=1/0,go(e._loop)&&(n=e._loop*e._getLoopDuration());var i=e._state.getAfter(o);null!==i&&(n=Math.min(n,i.time-o)),n!==1/0&&(e._state.setStateAtTime("stopped",o+n+1,{id:-1}),n=new Fi(e.context,n));var r=new Fi(e.context,e._getLoopDuration());t.id=e.context.transport.scheduleRepeat(e._tick.bind(e),r,new Fi(e.context,o),n)}else t.id=e.context.transport.schedule(e._tick.bind(e),new Fi(e.context,o))}}))},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.context.transport.ticks)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this},e.prototype.stop=function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var n=this._state.getBefore(e),o=e;null!==n&&(o=n.time),this._rescheduleEvents(o)}return this},e.prototype.cancel=function(t){var e=this;t=Vo(t,-1/0);var n=this.toTicks(t);return this._state.forEachFrom(n,(function(t){e.context.transport.clear(t.id)})),this._state.cancel(n),this},e.prototype._tick=function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;bo(this.humanize)||(n=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*n}this.callback(t,this.value)}},e.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new Fi(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new Fi(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.cancel(),this._state.dispose(),this},e}(xi)),ss=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","interval"]))||this;n.name="Loop";var o=Io(e.getDefaults(),arguments,["callback","interval"]);return n._event=new rs({context:n.context,callback:n._tick.bind(n),loop:!0,loopEnd:o.interval,playbackRate:o.playbackRate,probability:o.probability}),n.callback=o.callback,n.iterations=o.iterations,n}return eo(e,t),e.getDefaults=function(){return Object.assign(xi.getDefaults(),{interval:"4n",callback:oi,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})},e.prototype.start=function(t){return this._event.start(t),this},e.prototype.stop=function(t){return this._event.stop(t),this},e.prototype.cancel=function(t){return this._event.cancel(t),this},e.prototype._tick=function(t){this.callback(t)},Object.defineProperty(e.prototype,"state",{get:function(){return this._event.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._event.progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._event.dispose(),this},e}(xi),as=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","events"]))||this;n.name="Part",n._state=new wi("stopped"),n._events=new Set;var o=Io(e.getDefaults(),arguments,["callback","events"]);return n._state.increasing=!0,o.events.forEach((function(t){xo(t)?n.add(t[0],t[1]):n.add(t)})),n}return eo(e,t),e.getDefaults=function(){return Object.assign(rs.getDefaults(),{events:[]})},e.prototype.start=function(t,e){var n=this,o=this.toTicks(t);if("started"!==this._state.getValueAtTime(o)){e=Vo(e,this._loop?this._loopStart:0),e=this._loop?Vo(e,this._loopStart):Vo(e,0);var i=this.toTicks(e);this._state.add({id:-1,offset:i,state:"started",time:o}),this._forEach((function(t){n._startNote(t,o,i)}))}return this},e.prototype._startNote=function(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new Fi(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new Fi(this.context,e))):t.startOffset>=n&&t.start(new Fi(this.context,e))},Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach((function(t){t.startOffset+=e._startOffset}))},enumerable:!0,configurable:!0}),e.prototype.stop=function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((function(e){e.stop(t)})),this},e.prototype.at=function(t,e){for(var n=new bi(this.context,t).toTicks(),o=new Fi(this.context,1).toSeconds(),i=this._events.values(),r=i.next();!r.done;){var s=r.value;if(Math.abs(n-s.startOffset)<o)return _o(e)&&(s.value=e),s;r=i.next()}return _o(e)?(this.add(t,e),this.at(t)):null},e.prototype.add=function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var n,o=this.toTicks(t);return e instanceof rs?(n=e).callback=this._tick.bind(this):n=new rs({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=o,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this},e.prototype._restartEvent=function(t){var e=this;this._state.forEach((function(n){"started"===n.state?e._startNote(t,n.time,n.offset):t.stop(new Fi(e.context,n.time))}))},e.prototype.remove=function(t,e){var n=this;return vo(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((function(o){o.startOffset===t&&(mo(e)||_o(e)&&o.value===e)&&(n._events.delete(o),o.dispose())})),this},e.prototype.clear=function(){return this._forEach((function(t){return t.dispose()})),this._events.clear(),this},e.prototype.cancel=function(t){return this._forEach((function(e){return e.cancel(t)})),this._state.cancel(this.toTicks(t)),this},e.prototype._forEach=function(t){return this._events&&this._events.forEach((function(n){n instanceof e?n._forEach(t):t(n)})),this},e.prototype._setAll=function(t,e){this._forEach((function(n){n[t]=e}))},e.prototype._tick=function(t,e){this.mute||this.callback(t,e)},e.prototype._testLoopBoundries=function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)},Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach((function(n){n.loopStart=e.loopStart,n.loopEnd=e.loopEnd,n.loop=t,e._testLoopBoundries(n)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new Fi(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach((function(n){n.loopEnd=t,e._testLoopBoundries(n)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new Fi(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach((function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._events.size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.clear(),this},e}(rs);function cs(t){var e;return io(this,(function(n){switch(n.label){case 0:e=0,n.label=1;case 1:return e<t.length?(e=ps(e,t),[4,t[e]]):[3,3];case 2:return n.sent(),e++,[3,1];case 3:return[2]}}))}function us(t){var e;return io(this,(function(n){switch(n.label){case 0:e=t.length-1,n.label=1;case 1:return e>=0?(e=ps(e,t),[4,t[e]]):[3,3];case 2:return n.sent(),e--,[3,1];case 3:return[2]}}))}function ls(t,e){return io(this,(function(n){switch(n.label){case 0:return[5,ro(e(t))];case 1:return n.sent(),[3,0];case 2:return[2]}}))}function ps(t,e){return Go(t,0,e.length-1)}function hs(t,e){var n;return io(this,(function(o){switch(o.label){case 0:n=e?0:t.length-1,o.label=1;case 1:return n=ps(n,t),[4,t[n]];case 2:return o.sent(),e?++n>=t.length-1&&(e=!1):--n<=0&&(e=!0),[3,1];case 3:return[2]}}))}function fs(t){var e,n;return io(this,(function(o){switch(o.label){case 0:e=0,n=0,o.label=1;case 1:return e<t.length?(e=ps(e,t),[4,t[e]]):[3,3];case 2:return o.sent(),n++,e+=n%2?2:-1,[3,1];case 3:return[2]}}))}function ds(t){var e,n;return io(this,(function(o){switch(o.label){case 0:e=t.length-1,n=0,o.label=1;case 1:return e>=0?(e=ps(e,t),[4,t[e]]):[3,3];case 2:return o.sent(),n++,e+=n%2?-2:1,[3,1];case 3:return[2]}}))}function ms(t){var e;return io(this,(function(n){switch(n.label){case 0:return e=Math.floor(Math.random()*t.length),[4,t[e]];case 1:return n.sent(),[3,0];case 2:return[2]}}))}function _s(t){var e,n,o,i;return io(this,(function(r){switch(r.label){case 0:for(e=[],n=0;n<t.length;n++)e.push(n);r.label=1;case 1:return e.length>0?(o=e.splice(Math.floor(e.length*Math.random()),1),i=ps(o[0],t),[4,t[i]]):[3,3];case 2:return r.sent(),[3,1];case 3:return[2]}}))}function ys(t,e,n){return void 0===e&&(e="up"),void 0===n&&(n=0),io(this,(function(n){switch(n.label){case 0:switch(co(t.length>0,"The array must have more than one value in it"),e){case"up":return[3,1];case"down":return[3,3];case"upDown":return[3,5];case"downUp":return[3,7];case"alternateUp":return[3,9];case"alternateDown":return[3,11];case"random":return[3,13];case"randomOnce":return[3,15]}return[3,17];case 1:return[5,ro(ls(t,cs))];case 2:n.sent(),n.label=3;case 3:return[5,ro(ls(t,us))];case 4:n.sent(),n.label=5;case 5:return[5,ro(hs(t,!0))];case 6:n.sent(),n.label=7;case 7:return[5,ro(hs(t,!1))];case 8:n.sent(),n.label=9;case 9:return[5,ro(ls(t,fs))];case 10:n.sent(),n.label=11;case 11:return[5,ro(ls(t,ds))];case 12:n.sent(),n.label=13;case 13:return[5,ro(ms(t))];case 14:n.sent(),n.label=15;case 15:return[5,ro(ls(t,_s))];case 16:n.sent(),n.label=17;case 17:return[2]}}))}!function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","values","pattern"]))||this;n.name="Pattern";var o=Io(e.getDefaults(),arguments,["callback","values","pattern"]);return n.callback=o.callback,n._values=o.values,n._pattern=ys(o.values,o.pattern),n._type=o.pattern,n}eo(e,t),e.getDefaults=function(){return Object.assign(ss.getDefaults(),{pattern:"up",values:[],callback:oi})},e.prototype._tick=function(t){var e=this._pattern.next();this._value=e.value,this.callback(t,this._value)},Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){this._values=t,this.pattern=this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{get:function(){return this._type},set:function(t){this._type=t,this._pattern=ys(this._values,this._type)},enumerable:!0,configurable:!0})}(ss);var gs=function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["callback","events","subdivision"]))||this;n.name="Sequence",n._part=new as({callback:n._seqCallback.bind(n),context:n.context}),n._events=[],n._eventsArray=[];var o=Io(e.getDefaults(),arguments,["callback","events","subdivision"]);return n._subdivision=n.toTicks(o.subdivision),n.events=o.events,n.loop=o.loop,n.loopStart=o.loopStart,n.loopEnd=o.loopEnd,n.playbackRate=o.playbackRate,n.probability=o.probability,n.humanize=o.humanize,n.mute=o.mute,n.playbackRate=o.playbackRate,n}return eo(e,t),e.getDefaults=function(){return Object.assign(Fo(rs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})},e.prototype._seqCallback=function(t,e){null!==e&&this.callback(t,e)},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},set:function(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){return this._part.start(t,e?this._indexTime(e):e),this},e.prototype.stop=function(t){return this._part.stop(t),this},Object.defineProperty(e.prototype,"subdivision",{get:function(){return new Fi(this.context,this._subdivision).toSeconds()},enumerable:!0,configurable:!0}),e.prototype._createSequence=function(t){var e=this;return new Proxy(t,{get:function(t,e){return t[e]},set:function(t,n,o){return wo(n)&&isFinite(parseInt(n,10))&&xo(o)?t[n]=e._createSequence(o):t[n]=o,e._eventsUpdated(),!0}})},e.prototype._eventsUpdated=function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd},e.prototype._rescheduleSequence=function(t,e,n){var o=this;t.forEach((function(t,i){var r=i*e+n;if(xo(t))o._rescheduleSequence(t,e/t.length,r);else{var s=new Fi(o.context,r,"i").toSeconds();o._part.add(s,t)}}))},e.prototype._indexTime=function(t){return new Fi(this.context,t*this._subdivision+this.startOffset).toSeconds()},e.prototype.clear=function(){return this._part.clear(),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._part.dispose(),this},Object.defineProperty(e.prototype,"loop",{get:function(){return this._part.loop},set:function(t){this._part.loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._part.startOffset},set:function(t){this._part.startOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._part.playbackRate},set:function(t){this._part.playbackRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._part.probability},set:function(t){this._part.probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._part.humanize},set:function(t){this._part.humanize=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._part.length},enumerable:!0,configurable:!0}),e}(rs),vs=function(t){function e(e){var n=t.call(this,e)||this;return n.name="Effect",n._dryWet=new dr({context:n.context}),n.wet=n._dryWet.fade,n.effectSend=new Ai({context:n.context}),n.effectReturn=new Ai({context:n.context}),n.input=new Ai({context:n.context}),n.output=n._dryWet,n.input.fan(n._dryWet.a,n.effectSend),n.effectReturn.connect(n._dryWet.b),n.wet.setValueAtTime(e.wet,0),n._internalChannels=[n.effectReturn,n.effectSend],ei(n,"wet"),n}return eo(e,t),e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{wet:1})},e.prototype.connectEffect=function(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this},e}(Oi),bs=function(t){function e(e){var n=t.call(this,e)||this;return n.name="LFOEffect",n._lfo=new Hr({context:n.context,frequency:e.frequency,amplitude:e.depth}),n.depth=n._lfo.amplitude,n.frequency=n._lfo.frequency,n.type=e.type,ei(n,["frequency","depth"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{frequency:1,type:"sine",depth:1})},e.prototype.start=function(t){return this._lfo.start(t),this},e.prototype.stop=function(t){return this._lfo.stop(t),this},e.prototype.sync=function(){return this._lfo.sync(),this},e.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this},e}(vs),xs=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","baseFrequency","octaves"]))||this;n.name="AutoFilter";var o=Io(e.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);return n.filter=new wr(Object.assign(o.filter,{context:n.context})),n.connectEffect(n.filter),n._lfo.connect(n.filter.frequency),n.octaves=o.octaves,n.baseFrequency=o.baseFrequency,n}eo(e,t),e.getDefaults=function(){return Object.assign(bs.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})},Object.defineProperty(e.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.filter.dispose(),this}}(bs),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency"]))||this;return n.name="AutoPanner",n._panner=new pr({context:n.context}),n.connectEffect(n._panner),n._lfo.connect(n._panner.pan),n._lfo.min=-1,n._lfo.max=1,n}eo(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.dispose(),this}}(bs),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]))||this;n.name="AutoWah";var o=Io(e.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);return n._follower=new ur({context:n.context,smoothing:o.follower}),n._sweepRange=new Jr({context:n.context,min:0,max:1,exponent:.5}),n._baseFrequency=n.toFrequency(o.baseFrequency),n._octaves=o.octaves,n._inputBoost=new Ai({context:n.context}),n._bandpass=new wr({context:n.context,rolloff:-48,frequency:0,Q:o.Q}),n._peaking=new wr({context:n.context,type:"peaking"}),n._peaking.gain.value=o.gain,n.gain=n._peaking.gain,n.Q=n._bandpass.Q,n.effectSend.chain(n._inputBoost,n._follower,n._sweepRange),n._sweepRange.connect(n._bandpass.frequency),n._sweepRange.connect(n._peaking.frequency),n.effectSend.chain(n._bandpass,n._peaking,n.effectReturn),n._setSweepRange(),n.sensitivity=o.sensitivity,ei(n,["gain","Q"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})},Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"follower",{get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sensitivity",{get:function(){return pi(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/li(t)},enumerable:!0,configurable:!0}),e.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}(vs),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["bits"]))||this;n.name="BitCrusher";var o=Io(e.getDefaults(),arguments,["bits"]);return n._bitCrusherWorklet=new xs({context:n.context,bits:o.bits}),n.connectEffect(n._bitCrusherWorklet),n.bits=n._bitCrusherWorklet.bits,n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{bits:4,frequencyReduction:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._bitCrusherWorklet.dispose(),this}}(vs),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments))||this;n.name="BitCrusherWorklet",n.workletOptions={numberOfInputs:1,numberOfOutputs:1};var o=Io(e.getDefaults(),arguments);n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context});var i=n.context.createGain();return n.bits=new Ti({context:n.context,value:o.bits,units:"positive",minValue:1,maxValue:16,param:i.gain,swappable:!0}),n}return eo(e,t),e.getDefaults=function(){return Object.assign(qr.getDefaults(),{bits:12})},e.prototype._audioWorkletName=function(){return"bit-crusher"},e.prototype._audioWorklet=function(){return' \n\t\tregisterProcessor("'+this._audioWorkletName()+"\", class extends AudioWorkletProcessor {\n\t\t\tstatic get parameterDescriptors () {\n\t\t\t\treturn [{\n\t\t\t\t\tname: 'bits',\n\t\t\t\t\tdefaultValue: 12,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 16\n\t\t\t\t}];\n\t\t\t}\n\t\t\t\n\t\t\tprocess (inputs, outputs, parameters) {\n\t\t\t\tconst input = inputs[0];\n\t\t\t\tconst output = outputs[0];\n\t\t\t\tif (input && output && input.length === output.length) {\n\t\t\t\t\tconst bits = parameters.bits;\n\t\t\t\t\tfor (let channelNum = 0; channelNum < input.length; channelNum++) {\n\t\t\t\t\t\tconst inputChannel = input[channelNum];\n\t\t\t\t\t\tfor (let index = 0; index < inputChannel.length; index++) {\n\t\t\t\t\t\t\tconst value = inputChannel[index];\n\t\t\t\t\t\t\tconst step = bits.length > 1 ? Math.pow(0.5, bits[index]) : Math.pow(0.5, bits[0]);\n\t\t\t\t\t\t\tconst val = step * Math.floor(value / step + 0.5);\n\t\t\t\t\t\t\toutput[channelNum][index] = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\t"},e.prototype.onReady=function(t){Si(this.input,t,this.output);var e=t.parameters.get("bits");this.bits.setParam(e)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this},e}(qr)),ws=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["order"]))||this;n.name="Chebyshev";var o=Io(e.getDefaults(),arguments,["order"]);return n._shaper=new ar({context:n.context,length:4096}),n._order=o.order,n.connectEffect(n._shaper),n.order=o.order,n.oversample=o.oversample,n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{order:1,oversample:"none"})},e.prototype._getCoefficient=function(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)},Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(t){var e=this;this._order=t,this._shaper.setMap((function(n){return e._getCoefficient(n,t,new Map)}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this}}(vs),function(t){function e(e){var n=t.call(this,e)||this;return n.name="StereoEffect",n.input=new Ai({context:n.context}),n.input.channelCount=2,n.input.channelCountMode="explicit",n._dryWet=n.output=new dr({context:n.context,fade:e.wet}),n.wet=n._dryWet.fade,n._split=new nr({context:n.context,channels:2}),n._merge=new mr({context:n.context,channels:2}),n.input.connect(n._split),n.input.connect(n._dryWet.a),n._merge.connect(n._dryWet.b),ei(n,["wet"]),n}return eo(e,t),e.prototype.connectEffectLeft=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._split.connect(t[0],0,0),Si.apply(void 0,ao(t)),ki(t[t.length-1],this._merge,0,0)},e.prototype.connectEffectRight=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._split.connect(t[0],1,0),Si.apply(void 0,ao(t)),ki(t[t.length-1],this._merge,0,1)},e.getDefaults=function(){return Object.assign(Oi.getDefaults(),{wet:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this},e}(Oi)),Ts=function(t){function e(e){var n=t.call(this,e)||this;return n.feedback=new Ei({context:n.context,value:e.feedback,units:"normalRange"}),n._feedbackL=new Ai({context:n.context}),n._feedbackR=new Ai({context:n.context}),n._feedbackSplit=new nr({context:n.context,channels:2}),n._feedbackMerge=new mr({context:n.context,channels:2}),n._merge.connect(n._feedbackSplit),n._feedbackMerge.connect(n._split),n._feedbackSplit.connect(n._feedbackL,0,0),n._feedbackL.connect(n._feedbackMerge,0,0),n._feedbackSplit.connect(n._feedbackR,1,0),n._feedbackR.connect(n._feedbackMerge,0,1),n.feedback.fan(n._feedbackL.gain,n._feedbackR.gain),ei(n,["feedback"]),n}return eo(e,t),e.getDefaults=function(){return Object.assign(ws.getDefaults(),{feedback:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this},e}(ws),Os=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","delayTime","depth"]))||this;n.name="Chorus";var o=Io(e.getDefaults(),arguments,["frequency","delayTime","depth"]);return n._depth=o.depth,n._delayTime=o.delayTime/1e3,n._lfoL=new Hr({context:n.context,frequency:o.frequency,min:0,max:1}),n._lfoR=new Hr({context:n.context,frequency:o.frequency,min:0,max:1,phase:180}),n._delayNodeL=new Ui({context:n.context}),n._delayNodeR=new Ui({context:n.context}),n.frequency=n._lfoL.frequency,ei(n,["frequency"]),n._lfoL.frequency.connect(n._lfoR.frequency),n.connectEffectLeft(n._delayNodeL),n.connectEffectRight(n._delayNodeR),n._lfoL.connect(n._delayNodeL.delayTime),n._lfoR.connect(n._delayNodeR.delayTime),n.depth=n._depth,n.type=o.type,n.spread=o.spread,n}eo(e,t),e.getDefaults=function(){return Object.assign(Ts.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})},Object.defineProperty(e.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90},enumerable:!0,configurable:!0}),e.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},e.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},e.prototype.sync=function(){return this._lfoL.sync(),this._lfoR.sync(),this},e.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}(Ts),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["distortion"]))||this;n.name="Distortion";var o=Io(e.getDefaults(),arguments,["distortion"]);return n._shaper=new ar({context:n.context,length:4096}),n._distortion=o.distortion,n.connectEffect(n._shaper),n.distortion=o.distortion,n.oversample=o.oversample,n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{distortion:.4,oversample:"none"})},Object.defineProperty(e.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap((function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this}}(vs),function(t){function e(e){var n=t.call(this,e)||this;return n.name="FeedbackEffect",n._feedbackGain=new Ai({context:n.context,gain:e.feedback,units:"normalRange"}),n.feedback=n._feedbackGain.gain,ei(n,"feedback"),n.effectReturn.chain(n._feedbackGain,n.effectSend),n}return eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{feedback:.125})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this},e}(vs)),Ss=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["delayTime","feedback"]))||this;n.name="FeedbackDelay";var o=Io(e.getDefaults(),arguments,["delayTime","feedback"]);return n._delayNode=new Ui({context:n.context,delayTime:o.delayTime,maxDelay:o.maxDelay}),n.delayTime=n._delayNode.delayTime,n.connectEffect(n._delayNode),ei(n,"delayTime"),n}eo(e,t),e.getDefaults=function(){return Object.assign(Os.getDefaults(),{delayTime:.25,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.dispose(),this.delayTime.dispose(),this}}(Os),function(t){function e(e){var n=t.call(this,e)||this;return n.name="PhaseShiftAllpass",n.input=new Ai({context:n.context}),n.output=new Ai({context:n.context}),n.offset90=new Ai({context:n.context}),n._bank0=n._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),n._bank1=n._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),n._oneSampleDelay=n.context.createIIRFilter([0,1],[1,0]),Si.apply(void 0,ao([n.input],n._bank0,[n._oneSampleDelay,n.output])),Si.apply(void 0,ao([n.input],n._bank1,[n.offset90])),n}return eo(e,t),e.prototype._createAllPassFilterBank=function(t){var e=this;return t.map((function(t){var n=[[t*t,0,-1],[1,0,-t*t]];return e.context.createIIRFilter(n[0],n[1])}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((function(t){return t.disconnect()})),this._bank1.forEach((function(t){return t.disconnect()})),this._oneSampleDelay.disconnect(),this},e}(Oi)),ks=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency"]))||this;n.name="FrequencyShifter";var o=Io(e.getDefaults(),arguments,["frequency"]);n.frequency=new Ei({context:n.context,units:"frequency",value:o.frequency,minValue:-n.context.sampleRate/2,maxValue:n.context.sampleRate/2}),n._sine=new Nr({context:n.context,type:"sine"}),n._cosine=new Lr({context:n.context,phase:-90,type:"sine"}),n._sineMultiply=new yr({context:n.context}),n._cosineMultiply=new yr({context:n.context}),n._negate=new gr({context:n.context}),n._add=new _r({context:n.context}),n._phaseShifter=new Ss({context:n.context}),n.effectSend.connect(n._phaseShifter),n.frequency.fan(n._sine.frequency,n._cosine.frequency),n._phaseShifter.offset90.connect(n._cosineMultiply),n._cosine.connect(n._cosineMultiply.factor),n._phaseShifter.connect(n._sineMultiply),n._sine.connect(n._sineMultiply.factor),n._sineMultiply.connect(n._negate),n._cosineMultiply.connect(n._add),n._negate.connect(n._add.addend),n._add.connect(n.effectReturn);var i=n.immediate();return n._sine.start(i),n._cosine.start(i),n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{frequency:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}(vs),[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100]),Cs=[225,556,441,341],As=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["roomSize","dampening"]))||this;n.name="Freeverb",n._combFilters=[],n._allpassFiltersL=[],n._allpassFiltersR=[];var o=Io(e.getDefaults(),arguments,["roomSize","dampening"]);return n.roomSize=new Ei({context:n.context,value:o.roomSize,units:"normalRange"}),n._allpassFiltersL=Cs.map((function(t){var e=n.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),n._allpassFiltersR=Cs.map((function(t){var e=n.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),n._combFilters=ks.map((function(t,e){var i=new Vr({context:n.context,dampening:o.dampening,delayTime:t});return e<ks.length/2?n.connectEffectLeft.apply(n,ao([i],n._allpassFiltersL)):n.connectEffectRight.apply(n,ao([i],n._allpassFiltersR)),n.roomSize.connect(i.resonance),i})),ei(n,["roomSize"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(ws.getDefaults(),{roomSize:.7,dampening:3e3})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._combFilters[0].dampening},set:function(t){this._combFilters.forEach((function(e){return e.dampening=t}))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._allpassFiltersL.forEach((function(t){return t.disconnect()})),this._allpassFiltersR.forEach((function(t){return t.disconnect()})),this._combFilters.forEach((function(t){return t.dispose()})),this.roomSize.dispose(),this}}(ws),[.06748,.06404,.08212,.09004]),Ds=[.773,.802,.753,.733],Ms=[347,113,37],Es=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["roomSize"]))||this;n.name="JCReverb",n._allpassFilters=[],n._feedbackCombFilters=[];var o=Io(e.getDefaults(),arguments,["roomSize"]);return n.roomSize=new Ei({context:n.context,value:o.roomSize,units:"normalRange"}),n._scaleRoomSize=new Pr({context:n.context,min:-.733,max:.197}),n._allpassFilters=Ms.map((function(t){var e=n.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),n._feedbackCombFilters=As.map((function(t,e){var o=new Ir({context:n.context,delayTime:t});return n._scaleRoomSize.connect(o.resonance),o.resonance.value=Ds[e],e<As.length/2?n.connectEffectLeft.apply(n,ao(n._allpassFilters,[o])):n.connectEffectRight.apply(n,ao(n._allpassFilters,[o])),o})),n.roomSize.connect(n._scaleRoomSize),ei(n,["roomSize"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(ws.getDefaults(),{roomSize:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._allpassFilters.forEach((function(t){return t.disconnect()})),this._feedbackCombFilters.forEach((function(t){return t.dispose()})),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}(ws),function(t){function e(e){var n=t.call(this,e)||this;return n._feedbackL.disconnect(),n._feedbackL.connect(n._feedbackMerge,0,1),n._feedbackR.disconnect(),n._feedbackR.connect(n._feedbackMerge,0,0),ei(n,["feedback"]),n}return eo(e,t),e}(Ts)),Ps=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["delayTime","feedback"]))||this;n.name="PingPongDelay";var o=Io(e.getDefaults(),arguments,["delayTime","feedback"]);return n._leftDelay=new Ui({context:n.context,maxDelay:o.maxDelay}),n._rightDelay=new Ui({context:n.context,maxDelay:o.maxDelay}),n._rightPreDelay=new Ui({context:n.context,maxDelay:o.maxDelay}),n.delayTime=new Ei({context:n.context,units:"time",value:o.delayTime}),n.connectEffectLeft(n._leftDelay),n.connectEffectRight(n._rightPreDelay,n._rightDelay),n.delayTime.fan(n._leftDelay.delayTime,n._rightDelay.delayTime,n._rightPreDelay.delayTime),n._feedbackL.disconnect(),n._feedbackL.connect(n._rightDelay),ei(n,["delayTime"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(Es.getDefaults(),{delayTime:.25,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}(Es),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["pitch"]))||this;n.name="PitchShift";var o=Io(e.getDefaults(),arguments,["pitch"]);n._frequency=new Ei({context:n.context}),n._delayA=new Ui({maxDelay:1,context:n.context}),n._lfoA=new Hr({context:n.context,min:0,max:.1,type:"sawtooth"}).connect(n._delayA.delayTime),n._delayB=new Ui({maxDelay:1,context:n.context}),n._lfoB=new Hr({context:n.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(n._delayB.delayTime),n._crossFade=new dr({context:n.context}),n._crossFadeLFO=new Hr({context:n.context,min:0,max:1,type:"triangle",phase:90}).connect(n._crossFade.fade),n._feedbackDelay=new Ui({delayTime:o.delayTime,context:n.context}),n.delayTime=n._feedbackDelay.delayTime,ei(n,"delayTime"),n._pitch=o.pitch,n._windowSize=o.windowSize,n._delayA.connect(n._crossFade.a),n._delayB.connect(n._crossFade.b),n._frequency.fan(n._lfoA.frequency,n._lfoB.frequency,n._crossFadeLFO.frequency),n.effectSend.fan(n._delayA,n._delayB),n._crossFade.chain(n._feedbackDelay,n.effectReturn);var i=n.now();return n._lfoA.start(i),n._lfoB.start(i),n._crossFadeLFO.start(i),n.windowSize=n._windowSize,n}eo(e,t),e.getDefaults=function(){return Object.assign(Os.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})},Object.defineProperty(e.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=hi(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=hi(t)-1),this._frequency.value=e*(1.2/this._windowSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}(Os),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","octaves","baseFrequency"]))||this;n.name="Phaser";var o=Io(e.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);return n._lfoL=new Hr({context:n.context,frequency:o.frequency,min:0,max:1}),n._lfoR=new Hr({context:n.context,frequency:o.frequency,min:0,max:1,phase:180}),n._baseFrequency=n.toFrequency(o.baseFrequency),n._octaves=o.octaves,n.Q=new Ei({context:n.context,value:o.Q,units:"positive"}),n._filtersL=n._makeFilters(o.stages,n._lfoL),n._filtersR=n._makeFilters(o.stages,n._lfoR),n.frequency=n._lfoL.frequency,n.frequency.value=o.frequency,n.connectEffectLeft.apply(n,ao(n._filtersL)),n.connectEffectRight.apply(n,ao(n._filtersR)),n._lfoL.frequency.connect(n._lfoR.frequency),n.baseFrequency=o.baseFrequency,n.octaves=o.octaves,n._lfoL.start(),n._lfoR.start(),ei(n,["frequency","Q"]),n}eo(e,t),e.getDefaults=function(){return Object.assign(ws.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})},e.prototype._makeFilters=function(t,e){for(var n=[],o=0;o<t;o++){var i=this.context.createBiquadFilter();i.type="allpass",this.Q.connect(i.Q),e.connect(i.frequency),n.push(i)}return n},Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((function(t){return t.disconnect()})),this._filtersR.forEach((function(t){return t.disconnect()})),this.frequency.dispose(),this}}(ws),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["decay"]))||this;n.name="Reverb",n._convolver=n.context.createConvolver(),n.ready=Promise.resolve();var o=Io(e.getDefaults(),arguments,["decay"]);return n._decay=o.decay,n._preDelay=o.preDelay,n.generate(),n.connectEffect(n._convolver),n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{decay:1.5,preDelay:.01})},Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){uo(t=this.toSeconds(t),.001),this._decay=t,this.generate()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preDelay",{get:function(){return this._preDelay},set:function(t){uo(t=this.toSeconds(t),0),this._preDelay=t,this.generate()},enumerable:!0,configurable:!0}),e.prototype.generate=function(){return oo(this,void 0,void 0,(function(){var t,e,n,o,i,r,s,a;return io(this,(function(c){switch(c.label){case 0:return t=this.ready,e=new ri(2,this._decay+this._preDelay,this.context.sampleRate),n=new Ji({context:e}),o=new Ji({context:e}),i=new mr({context:e}),n.connect(i,0,0),o.connect(i,0,1),r=new Ai({context:e}).toDestination(),i.connect(r),n.start(0),o.start(0),r.gain.setValueAtTime(0,0),r.gain.setValueAtTime(1,this._preDelay),r.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay),s=e.render(),this.ready=s.then(oi),[4,t];case 1:return c.sent(),a=this._convolver,[4,s];case 2:return a.buffer=c.sent().get(),[2,this]}}))}))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._convolver.disconnect(),this}}(vs),function(t){function e(e){var n=t.call(this,e)||this;return n.name="MidSideEffect",n._midSideMerge=new br({context:n.context}),n._midSideSplit=new xr({context:n.context}),n._midSend=n._midSideSplit.mid,n._sideSend=n._midSideSplit.side,n._midReturn=n._midSideMerge.mid,n._sideReturn=n._midSideMerge.side,n.effectSend.connect(n._midSideSplit),n._midSideMerge.connect(n.effectReturn),n}return eo(e,t),e.prototype.connectEffectMid=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this._midSend).chain.apply(t,ao(e,[this._midReturn]))},e.prototype.connectEffectSide=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this._sideSend).chain.apply(t,ao(e,[this._sideReturn]))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this},e}(vs)),Rs=(function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["width"]))||this;n.name="StereoWidener";var o=Io(e.getDefaults(),arguments,["width"]);return n.width=new Ei({context:n.context,value:o.width,units:"normalRange"}),ei(n,["width"]),n._twoTimesWidthMid=new yr({context:n.context,value:2}),n._twoTimesWidthSide=new yr({context:n.context,value:2}),n._midMult=new yr({context:n.context}),n._twoTimesWidthMid.connect(n._midMult.factor),n.connectEffectMid(n._midMult),n._oneMinusWidth=new vr({context:n.context}),n._oneMinusWidth.connect(n._twoTimesWidthMid),ki(n.context.getConstant(1),n._oneMinusWidth),n.width.connect(n._oneMinusWidth.subtrahend),n._sideMult=new yr({context:n.context}),n.width.connect(n._twoTimesWidthSide),n._twoTimesWidthSide.connect(n._sideMult.factor),n.connectEffectSide(n._sideMult),n}eo(e,t),e.getDefaults=function(){return Object.assign(Ps.getDefaults(),{width:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}(Ps),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","depth"]))||this;n.name="Tremolo";var o=Io(e.getDefaults(),arguments,["frequency","depth"]);return n._lfoL=new Hr({context:n.context,type:o.type,min:1,max:0}),n._lfoR=new Hr({context:n.context,type:o.type,min:1,max:0}),n._amplitudeL=new Ai({context:n.context}),n._amplitudeR=new Ai({context:n.context}),n.frequency=new Ei({context:n.context,value:o.frequency,units:"frequency"}),n.depth=new Ei({context:n.context,value:o.depth,units:"normalRange"}),ei(n,["frequency","depth"]),n.connectEffectLeft(n._amplitudeL),n.connectEffectRight(n._amplitudeR),n._lfoL.connect(n._amplitudeL.gain),n._lfoR.connect(n._amplitudeR.gain),n.frequency.fan(n._lfoL.frequency,n._lfoR.frequency),n.depth.fan(n._lfoR.amplitude,n._lfoL.amplitude),n.spread=o.spread,n}eo(e,t),e.getDefaults=function(){return Object.assign(ws.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})},e.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},e.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},e.prototype.sync=function(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this},e.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}(ws),function(t){function e(){var n=t.call(this,Io(e.getDefaults(),arguments,["frequency","depth"]))||this;n.name="Vibrato";var o=Io(e.getDefaults(),arguments,["frequency","depth"]);return n._delayNode=new Ui({context:n.context,delayTime:0,maxDelay:o.maxDelay}),n._lfo=new Hr({context:n.context,type:o.type,min:0,max:o.maxDelay,frequency:o.frequency,phase:-90}).start().connect(n._delayNode.delayTime),n.frequency=n._lfo.frequency,n.depth=n._lfo.amplitude,n.depth.value=o.depth,ei(n,["frequency","depth"]),n.effectSend.chain(n._delayNode,n.effectReturn),n}eo(e,t),e.getDefaults=function(){return Object.assign(vs.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}(vs),ci().now.bind(ci()),ci().immediate.bind(ci()),ci().transport),js=ci().destination,qs=(ci().draw,ci());function Is(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}ii.loaded.bind(ii);var Vs=function(){function t(e){var n=this,o=e.notes,i=e.steps,r=e.options,s=e.filterOptions;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.notes=o;var a=["B#","D","F","G","A"];this.scale=Array(o).fill(0).map((function(t,e){return a[e%a.length]+(3+Math.floor((e+4)/a.length))})).reverse(),this.noteDuration=("1m",new _i(ci(),"1m",undefined)).toSeconds()/i,this.noteOffset=6*this.noteDuration,this.players=[],this.currentPlayer=0,this.polyphony=Array(i).fill(0),this.scheduledNotes={},function(t,e,o,i){return void 0===o&&(o=2),void 0===i&&(i=ci().sampleRate),oo(this,void 0,void 0,(function(){var t,a,c,u;return io(this,(function(l){switch(l.label){case 0:return t=ci(),ui(a=new ri(o,e,i)),[4,(p=new wr(s).toDestination(),h=new es(r).connect(p),void n.scale.forEach((function(t,e){return h.triggerAttackRelease(t,n.noteDuration,n.noteOffset*e)})))];case 1:return l.sent(),c=a.render(),ui(t),[4,c];case 2:return u=l.sent(),[2,new ii(u)]}var p,h}))}))}(0,this.noteOffset*o).then((function(t){for(var e=0;e<4*o;e++){ui(qs);var i=new $r(t);ki(i,js),n.players.push(i)}}))}var e,n;return e=t,(n=[{key:"scheduleNote",value:function(t,e){var n=this;if(!this.scheduledNotes["".concat(t,"-").concat(e)]){var o=Rs.schedule((function(o){var i=(n.notes-n.polyphony[e])/n.notes*10-20;try{n.players[n.currentPlayer].volume.setValueAtTime(i,o),n.players[n.currentPlayer].start(o,t*n.noteOffset,n.noteOffset),n.currentPlayer=++n.currentPlayer%n.players.length}catch(t){console.log(t)}}),e*this.noteDuration);this.scheduledNotes["".concat(t,"-").concat(e)]=o,this.polyphony[e]++}}},{key:"unscheduleNote",value:function(t,e){var n=this.scheduledNotes["".concat(t,"-").concat(e)];n&&(this.polyphony[e]--,Rs.clear(n),delete this.scheduledNotes["".concat(t,"-").concat(e)])}}])&&Is(e.prototype,n),t}();function Fs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ns(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ls,zs=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notes:16,steps:16},o=n.notes,i=void 0===o?16:o,r=n.steps,s=void 0===r?16:r;Fs(this,t),this.steps=s,Rs.loop=!0,Rs.loopEnd="1m",this.instruments=[new Vs({notes:i,steps:s,options:{oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},filterOptions:{frequency:1100,rolloff:-12}})],Rs.on("loopEnd",(function(){return e.emit("loop")}))}var e,n;return e=t,(n=[{key:"getState",value:function(){return Rs.state}},{key:"start",value:function(){var t=this;Rs.start(),qs.resume(),this.sequence||(this.sequence=new gs((function(e,n){return t.emit("step",n)}),Array(16).fill(0).map((function(t,e){return e})),"".concat(this.steps,"n")).start(0))}},{key:"stop",value:function(){Rs.stop()}},{key:"update",value:function(t){var e=this;t.forEach((function(t,n){var o=Math.floor(n/e.steps),i=n%e.steps;t?e.instruments[0].scheduleNote(o,i):e.instruments[0].unscheduleNote(o,i)}))}}])&&Ns(e.prototype,n),t}();$o.mixin(zs);var Bs={"simplex-noise":function(t,n){var o=Array(t*n).fill(0),i=new(e())((new Date).getTime().toString()),r=0,s=0,a=function(t,e,n,o){var r=(i.noise2D(t,e)+1)/1.8,s=Math.min(Math.max(r,0),1);return Math.round(s*(o-n)+n)},c=function(t,e,s){var c=function(t,e,o){for(var i=[],s=[],c=0;c<n;c++){var u=a(r+1e3*o,c,t,e);i.push(u),s.push(c+u*n)}return s}(t,e,2*s),u=function(t){for(var e=[],o=0;o<n;o++)e.push(i.noise2D(r+1e3*t,10*o));return e.map((function(t,n){var o;return t>(null!==(o=e[n-1])&&void 0!==o?o:e[e.length-1])}))}(2*s+1);c.forEach((function(t,e){u[e]&&(o[t]=1)}))};return{grid:o,next:function(){r+=.01,s>0?s--:(s=2,o.forEach((function(t,e){return o[e]=0})),c(0,t/2-1,0),c(t/2-1,t-1,1))}}},"constrained-random":function(t,e){var n=Array(t*e).fill(0),o=n.map((function(t,e){return e})),i=[],r=Array(e).fill(0),s=0,a=function(){var t=o.filter((function(t){return r[t%e]<2})),s=Math.round(Math.random()*(t.length-1)),a=t[s];i.push(a),o.splice(o.indexOf(s),1),n[a]=1,r[a%e]++};return{grid:n,next:function(){var t,c;if(s>0)s--;else if(i.length>=24){for(var u=0;u<4;u++)void 0,void 0,t=Math.round(Math.random()*(i.length-1)),c=i[t],o.push(c),i.splice(t,1),n[c]=0,r[c%e]--,a();s=2}else a()}}},"grow-shrink-random":function(t,e){var n=Array(t*e).fill(0),o=n.map((function(t,e){return e})),i=[],r=Array(e).fill(0),s=!0,a=function(){var t=Math.round(Math.random()*(i.length-1)),s=i[t];o.push(s),i.splice(t,1),n[s]=0,r[s%e]--};return{grid:n,next:function(){if(s)l=(c=o.filter((function(t){return r[t%e]<2})))[u=Math.round(Math.random()*(c.length-1))],i.push(l),o.splice(o.indexOf(u),1),n[l]=1,r[l%e]++;else for(var t=0;t<4;t++)a();var c,u,l;s&&i.length>=24?s=!1:!s&&i.length<=4&&(s=!0)}}},"pure-random":function(t,e){var n=Array(t*e).fill(0);return{grid:n,next:function(){var o=Math.round(Math.random()*(t-1)),i=Math.round(Math.random()*(e-1));n[o*e+i]++,n[o*e+i]%=2}}}},Ws=Bs["simplex-noise"](16,16),Us=new zs;Us.on("loop",(function(){Ws.next(),Us.update(Ws.grid),Ws.grid.forEach((function(t,e){var n=o[e];t?n.classList.add("active"):n.classList.remove("active")}))})),Us.on("step",(function(t){return function(t,e,n){for(var i=[],r=0;r<16;r++){var s=e+16*r;t[s]&&(o[s].classList.add("highlighted"),i.push(o[s]))}setTimeout((function(){return i.forEach((function(t){return t.classList.remove("highlighted")}))}),125)}(Ws.grid,t)})),null===(Ls=document.querySelector("#generator"))||void 0===Ls||Ls.addEventListener("change",(function(t){var e=t.target.value;Ws=Bs[e](16,16)}));var Gs=document.querySelector(".start-button");null==Gs||Gs.addEventListener("click",(function(){"started"===Us.getState()?(Us.stop(),Gs.textContent="Start"):(Us.start(),Gs.textContent="Stop")}))})()})();
//# sourceMappingURL=index.73ea3373.js.map